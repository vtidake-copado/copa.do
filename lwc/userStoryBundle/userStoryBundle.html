<template>
    <section class="slds-modal slds-visible slds-fade-in-open">
        <div class="slds-modal__container">
            <header class="slds-modal__header">
                <lightning-button-icon
                    icon-name="utility:close"
                    variant="border-inverse"
                    class="slds-modal__close"
                    alternative-text="close"
                    onclick={closeModal}></lightning-button-icon>
                <div class="slds-modal__title">{label.USER_STORY_BUNDLE}</div>
            </header>
            <c-copado-alert lwc:if={featureNotEnabled} message={label.FEATURE_NOT_ENABLED_ERROR_MESSAGE} variant="error"></c-copado-alert>
            <lightning-record-edit-form object-api-name={objectApiName} onsubmit={handleSubmit}>
                <div class="slds-modal__content slds-p-around_medium">
                    <div class="slds-p-around_medium slds-is-relative">
                        <lightning-spinner lwc:if={isLoading} variant="brand" alternative-text="Loading"></lightning-spinner>
                        <label class="slds-form-element__label" for="title">
                            <abbr class="slds-required" title="required">* </abbr>{label.TITLE}</label
                        >
                        <lightning-input-field
                            field-name={title}
                            id="title"
                            disabled={featureNotEnabled}
                            variant="label-hidden"
                            required></lightning-input-field>
                    </div>
                </div>

                <footer class="slds-modal__footer slds-align_absolute-center">
                    <c-copadocore-error-popover
                        lwc:if={submitError.isError}
                        class="slds-p-right_x-small"
                        message={submitError.message}></c-copadocore-error-popover>
                    <button type="button" class="slds-button slds-button_neutral cancel" onclick={closeModal}>{label.CANCEL}</button>
                    <lightning-button
                        disabled={featureNotEnabled}
                        class="slds-button"
                        variant="brand"
                        type="submit"
                        label={label.CREATE_US_BUNDLE_BUTTON}></lightning-button>
                </footer>
            </lightning-record-edit-form>
        </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
    <a href={userStoryBundleRelativePath} data-id="userStoryBundleRelativePath" class="slds-hide"></a>
    <a href={userStoryListViewRelativePath} data-id="userStoryListViewRelativePath" class="slds-hide"></a>
</template>