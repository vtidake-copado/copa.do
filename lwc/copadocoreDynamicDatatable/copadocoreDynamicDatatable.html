<template>
    <lightning-spinner if:true={showSpinner} variant="brand" alternative-text={label.Loading} size="large"> </lightning-spinner>

        <!-- onloadmore event listener added declaratively in the template with
            conditional rendering due to issues adding/removing it dynamically -->

        <div if:true={isDraggable} style={containerStyle}>
            <c-copadocore-datatable-extended
                if:true={enableInfiniteLoading}
                key-field="Id"
                columns={columns}
                data={data}
                show-row-number-column={showRowNumberColumn}
                hide-checkbox-column={hideCheckboxColumn}
                resize-column-disabled={resizeColumnDisabled}
                default-sort-direction="asc"
                sorted-direction={sortedDirection}
                sorted-by={sortedBy}
                enable-infinite-loading
                onrowaction={handleRowAction}
                onloadmore={loadMoreData}
                onsort={handleSort}
                onsave={handleSave}
                draft-values={draftValues}
                onrowselection={handleRowSelection}
                onheaderaction={handleHeaderAction}>
            </c-copadocore-datatable-extended>

            <c-copadocore-datatable-extended
                if:false={enableInfiniteLoading}
                key-field="Id"
                columns={columns}
                data={data}
                show-row-number-column={showRowNumberColumn}
                hide-checkbox-column={hideCheckboxColumn}
                resize-column-disabled={resizeColumnDisabled}
                default-sort-direction="asc"
                sorted-direction={sortedDirection}
                sorted-by={sortedBy}
                onrowaction={handleRowAction}
                onsort={handleSort}
                onsave={handleSave}
                draft-values={draftValues}
                onrowselection={handleRowSelection}
                onheaderaction={handleHeaderAction}>
            </c-copadocore-datatable-extended>
        </div>

        <div if:false={isDraggable} style={containerStyle}>
            <lightning-datatable
                if:true={enableInfiniteLoading}
                key-field="Id"
                columns={columns}
                data={data}
                show-row-number-column={showRowNumberColumn}
                hide-checkbox-column={hideCheckboxColumn}
                resize-column-disabled={resizeColumnDisabled}
                default-sort-direction="asc"
                sorted-direction={sortedDirection}
                sorted-by={sortedBy}
                enable-infinite-loading
                onrowaction={handleRowAction}
                onloadmore={loadMoreData}
                onsort={handleSort}
                onsave={handleSave}
                draft-values={draftValues}
                onrowselection={handleRowSelection}
                onheaderaction={handleHeaderAction}>
            </lightning-datatable>

            <lightning-datatable
                if:false={enableInfiniteLoading}
                key-field="Id"
                columns={columns}
                data={data}
                show-row-number-column={showRowNumberColumn}
                hide-checkbox-column={hideCheckboxColumn}
                resize-column-disabled={resizeColumnDisabled}
                default-sort-direction="asc"
                sorted-direction={sortedDirection}
                sorted-by={sortedBy}
                onrowaction={handleRowAction}
                onsort={handleSort}
                onsave={handleSave}
                draft-values={draftValues}
                onrowselection={handleRowSelection}
                onheaderaction={handleHeaderAction}>
            </lightning-datatable>
        </div>
</template>