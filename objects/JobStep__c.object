<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <content>customJobStepsModal</content>
        <formFactor>Large</formFactor>
        <skipRecordTypeSelect>false</skipRecordTypeSelect>
        <type>LightningComponent</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <content>customJobStepsModal</content>
        <formFactor>Large</formFactor>
        <skipRecordTypeSelect>false</skipRecordTypeSelect>
        <type>LightningComponent</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <comment>Action override created by Lightning App Builder during activation.</comment>
        <content>Job_Step_Record_Page</content>
        <formFactor>Large</formFactor>
        <skipRecordTypeSelect>false</skipRecordTypeSelect>
        <type>Flexipage</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>Job_Step</compactLayoutAssignment>
    <compactLayouts>
        <fullName>Job_Step</fullName>
        <fields>Name</fields>
        <fields>Status__c</fields>
        <fields>JobExecution__c</fields>
        <fields>JobTemplate__c</fields>
        <fields>CustomType__c</fields>
        <fields>Order__c</fields>
        <label>Job Step</label>
    </compactLayouts>
    <deploymentStatus>Deployed</deploymentStatus>
    <description>A Job Step is a task that is performed as a result of a job template execution.</description>
    <enableActivities>false</enableActivities>
    <enableBulkApi>false</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>false</enableHistory>
    <enableLicensing>false</enableLicensing>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>false</enableSharing>
    <enableStreamingApi>false</enableStreamingApi>
    <externalSharingModel>Private</externalSharingModel>
    <fields>
        <fullName>ApiName__c</fullName>
        <caseSensitive>true</caseSensitive>
        <description>API name of the job that triggered the result. This information can be used for reporting purposes.</description>
        <externalId>false</externalId>
        <inlineHelpText>API name of the job that triggered the result. This information can be used for reporting purposes.</inlineHelpText>
        <label>Api Name</label>
        <length>255</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>true</unique>
    </fields>
    <fields>
        <fullName>ConfigJson__c</fullName>
        <description>Config Json stores Job step related configuration information, for example in case of manual step it contains manual task assignee and instructions.</description>
        <inlineHelpText>Config Json stores Job step related configuration information, for example in case of manual step it contains manual task assignee and instructions.</inlineHelpText>
        <label>ConfigJson</label>
        <length>131072</length>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>CustomType__c</fullName>
        <description>Type of the Job Step.</description>
        <externalId>false</externalId>
        <inlineHelpText>Type of the Job Step.</inlineHelpText>
        <label>Type</label>
        <length>255</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Destination_Id__c</fullName>
        <description>Id of the destination environment.</description>
        <externalId>false</externalId>
        <formula>CASESAFEID(JobExecution__r.Destination__c)</formula>
        <inlineHelpText>Id of the destination environment.</inlineHelpText>
        <label>Destination Id</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ExecutionSequence__c</fullName>
        <description>Used to define the order of execution in the context of User Story Deployment</description>
        <inlineHelpText>Used to define the order of execution in the context of User Story Deployment</inlineHelpText>
        <label>Execution Sequence</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>before</fullName>
                    <default>false</default>
                    <label>Before Deployment</label>
                </value>
                <value>
                    <fullName>after</fullName>
                    <default>false</default>
                    <label>After Deployment</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Git_RepositoryId__c</fullName>
        <description>Store git repository Id linked to Job step</description>
        <externalId>false</externalId>
        <label>Git RepositoryId</label>
        <length>18</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Git_Repository__c</fullName>
        <description>Id of the Git repository record linked to the pipeline.</description>
        <externalId>false</externalId>
        <formula>Git_RepositoryId__c</formula>
        <inlineHelpText>Id of the Git repository record linked to the pipeline to which the job step appliies.</inlineHelpText>
        <label>Git Repository</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>IsSkipped__c</fullName>
        <defaultValue>false</defaultValue>
        <label>Is Skipped?</label>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>JobExecution__c</fullName>
        <deleteConstraint>Restrict</deleteConstraint>
        <description>A job execution is a representation of a job template execution at a given point in time.</description>
        <inlineHelpText>The job Execution associated with the step</inlineHelpText>
        <label>Job Execution</label>
        <referenceTo>JobExecution__c</referenceTo>
        <relationshipLabel>Job Steps</relationshipLabel>
        <relationshipName>JobSteps</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>JobTemplate__c</fullName>
        <deleteConstraint>Restrict</deleteConstraint>
        <description>Name of the job template which initiates the execution of the job step.</description>
        <inlineHelpText>Name of the job template which initiates the execution of the job step.</inlineHelpText>
        <label>Job Template</label>
        <referenceTo>JobTemplate__c</referenceTo>
        <relationshipLabel>Job Steps</relationshipLabel>
        <relationshipName>JobSteps</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Order__c</fullName>
        <defaultValue>0</defaultValue>
        <description>The order in which the job steps are executed.</description>
        <externalId>false</externalId>
        <inlineHelpText>The order in which the job steps are executed.</inlineHelpText>
        <label>Order</label>
        <precision>18</precision>
        <required>true</required>
        <scale>0</scale>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Parent_Owner_Id__c</fullName>
        <externalId>false</externalId>
        <formula>OwnerId</formula>
        <label>Parent Owner Id</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>PipelineId__c</fullName>
        <description>Stores pipeline Id linked to job execution</description>
        <externalId>false</externalId>
        <inlineHelpText>Stores pipeline Id linked to job execution</inlineHelpText>
        <label>PipelineId</label>
        <length>18</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Pipeline_Id__c</fullName>
        <description>Id of the pipeline in which the job step has been executed.</description>
        <externalId>false</externalId>
        <formula>PipelineId__c</formula>
        <inlineHelpText>Id of the pipeline in which the job step has been executed.</inlineHelpText>
        <label>Pipeline Id</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Quality_Gate_Rule_Condition__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>The scope, filter, and acceptance criteria defined for the quality gate rule referenced in the job step.</description>
        <inlineHelpText>The scope, filter, and acceptance criteria defined for the quality gate rule referenced in the job step.</inlineHelpText>
        <label>Quality Gate Rule Condition</label>
        <referenceTo>Quality_Gate_Rule_Condition__c</referenceTo>
        <relationshipLabel>Job Steps</relationshipLabel>
        <relationshipName>Job_Steps</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Quality_Gate_Rule__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>The quality check performed by the job step.</description>
        <inlineHelpText>The quality check performed by the job step.</inlineHelpText>
        <label>Quality Gate Rule</label>
        <referenceTo>Quality_Gate_Rule__c</referenceTo>
        <relationshipLabel>Job Steps</relationshipLabel>
        <relationshipName>Job_Steps</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Resource_Observations__c</fullName>
        <description>Register what resources are available after the step completes successfully. You can apply quality gates to these resources locally within the Function context.</description>
        <inlineHelpText>Register what resources are available after the step completes successfully. You can apply quality gates to these resources locally within the Function context.</inlineHelpText>
        <label>Resource Observations</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>MultiselectPicklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Local branch ready</fullName>
                    <default>false</default>
                    <label>Local branch ready</label>
                </value>
            </valueSetDefinition>
        </valueSet>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>ResultDataJson__c</fullName>
        <description>This field contain any additional step result information once the step has finished, for example for a flow step after the step completes the flow step can put some date which is result of step execution in this field and then use it in next step using {$Job.PrevStep.JSONResult.XXX} dynamic expression</description>
        <inlineHelpText>This field contains any additional step result information once the step has finished.</inlineHelpText>
        <label>Result Data Json</label>
        <length>131072</length>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>Result_Viewer_Component__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>This is the name of the lightning component that you want to render on the related result record. The name must be in the namespace:componentName format.</inlineHelpText>
        <label>Result Viewer Component</label>
        <length>255</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Result__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>The latest result associated with the job step.</description>
        <inlineHelpText>The latest result associated with the job step.</inlineHelpText>
        <label>Last Result</label>
        <referenceTo>Result__c</referenceTo>
        <relationshipLabel>Job Steps</relationshipLabel>
        <relationshipName>JobSteps</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>SkipCondition__c</fullName>
        <inlineHelpText>Expression that if evaluates to true, the step execution will be skipped and Copado will continue with the next step or complete the job execution. If left empty or the expression evaluates to false, the job step will execute as usual.</inlineHelpText>
        <label>Skip Step Condition</label>
        <length>32768</length>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>Source_Id__c</fullName>
        <description>Id of the source environment.</description>
        <externalId>false</externalId>
        <formula>CASESAFEID(JobExecution__r.Source__c)</formula>
        <inlineHelpText>Id of the source environment.</inlineHelpText>
        <label>Source Id</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Status__c</fullName>
        <description>The status of the Job Step.</description>
        <externalId>false</externalId>
        <formula>IF(NOT(ISBLANK(JobTemplate__c)), &apos;NA&apos;, 
  IF(IsSkipped__c , &apos;Skipped&apos;,
    IF(ISBLANK(Result__c), &apos;Pending&apos;, TEXT(Result__r.Status__c))))</formula>
        <inlineHelpText>The status of the Job Step.</inlineHelpText>
        <label>Status</label>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Sub_Job_Execution__c</fullName>
        <description>Technical field. Not available in the page/layout.</description>
        <externalId>false</externalId>
        <inlineHelpText>The Id of the related job execution that performs additional steps and operations, such as running a test.</inlineHelpText>
        <label>Sub Job Execution</label>
        <length>18</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Type__c</fullName>
        <description>Type of the Job Step.</description>
        <inlineHelpText>Type of the Job Step.</inlineHelpText>
        <label>Behaviour</label>
        <required>true</required>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Function</fullName>
                    <default>false</default>
                    <label>Function</label>
                </value>
                <value>
                    <fullName>Flow</fullName>
                    <default>false</default>
                    <label>Flow</label>
                </value>
                <value>
                    <fullName>Manual</fullName>
                    <default>false</default>
                    <label>Manual</label>
                </value>
                <value>
                    <fullName>Test</fullName>
                    <default>false</default>
                    <label>Test</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>UserStory__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>Lookup field to the user story to which this deployment task belongs</description>
        <inlineHelpText>Lookup field to the user story to which this deployment task belongs</inlineHelpText>
        <label>User Story</label>
        <referenceTo>User_Story__c</referenceTo>
        <relationshipLabel>Deployment Steps</relationshipLabel>
        <relationshipName>JobSteps</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <label>Job Step</label>
    <nameField>
        <label>Job Step Name</label>
        <type>Text</type>
    </nameField>
    <pluralLabel>Job Steps</pluralLabel>
    <searchLayouts/>
    <sharingModel>ReadWrite</sharingModel>
    <validationRules>
        <fullName>Execution_Sequence_Required</fullName>
        <active>true</active>
        <description>Execution Sequence is required for Deployment steps</description>
        <errorConditionFormula>AND( UserStory__c &lt;&gt; null, ISPICKVAL(ExecutionSequence__c, &quot;&quot;))</errorConditionFormula>
        <errorDisplayField>ExecutionSequence__c</errorDisplayField>
        <errorMessage>Execution Sequence is required for Deployment steps</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Template_OR_Execution_Is_Required</fullName>
        <active>true</active>
        <errorConditionFormula>AND( ISBLANK( JobTemplate__c ), ISBLANK(  JobExecution__c  ),  ISBLANK( UserStory__c )  )</errorConditionFormula>
        <errorMessage>JobTemplate, Execution, or User Story is required</errorMessage>
    </validationRules>
    <visibility>Public</visibility>
</CustomObject>
