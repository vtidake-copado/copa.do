{"dataPackId":"","dataPacks":[{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".via-nds .vloc-ins-coverages-container-wrapper {\n  width: 100%; }\n  .via-nds .vloc-ins-coverages-container-wrapper .vloc-ins-coverages-container .vloc-ins-coverages-card {\n    border-left: 1px solid #0070D2;\n    border-right: 1px solid #0070D2; }\n    .via-nds .vloc-ins-coverages-container-wrapper .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.optional-coverage {\n      border: 1px solid #0070D2; }\n    .via-nds .vloc-ins-coverages-container-wrapper .vloc-ins-coverages-container .vloc-ins-coverages-card:first-of-type {\n      border-top: 1px solid #0070D2;\n      border-top-left-radius: 0.25rem;\n      border-top-right-radius: 0.25rem; }\n    .via-nds .vloc-ins-coverages-container-wrapper .vloc-ins-coverages-container .vloc-ins-coverages-card.optional-coverage {\n      border: none; }\n    .via-nds .vloc-ins-coverages-container-wrapper .vloc-ins-coverages-container .vloc-ins-coverages-card.last-non-optional {\n      border-bottom: 1px solid #0070D2;\n      border-bottom-left-radius: 0.25rem;\n      border-bottom-right-radius: 0.25rem; }\n    .via-nds .vloc-ins-coverages-container-wrapper .vloc-ins-coverages-container .vloc-ins-coverages-card.added-optional-coverage {\n      border-left: 1px solid #0070D2;\n      border-right: 1px solid #0070D2; }\n  .via-nds .vloc-ins-coverages-container-wrapper .vloc-ins-coverages-container .vloc-input-pending {\n    border-bottom: 2px solid #ffb75d; }\n  .via-nds .vloc-ins-coverages-container-wrapper .vloc-ins-coverages-container .vloc-ins-os-amount-container {\n    margin-top: 2rem;\n    font-size: 1.5rem; }\n    .via-nds .vloc-ins-coverages-container-wrapper .vloc-ins-coverages-container .vloc-ins-os-amount-container .ins-coverages-os-amount-item-container {\n      display: flex;\n      justify-content: space-between;\n      max-width: 30%;\n      margin: 0 auto; }\n","%vlocity_namespace%__CustomJavascript__c":"vlocity.cardframework.registerModule.controller('insCoveragesOsCtrl', ['$scope', '$rootScope', '$timeout', '$controller', function($scope, $rootScope, $timeout, $controller) {\n    'use strict';\n    // insCoveragesCtrl is the JS Angular controller in ins-os-coverages-component which\n    // is the component for coverages\n    angular.extend(this, $controller('insCoveragesCtrl', {$scope: $scope}));\n    $scope.customTemplates = baseCtrl.prototype.$scope.bpTree.propSetMap.elementTypeToHTMLTemplateMapping;\n}]);","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-coverages-os-template/8/Vlocity/1517271349653","%vlocity_namespace%__HTML__c":"<div ng-if=\"control.vlcSI[control.itemsKey]\" class=\"vloc-ins-coverages-container-wrapper\">\n    <div ng-if=\"baseCtrl.vlocOSInsConfigProductSet && baseCtrl.vlocOSInsConfigProductSet.timestamp !== control.vlcSI[control.itemsKey][0].timestamp\" ng-init=\"baseCtrl.setSelectedProducts(control)\"></div>\n    <div class=\"vloc-ins-coverages-container-inner-wrapper\" ng-controller=\"insCoveragesOsCtrl\" ng-init=\"createData(control.vlcSI[control.itemsKey], baseCtrl.$scope.bpTree.response)\">\n        <div class=\"slds-p-bottom--xx-small nds-p-bottom--xx-small vloc-ins-coverages-container\" ng-repeat=\"(childProductIndex, childProduct) in productsList track by $index\" ng-if=\"$index === 0\" ng-init=\"setSelectedOption(control, childProduct, option, this)\">\n            <h3 class=\"vloc-ins-product-name\" ng-if=\"!insCoveragesConfig.showParentProduct\">{{childProduct.Name}}</h3>\n            <div ins-os-include-template=\"{{customTemplates.CoveragesDisplayTemplate}}\"></div>\n            <div class=\"vloc-ins-os-amount-container slds-size--1-of-1 slds-p-horizontal--medium slds-text-heading--medium slds-text-align--center nds-size--1-of-1 nds-p-horizontal--medium nds-text-heading--medium nds-text-align--center\">\n                <div ng-if=\"childProduct.Price && childProduct.totalTaxFeeAmount\" class=\"vloc-ins-coverages-premium ins-coverages-os-amount-item-container\">\n                    Premium<span class=\"slds-m-left--large nds-m-left--large\">{{childProduct.Price | currency: currencyCode}}</span>\n                </div>\n                <div ng-if=\"childProduct.totalTaxFeeAmount\" class=\"vloc-ins-coverages-tax-and-fee ins-coverages-os-amount-item-container\">\n                    Tax &amp; Fee\n                    <span class=\"slds-m-left--large nds-m-left--large\">{{childProduct.totalTaxFeeAmount | currency: currencyCode}}</span>\n                </div>\n                <div ng-if=\"childProduct.Price || childProduct.totalTaxFeeAmount\" class=\"vloc-ins-coverages-total ins-coverages-os-amount-item-container \">\n                    Total <span class=\"slds-m-left--large nds-m-left--large\">{{childProduct.Price + childProduct.totalTaxFeeAmount | currency: currencyCode }}</span>\n                </div>\n            </div>\n        </div>\n        <div class=\"slds-size--1-of-1 slds-text-align--right nds-size--1-of-1 nds-text-align--right\" ng-hide=\"!calcConfig.disableAutoCalculate\">\n            <button class=\"slds-button slds-button--brand slds-m-top--small nds-button nds-button--brand nds-m-top--small\" ng-click=\"calcConfig.triggerCalculate = true; changeCoverage(bpTree.response, control, scpReference);\">\n                <slds-button-svg-icon sprite=\"'utility'\" icon=\"'filterList'\" extra-classes=\"'slds-button__icon--left nds-button__icon--left'\"></slds-button-svg-icon>\n                <span>Calculate Price</span>\n            </button>\n        </div>\n        <div class=\"slds-notify slds-notify--alert slds-theme--alert-texture slds-theme--warning slds-m-top--medium nds-notify nds-notify--alert nds-theme--alert-texture nds-theme--warning nds-m-top--medium\" role=\"alert\" ng-show=\"!calcConfig.calculationDone\">\n            <span class=\"slds-assistive-text nds-assistive-text\">warning</span>\n            <h2>Please recalculate the price before moving forward.</h2>\n        </div>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"// Variables:\n$royal-blue: #0070D2;\n$light-orange: #ffb75d;\n\n.via-nds {\n    .vloc-ins-coverages-container-wrapper {\n        width: 100%;\n        \n        .vloc-ins-coverages-container {\n            .vloc-ins-coverages-card {\n                border-left: 1px solid $royal-blue;\n                border-right: 1px solid $royal-blue;\n                \n                .vloc-ins-coverages-card-inner-wrapper.optional-coverage {\n                    border: 1px solid $royal-blue;\n                }\n                \n                &:first-of-type {\n                    border-top: 1px solid $royal-blue;\n                    border-top-left-radius: 0.25rem;\n                    border-top-right-radius: 0.25rem;\n                }\n\n                &.optional-coverage {\n                    border: none;\n                }\n                \n                &.last-non-optional {\n                    border-bottom: 1px solid $royal-blue;\n                    border-bottom-left-radius: 0.25rem;\n                    border-bottom-right-radius: 0.25rem;\n                }\n\n                &.added-optional-coverage {\n                    border-left: 1px solid $royal-blue;\n                    border-right: 1px solid $royal-blue;\n                }\n            }\n\n            .vloc-input-pending {\n                border-bottom: 2px solid $light-orange;\n            }\n\n            .vloc-ins-os-amount-container {\n                margin-top: 2rem;\n                font-size: 1.5rem;\n                .ins-coverages-os-amount-item-container {\n                    display: flex;\n                    justify-content: space-between;\n                    max-width: 30%;\n                    margin: 0 auto;\n                }\n            }\n        }\n    }\n}\n","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":8,"Name":"ins-coverages-os-template","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-coverages-os-template/%vlocity_namespace%__VlocityUITemplate__c/ins-coverages-os-template"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-coverages-os-template","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-coverages-os-template","VlocityDataPackName":"ins-coverages-os-template","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".via-nds .nds-select {\n  padding-right: 1.75rem; }\n\n.via-nds .vloc-ins-attribute-component-container {\n  min-height: 2.25rem;\n  margin: 0 2rem 0 4.5rem; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component {\n    position: relative; }\n    .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component .vloc-ins-attribute-component-name {\n      line-height: 2rem;\n      font-size: 1rem;\n      padding-right: 0.5rem;\n      color: #00396b; }\n    .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component .vloc-ins-attribute-component-messages-message {\n      font-size: 0.75rem;\n      white-space: normal; }\n      .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component .vloc-ins-attribute-component-messages-message:first-child {\n        margin-top: 0; }\n      .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component .vloc-ins-attribute-component-messages-message:last-child {\n        margin-bottom: 1rem; }\n      .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component .vloc-ins-attribute-component-messages-message.vloc-ins-attribute-component-messages-message-warn {\n        color: #ffb75d; }\n      .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component .vloc-ins-attribute-component-messages-message.vloc-ins-attribute-component-messages-message-error {\n        color: #c23934; }\n      .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component .vloc-ins-attribute-component-messages-message.vloc-ins-attribute-component-messages-message-recommendation {\n        color: #1589ee; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit .vloc-ins-coverages-attribute-readonly {\n    line-height: 2rem;\n    color: #00396b; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit > div:not(.nds-dropdown):not(.nds-form-element),\n.via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-premium > div:not(.nds-dropdown):not(.nds-form-element) {\n    width: 100%;\n    height: 100%;\n    padding: 0.125rem 0; }\n    .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit > div:not(.nds-dropdown):not(.nds-form-element).nds-picklist,\n.via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-premium > div:not(.nds-dropdown):not(.nds-form-element).nds-picklist {\n      z-index: 999; }\n    .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit > div:not(.nds-dropdown):not(.nds-form-element).vloc-ins-attribute-component-limit-multiselect-checkbox,\n.via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-premium > div:not(.nds-dropdown):not(.nds-form-element).vloc-ins-attribute-component-limit-multiselect-checkbox {\n      padding-bottom: 0.5rem; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker),\n.via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-premium .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) {\n    height: auto;\n    max-width: 15rem;\n    min-width: 3rem;\n    width: 100%; }\n    .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) .vloc-ins-attribute-component-dropdown-items-item > .vloc-ins-attribute-component-dropdown-items-link.not-checked .nds-icon,\n.via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-premium .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) .vloc-ins-attribute-component-dropdown-items-item > .vloc-ins-attribute-component-dropdown-items-link.not-checked .nds-icon {\n      opacity: 0; }\n    .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) .vloc-ins-attribute-component-dropdown-items-item.ins-rule-set-value,\n.via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-premium .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) .vloc-ins-attribute-component-dropdown-items-item.ins-rule-set-value {\n      background-color: #ecebea; }\n      .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) .vloc-ins-attribute-component-dropdown-items-item.ins-rule-set-value > .vloc-ins-attribute-component-dropdown-items-link,\n.via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-premium .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) .vloc-ins-attribute-component-dropdown-items-item.ins-rule-set-value > .vloc-ins-attribute-component-dropdown-items-link {\n        background-color: #ecebea;\n        cursor: not-allowed; }\n        .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) .vloc-ins-attribute-component-dropdown-items-item.ins-rule-set-value > .vloc-ins-attribute-component-dropdown-items-link:hover,\n.via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-premium .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) .vloc-ins-attribute-component-dropdown-items-item.ins-rule-set-value > .vloc-ins-attribute-component-dropdown-items-link:hover {\n          background-color: #ecebea; }\n        .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) .vloc-ins-attribute-component-dropdown-items-item.ins-rule-set-value > .vloc-ins-attribute-component-dropdown-items-link .nds-icon,\n.via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-premium .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) .vloc-ins-attribute-component-dropdown-items-item.ins-rule-set-value > .vloc-ins-attribute-component-dropdown-items-link .nds-icon {\n          fill: #ffffff; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .vloc-ins-attribute-component-limit .nds-form-element .nds-form-element__control.nds-picklist__input {\n    width: auto; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .vloc-ins-attribute-component-limit .nds-form-element .nds-form-element__control.nds-input-has-icon--right .nds-button {\n    right: 0.5rem; }\n    .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .vloc-ins-attribute-component-limit .nds-form-element .nds-form-element__control.nds-input-has-icon--right .nds-button .nds-button__icon {\n      right: 0;\n      fill: #16325C; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .nds-form-element__addon {\n    height: 2rem;\n    line-height: 2rem;\n    border: 1px solid #cfd7e6;\n    min-width: 2rem;\n    max-width: 3.5rem;\n    padding: 0 0.25rem;\n    margin: 0;\n    text-align: center;\n    border-right: none;\n    border-top-left-radius: 0.25rem;\n    border-bottom-left-radius: 0.25rem;\n    font-size: .75rem; }\n    .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .nds-form-element__addon.vloc-ins-attribute-component-datatype-percentage {\n      border: 1px solid #cfd7e6;\n      border-left: none;\n      border-radius: 0;\n      border-top-right-radius: 0.25rem;\n      border-bottom-right-radius: 0.25rem; }\n    .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .nds-form-element__addon.disabled {\n      background-color: #e0e5ee;\n      border-color: transparent; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input input[type=text].ng-dirty.ng-valid.ng-not-empty {\n    border-color: #cfd7e6; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .layout-newport .nds-form-element__addon.nds-form-element__addon {\n    padding-bottom: 1.9rem;\n    border-bottom: 1px solid #dddbda;\n    border-radius: 0;\n    top: 0;\n    left: 0;\n    border: none;\n    height: calc(2rem - 2px);\n    line-height: 1.88rem; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .layout-newport .nds-form-element__addon.vloc-ins-attribute-component-datatype-percentage.nds-form-element__addon {\n    left: auto;\n    right: 0;\n    border: none; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .layout-newport .nds-input {\n    padding-left: 2rem; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .vloc-ins-attribute-component-input-currency {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .vloc-ins-attribute-component-input-percentage {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input input[type=text].ng-dirty.ng-valid.ng-not-empty {\n    border-color: #cfd7e6; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-range-slider > div:not(.nds-dropdown) {\n    padding-top: 0.25rem; }\n\n@media screen and (max-width: 600px) {\n  .via-nds .vloc-ins-attribute-component-container {\n    margin: 0; }\n    .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component .vloc-ins-attribute-component-name {\n      font-size: .8rem; } }\n","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-attribute-component/1/Vlocity/1529086590505","%vlocity_namespace%__HTML__c":"<div class=\"slds-grid nds-grid vloc-ins-attribute-component-container\" ng-class=\"{'vloc-input-pending': coverage.pendingUpdates.indexOf(attribute.code) > -1}\">\n    <div class=\"slds-size--8-of-12 slds-max-small-size--7-of-12 slds-p-right--xx-small slds-truncate nds-size--8-of-12 nds-max-small-size--7-of-12 nds-p-right--xx-small nds-truncate vloc-ins-attribute-component\">\n        <label class=\"slds-text-heading--x-small nds-text-heading--x-small vloc-ins-attribute-component-name\" for=\"{{formatId(['attribute', coverage.ProductCode, childProductIndex, attribute.code])}}\">{{attribute.label}}<span ng-if=\"attribute.max\"> ({{attribute.min}} - {{attribute.max}})</span></label>\n        <ul class=\"vloc-ins-attribute-component-messages-container\" ng-if=\"attribute.rules.length\">\n            <li class=\"slds-m-top--xx-small nds-m-top--xx-small vloc-ins-attribute-component-messages-message vloc-ins-attribute-component-messages-message-{{rule.messages[0].severity.toLowerCase()}}\" ng-repeat=\"rule in attribute.rules\" ng-if=\"rule.ruleType === 'Message' && rule.ruleEvaluation\" ng-class=\"{'': rule.messages[0].severity}\">{{rule.messages[0].message}}</li>\n        </ul>\n        <div class=\"vloc-ins-attribute-component-messages-container\" ng-if=\"attribute.values.length && value.rules\" ng-repeat=\"value in attribute.values\">\n            <ul>\n                <li class=\"slds-m-top--xx-small nds-m-top--xx-small vloc-ins-attribute-component-messages-message vloc-ins-attribute-component-messages-message-{{rule.messages[0].severity.toLowerCase()}}\" ng-repeat=\"rule in value.rules\" ng-if=\"rule.ruleType === 'Message' && rule.ruleEvaluation\">{{rule.messages[0].message}}</li>\n            </ul>\n        </div>\n    </div>\n    <div class=\"slds-size--4-of-12 slds-max-small-size--5-of-12 slds-is-relative nds-size--4-of-12 nds-max-small-size--5-of-12 nds-is-relative vloc-ins-attribute-component-limit\">\n        <div class=\"slds-form-element nds-form-element vloc-ins-attribute-component-limit-input\" ng-if=\"attribute.inputType !== 'dropdown' && !attribute.multiselect && attribute.inputType !== 'radio' && attribute.inputType !== 'range' && attribute.dataType !== 'date' && attribute.dataType !== 'datetime' && !attribute.readonly\">\n            <div class=\"slds-form-element__control slds-is-relative nds-form-element__control nds-is-relative\" ng-class=\"{'slds-input-has-fixed-addon nds-input-has-fixed-addon': attribute.dataType === 'currency' || attribute.dataType === 'percentage', 'layout-newport': baseCtrl.$scope.bpTree.response.layout.toLowerCase() === 'newport'}\">\n                <span class=\"slds-form-element__addon nds-form-element__addon\" ng-if=\"attribute.dataType === 'currency' && !attribute.readonly\" ng-class=\"{'disabled': attribute.readonly}\">{{currencyCode}}</span>\n                <input type=\"{{attribute.inputType}}\" id=\"{{formatId(['attribute', coverage.ProductCode, childProductIndex, attribute.code])}}\" class=\"slds-input nds-input\" ng-class=\"{'vloc-ins-attribute-component-input-currency': attribute.dataType === 'currency', 'vloc-ins-attribute-component-input-percentage': attribute.dataType === 'percentage'}\" ng-model=\"attribute.userValues\" ng-if=\"!attribute.readonly && attribute.inputType !== 'checkbox'\" ng-focus=\"currentTextValue = attribute.userValues\" ng-blur=\"changeCoverage(bpTree.response, control, scpReference, coverage, attribute, currentTextValue)\" ng-click=\"stopPropagation($event)\" ng-disabled=\"attribute.ruleSetValue || coverage.isExcluded\" />\n                <span class=\"slds-form-element__addon nds-form-element__addon vloc-ins-attribute-component-datatype-percentage\" ng-if=\"attribute.dataType === 'percentage' && !attribute.readonly\" ng-class=\"{'disabled': attribute.readonly}\">%</span>\n                <span class=\"slds-checkbox slds-p-left--x-small nds-checkbox nds-p-left--x-small\" ng-if=\"attribute.inputType === 'checkbox'\">\n                    <input type=\"checkbox\" name=\"{{formatId(['attribute', coverage.ProductCode, childProductIndex, attribute.code])}}\" id=\"{{formatId(['attribute', coverage.ProductCode, childProductIndex, attribute.code])}}\" ng-model=\"attribute.userValues\" ng-disabled=\"attribute.ruleSetValue || coverage.isExcluded\" />\n                    <label class=\"slds-checkbox__label nds-checkbox__label\" for=\"{{formatId(['attribute', coverage.ProductCode, childProductIndex, attribute.code])}}\">\n                        <span class=\"slds-checkbox--faux nds-checkbox--faux\"></span>\n                    </label>\n                </span>\n            </div>\n        </div>\n        <div class=\"slds-form-element nds-form-element vloc-ins-attribute-component-limit-select\" ng-if=\"attribute.inputType === 'dropdown' && attribute.inputType !== 'checkbox' && !attribute.multiselect && !attribute.readonly\">\n            <div class=\"slds-form-element__control nds-form-element__control\">\n                <div class=\"slds-select_container nds-select_container\" ng-if=\"!attribute.readonly\">\n                    <select id=\"{{formatId(['attribute', coverage.ProductCode, childProductIndex, attribute.code])}}\" class=\"slds-select nds-select\" ng-model=\"attribute.userValues\" ng-options=\"value.value as value.label for value in attribute.values | filter: {hiddenByRule: '!true'}\" ng-disabled=\"attribute.ruleSetValue || coverage.isExcluded\">{{value.label}}</select>\n                </div>\n            </div>\n        </div>\n        <div class=\"vloc-ins-attribute-component-limit-multiselect-checkbox\" ng-if=\"attribute.multiselect && attribute.inputType === 'checkbox'\">\n            <div class=\"slds-p-left--x-small nds-p-left--x-small vloc-ins-attribute-component-uservalues\">\n                <fieldset class=\"slds-form-element nds-form-element\">\n                    <div class=\"slds-form-element__control nds-form-element__control\">\n                        <span class=\"slds-checkbox nds-checkbox\" ng-repeat=\"value in attribute.values\" ng-if=\"!value.hiddenByRule\">\n                            <input type=\"checkbox\" id=\"{{formatId(['attr-ms-cb', product.ProductCode, childProductIndex, category.Code__c, attribute.attributeId, value.value])}}\" checked=\"\" ng-model=\"attribute.userValues[$index][value.value]\" ng-disabled=\"($index === attribute.ruleSetValueIndex && attribute.ruleSetValue) || attribute.readonly\" ng-click=\"toggleValue(attribute, value, $index, bpTree.response, control, this, coverage)\" ng-disabled=\"attribute.ruleSetValue || coverage.isExcluded\" />\n                            <label class=\"slds-checkbox__label nds-checkbox__label\" for=\"{{formatId(['attr-ms-cb', product.ProductCode, childProductIndex, category.Code__c, attribute.attributeId, value.value])}}\">\n                                <span class=\"slds-checkbox--faux nds-checkbox--faux\"></span>\n                                <span class=\"nds-form-element__label\">{{value.label}}</span>\n                            </label>\n                        </span>\n                    </div>\n                </fieldset>\n            </div>\n        </div>\n        <div ng-init=\"$root.insOSCoveragesDropdowns[attribute.attributeId] = false; countSelected(attribute)\" ng-style=\"{'z-index': (1000 - $parent.$parent.$index)}\" ng-if=\"attribute.multiselect && attribute.inputType === 'dropdown' && !attribute.readonly\" class=\"nds-form-element\">\n            <div class=\"nds-form-element__control\">\n                <div class=\"nds-combobox_container nds-dropdown-trigger nds-dropdown-trigger--click\" ins-os-dropdown-handler=\"toggleDropdown(attribute)\" ng-class=\"{'nds-is-open': $root.insOSCoveragesDropdowns[attribute.attributeId]}\">\n                    <div class=\"nds-combobox__form-element nds-input-has-icon nds-input-has-icon_right\" role=\"none\">\n                        <input id=\"{{formatId(['attribute', coverage.ProductCode, childProductIndex, attribute.code])}}\" class=\"nds-input nds-combobox__input\" value=\"{{attribute.multiSelectCount}} Selected\" type=\"text\" autoComplete=\"off\" role=\"textbox\" readonly=\"\" />\n                        <span class=\"nds-icon_container nds-icon-utility-down nds-input__icon nds-input__icon_right\">\n                            <slds-button-svg-icon sprite=\"'utility'\" icon=\"'down'\"></slds-button-svg-icon>\n                        </span>\n                    </div>\n                    <div class=\"nds-dropdown nds-dropdown_fluid nds-dropdown--left vloc-ins-attribute-component-dropdown-items\">\n                        <ul id=\"option-list-{{$parent.$index}}-{{$index}}\" class=\"nds-listbox nds-listbox_vertical\" role=\"menu\">\n                            <li ng-repeat=\"value in attribute.values\" ng-click=\"toggleValue(attribute, value, $index, bpTree.response, control, this, coverage)\" ng-if=\"!value.hiddenByRule\" class=\"nds-listbox__item\" role=\"presentation\">\n                                <div ng-class=\"{'nds-is-selected': attribute.userValues.indexOf(value.value) > -1, 'ins-rule-set-value': value.ruleSetValue}\" class=\"nds-media nds-listbox__option nds-listbox__option_plain nds-media_small\" role=\"option\">\n                                    <span class=\"nds-media__figure nds-listbox__option-icon\">\n                                        <slds-svg-icon sprite=\"'utility'\" icon=\"'check'\" size=\"'x-small'\" extra-classes=\"'nds-listbox__icon-selected'\"></slds-svg-icon>\n                                    </span>\n                                    <span class=\"nds-media__body\">\n                                        <span class=\"nds-truncate\" title=\"{{value.label}}\">{{value.label}}</span>\n                                    </span>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"vloc-ins-attribute-component-limit-radio-picklist\" ng-if=\"attribute.dataType === 'text' && attribute.inputType === 'radio' && !attribute.readonly\">\n            <div class=\"slds-p-left--x-small nds-p-left--x-small vloc-ins-attribute-component-uservalues\">\n                <fieldset class=\"slds-form-element nds-form-element\">\n                    <div class=\"slds-form-element__control nds-form-element__control\">\n                        <span class=\"slds-radio nds-radio\" ng-repeat=\"value in attribute.values\" ng-if=\"!value.hiddenByRule\">\n                            <input type=\"radio\" id=\"{{formatId(['attr-radio-pl', product.ProductCode, childProductIndex, category.Code__c, attribute.attributeId, value.value, coverage.pciId])}}\" ng-checked=\"value.value === attribute.userValues\" ng-click=\"attribute.userValues = value.value; changeCoverage(bpTree.response, control, scpReference, coverage, attribute, null)\" ng-disabled=\"attribute.ruleSetValue || coverage.isExcluded\" />\n                            <label class=\"slds-radio__label nds-radio__label\" for=\"{{formatId(['attr-radio-pl', product.ProductCode, childProductIndex, category.Code__c, attribute.attributeId, value.value, coverage.pciId])}}\">\n                                <span class=\"slds-radio--faux nds-radio--faux\"></span>\n                                <span class=\"nds-form-element__label\">{{value.label}}</span>\n                            </label>\n                        </span>\n                    </div>\n                </fieldset>\n            </div>\n        </div>\n        <div class=\"vloc-ins-attribute-component-limit-range-slider\" ng-if=\"attribute.inputType === 'range' && !attribute.readonly\">\n            <div class=\"slds-is-relative slds-form-element nds-is-relative nds-form-element vloc-ins-attribute-component-uservalues\">\n                <div class=\"slds-form-element__control nds-form-element__control vloc-ins-attribute-component-range-slider-element-control\">\n                    <div class=\"slds-slider nds-slider\">\n                        <input type=\"range\" id=\"{{formatId(['range-slider', product.ProductCode, childProductIndex, category.Code__c, attribute.attributeId])}}\" min=\"{{attribute.min}}\" min=\"{{attribute.step || 1}}\" max=\"{{attribute.max}}\" class=\"slds-slider__range nds-slider__range\" ng-model=\"attribute.rangeValue\" ng-init=\"attribute.rangeValue = attribute.userValues\" ng-disabled=\"attribute.ruleSetValue || coverage.isExcluded\" ins-os-range-handler ins-os-range-change=\"attribute.userValues = attribute.rangeValue; changeCoverage(bpTree.response, control, scpReference, coverage, attribute, null)\" />\n                        <span class=\"slds-slider__value slds-p-right--none nds-slider__value nds-p-right--none\" aria-hidden=\"true\">{{attribute.rangeValue}}<span ng-if=\"attribute.dataType === 'percentage'\">%</span></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"vloc-ins-attribute-component-limit-date-datetime\" ng-if=\"(attribute.dataType === 'date' || attribute.dataType === 'datetime') && !attribute.readonly\">\n            <div class=\"slds-is-relative nds-is-relative vloc-ins-attribute-component-date-container\" ng-if=\"attribute.dataType === 'date'\">\n                <input type=\"text\" id=\"{{formatId(['text-input', product.ProductCode, childProductIndex, category.Code__c, attribute.attributeId])}}\" class=\"slds-input nds-input datatype-{{attribute.dataType}}\" ng-model=\"attribute.userValues\" ng-model-options=\"{debounce: 0}\" slds-date-picker data-placement=\"bottom-right\"  ng-disabled=\"attribute.ruleSetValue || coverage.isExcluded\" />\n            </div>\n            <div class=\"slds-grid nds-grid vloc-ins-attribute-component-datetime-container\" ng-if=\"attribute.dataType === 'datetime'\">\n                <div class=\"slds-is-relative slds-size--1-of-2 slds-p-right--xx-small nds-is-relative nds-size--1-of-2 nds-p-right--xx-small\">\n                    <input type=\"text\" id=\"{{formatId(['text-input', product.ProductCode, childProductIndex, category.Code__c, attribute.attributeId])}}\" class=\"slds-input nds-input datatype-{{attribute.dataType}}\" ng-model=\"attribute.userValues\" ng-model-options=\"{debounce: 0}\" slds-date-picker data-placement=\"bottom-right\"  ng-disabled=\"attribute.ruleSetValue || coverage.isExcluded\" />\n                </div>\n                <div class=\"slds-is-relative slds-size--1-of-2 slds-p-left--xx-small nds-is-relative nds-size--1-of-2 nds-p-left--xx-small\">\n                    <input type=\"text\" id=\"{{formatId(['datetime-text-input', product.ProductCode, childProductIndex, category.Code__c, attribute.attributeId])}}\" class=\"slds-input nds-input datatype-{{attribute.dataType}}\" ng-model=\"attribute.userValues\" slds-time-picker data-placement=\"bottom-right\" ng-disabled=\"attribute.ruleSetValue || coverage.isExcluded\" />\n                </div>\n            </div>\n        </div>\n        <div class=\"vloc-ins-attribute-component-limit-readonly\" ng-if=\"attribute.readonly\">\n            <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'currency'\">{{attribute.userValues | currency: currencyCode: 0}}</p>\n            <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'percentage'\">{{attribute.userValues}}%</p>\n            <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'date'\">{{formatDate(attribute.userValues)}}</p>\n            <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'datetime'\">{{formatDate(attribute.userValues, true)}}</p>\n            <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType !== 'currency' && attribute.dataType !== 'percentage' && attribute.dataType !== 'date' && attribute.dataType !== 'datetime'\">\n                <span ng-if=\"!attribute.labelAndValue\">{{attribute.userValues}}</span>\n                <span ng-if=\"attribute.labelAndValue\">{{attribute.labelAndValue.valueLabel}}</span>\n            </p>\n        </div>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"// Variables:\n$royal-blue: #0070D2;\n$light-blue-bg: #F8FBFE;\n$text-navy: #00396b;\n$dark-navy: #19355E;\n$attr-label: #16325C;\n$border-color: #d8dde6;\n\n.via-nds {\n    .nds-select{\n        padding-right: 1.75rem;\n    }\n    .vloc-ins-attribute-component-container {\n        min-height: 2.25rem;\n        margin: 0 2rem 0 4.5rem;\n\n        .vloc-ins-attribute-component {\n            position: relative;\n\n            .vloc-ins-attribute-component-name {\n                line-height: 2rem;\n                font-size: 1rem;\n                padding-right: 0.5rem;\n                color: $text-navy;\n            }\n\n            .vloc-ins-attribute-component-messages-message {\n                font-size: 0.75rem;\n                white-space: normal;\n\n                &:first-child {\n                    margin-top: 0;\n                }\n\n                &:last-child {\n                    margin-bottom: 1rem;\n                }\n\n                &.vloc-ins-attribute-component-messages-message-warn {\n                    color: #ffb75d;\n                }\n\n                &.vloc-ins-attribute-component-messages-message-error {\n                    color: #c23934;\n                }\n\n                &.vloc-ins-attribute-component-messages-message-recommendation {\n                    color: #1589ee;\n                }\n            }\n        }\n\n        .vloc-ins-attribute-component-limit {\n            .vloc-ins-coverages-attribute-readonly {\n                line-height: 2rem;\n                color: $text-navy;\n            }\n        }\n\n        .vloc-ins-attribute-component-limit,\n        .vloc-ins-attribute-component-premium {\n            > div:not(.nds-dropdown):not(.nds-form-element) {\n                width: 100%;\n                height: 100%;\n                padding: 0.125rem 0;\n\n                &.nds-picklist {\n                    z-index: 999;\n                }\n\n                &.vloc-ins-attribute-component-limit-multiselect-checkbox {\n                    padding-bottom: 0.5rem;\n                }\n            }\n\n            .nds-dropdown.vloc-ins-attribute-component-dropdown-items:not(.nds-datepicker):not(.nds-timepicker) {\n                height: auto;\n                max-width: 15rem;\n                min-width: 3rem;\n                width: 100%;\n\n                .vloc-ins-attribute-component-dropdown-items-item {\n                    > .vloc-ins-attribute-component-dropdown-items-link {\n                        &.not-checked {\n                            .nds-icon {\n                                opacity: 0;\n                            }\n                        }\n                    }\n\n                    &.ins-rule-set-value {\n                        background-color: #ecebea;\n\n                        > .vloc-ins-attribute-component-dropdown-items-link {\n                            background-color: #ecebea;\n                            cursor: not-allowed;\n\n                            &:hover {\n                                background-color: #ecebea;\n                            }\n\n                            .nds-icon {\n                                fill: #ffffff;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        .vloc-ins-attribute-component-limit-input {\n            .vloc-ins-attribute-component-limit {\n                .nds-form-element {\n                    .nds-form-element__control {\n                        &.nds-picklist__input {\n                            width: auto;\n                        }\n\n                        &.nds-input-has-icon--right {\n                            .nds-button {\n                                right: 0.5rem;\n\n                                .nds-button__icon {\n                                    right: 0;\n                                    fill: $attr-label;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            .nds-form-element__addon {\n                height: 2rem;\n                line-height: 2rem;\n                border: 1px solid #cfd7e6;\n                min-width: 2rem;\n                max-width: 3.5rem;\n                padding: 0 0.25rem;\n                margin: 0;\n                text-align: center;\n                border-right: none;\n                border-top-left-radius: 0.25rem;\n                border-bottom-left-radius: 0.25rem;\n                font-size: .75rem;\n\n                &.vloc-ins-attribute-component-datatype-percentage {\n                    border: 1px solid #cfd7e6;\n                    border-left: none;\n                    border-radius: 0;\n                    border-top-right-radius: 0.25rem;\n                    border-bottom-right-radius: 0.25rem;\n                }\n\n                &.disabled {\n                    background-color: #e0e5ee;\n                    border-color: transparent;\n                }\n            }\n            input[type=text].ng-dirty.ng-valid.ng-not-empty {\n                border-color: #cfd7e6;\n            }\n            .layout-newport {\n                .nds-form-element__addon {\n                    &.nds-form-element__addon {\n                        padding-bottom: 1.9rem;\n                        border-bottom: 1px solid #dddbda;\n                        border-radius: 0;\n                        top: 0;\n                        left: 0;\n                        border: none;\n                        height: calc(2rem - 2px);\n                        line-height: 1.88rem;\n                    }\n\n                    &.vloc-ins-attribute-component-datatype-percentage {\n                        &.nds-form-element__addon {\n                            left: auto;\n                            right: 0;\n                            border: none;\n                        }\n                    }\n                }\n                .nds-input {\n                    padding-left: 2rem;\n                }\n            }\n            .vloc-ins-attribute-component-input-currency {\n                border-top-left-radius: 0;\n                border-bottom-left-radius: 0;\n            }\n            .vloc-ins-attribute-component-input-percentage {\n                border-top-right-radius: 0;\n                border-bottom-right-radius: 0;\n            }\n            input[type=text].ng-dirty.ng-valid.ng-not-empty {\n                border-color: #cfd7e6;\n            }\n        }\n\n        .vloc-ins-attribute-component-limit-range-slider {\n            > div:not(.nds-dropdown) {\n                padding-top: 0.25rem;\n            }\n        }\n    }\n}\n@media screen and (max-width: 600px) {\n    .via-nds{\n        .vloc-ins-attribute-component-container {\n            margin: 0;\n            .vloc-ins-attribute-component {\n                .vloc-ins-attribute-component-name {\n                    font-size: .8rem;\n                }\n            }\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-attribute-component","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-attribute-component/%vlocity_namespace%__VlocityUITemplate__c/ins-os-attribute-component"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-attribute-component","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-attribute-component","VlocityDataPackName":"ins-os-attribute-component","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".vloc-ins-xlsx-import {\n  border: none;\n  color: #fff;\n  background-color: #1663bf;\n  border-radius: 0.1875rem;\n  font-size: 0.875rem;\n  padding: 0.4375rem 0;\n  font-weight: 200;\n  margin: 0 0.75rem 0 1.5625rem;\n  width: 9rem; }\n\n@media screen and (max-width: 60rem) {\n  vloc-ins-xlsx-import {\n    margin: 0.625rem 0 0.625rem 0; } }\n\n.vloc-ins-xlsx-import-label {\n  padding: 0.625rem 1.0625rem;\n  cursor: pointer; }\n\n.vloc-ins-xlsx-import-label:hover {\n  color: #fff; }\n\n.vloc-ins-xlsx-import-label:hover {\n  box-shadow: none; }\n\n.nds-form-element__control-help {\n  margin-bottom: 6.25rem; }\n\n.nds-header__desktop.hideCommonNav {\n  display: none; }\n\n.nds-size_1-of-1.nds-header__desktop.census-navigation {\n  display: block;\n  margin-bottom: -11.25rem;\n  margin-top: 9.375rem;\n  color: #556a8c;\n  font-size: .75rem;\n  font-weight: 300; }\n\n.vloc-ins-census-container {\n  width: 100%; }\n\ntr.vloc-ins-no-border td.vloc-ins-col-data, tr.vloc-ins-no-border td.vloc-ins-col-action {\n  border-top: none; }\n\n.vloc-ins-census-table-fields th, .vloc-ins-census-table-actions th, .vloc-ins-census-table-names th {\n  height: 2.5rem; }\n\n.vloc-ins-census-table-fields td, .vloc-ins-census-table-actions td, .vloc-ins-census-table-names td {\n  height: 3.125rem; }\n\n.vloc-ins-col-action {\n  min-width: 5rem; }\n\n.vloc-ins-census-table-container select.nds-select, .vloc-ins-census-table-container input[type=\"number\"].nds-input {\n  min-width: 6.25rem; }\n\n.vloc-ins-header-summary {\n  text-align: center; }\n\n.vloc-ins-header-summary .vloc-ins-header-summary-count {\n  color: #00396b;\n  font-weight: 500; }\n\n@media screen and (max-width: 60rem) {\n  .vloc-ins-add-dependent button.vloc-ins-btn-add {\n    margin-bottom: 0.625rem; } }\n\n.vloc-ins-hide-element {\n  display: none; }\n\n.vloc-ins-control-bar {\n  margin: 1.5rem 0; }\n\n.vloc-ins-control-bar .nds-grid_align-end .nds-col {\n  margin: 0.3125rem; }\n\n.nds-size_1-of-1.nds-header__mobile-only.vloc-ins-census-navigation {\n  display: block; }\n\n.nds-size_1-of-1.nds-header__desktop.vloc-ins-census-navigation {\n  display: block;\n  margin-bottom: -11.25rem;\n  margin-top: 9.375rem;\n  color: #556a8c;\n  font-size: .75rem;\n  font-weight: 300; }\n\n.vloc-ins-omni .vloc-modal-input-upload {\n  position: relative;\n  right: -2rem;\n  padding-bottom: 1rem; }\n\n.vloc-ins-omni .vloc-ins-nds-underline--gradient {\n  border-bottom: none; }\n\n.vloc-ins-omni .vloc-ins-nds-underline--gradient {\n  border-bottom: .05rem solid #cfd7e6;\n  min-height: 2.2rem;\n  background: linear-gradient(141deg, #05a6df, #1fc8db 51%, #50e3c2 75%);\n  font-size: 1.5rem; }\n\n.vloc-ins-omni .vloc-ins-nds-page_header {\n  font-size: 1.5rem;\n  min-height: 2rem;\n  height: 2rem;\n  padding: 0;\n  background: #fff;\n  color: #00396b;\n  border-radius: 0;\n  font-weight: 300;\n  border: none;\n  box-shadow: none;\n  text-align: left;\n  left: 0;\n  max-width: 100%;\n  line-height: 1; }\n\n.vloc-ins-omni div.vloc-control-wrapper {\n  position: relative; }\n\n.vloc-ins-omni .vloc-ins-nds__border.vlc-slds__border--primary {\n  border-color: #cfd7e6; }\n\n.vloc-ins-omni .vloc-control-wrapper {\n  min-height: 3rem;\n  font-size: 1rem;\n  color: #00396b; }\n\n.vloc-ins-omni .vloc-control-wrapper {\n  min-height: 3rem;\n  height: 3rem; }\n\n.vloc-ins-omni .vloc-ins-nds__border {\n  border-radius: 0.1875rem;\n  border: 0.0625rem solid #d8dde6; }\n\n.vloc-ins-omni .vloc-ins-nds-inline-control__label {\n  position: relative;\n  font-size: .9rem;\n  font-weight: 500;\n  color: #00396b;\n  padding-left: 0.475rem; }\n\n.vloc-ins-file-header-mapping-modal {\n  height: 40rem; }\n\n.vloc-ins-pagination {\n  display: flex; }\n  .vloc-ins-pagination li {\n    margin-left: .25rem; }\n  .vloc-ins-pagination .active {\n    text-decoration: underline; }\n  .vloc-ins-pagination .vloc-ins-nav {\n    width: 1rem; }\n  .vloc-ins-pagination .vloc-ins-active {\n    text-decoration: underline;\n    font-weight: 500; }\n  .vloc-ins-pagination .nds-button[disabled] {\n    color: #1663bf; }\n\n.nds-line-height_reset th {\n  text-transform: uppercase; }\n\n.via-nds .nds-datepicker {\n  position: fixed;\n  min-width: 21.125rem; }\n\n.vloc-ins-census-container .vloc-ins-notify-container .vloc-ins-toast-action {\n  color: white;\n  text-decoration: underline; }\n\n.vloc-ins-field-date {\n  min-width: 5.75rem; }\n\n.vloc-ins-field-text {\n  min-width: 7.5rem; }\n\n.vloc-ins-col-data div.vloc-ins-err-tooltip {\n  position: absolute;\n  bottom: 3.825rem;\n  left: 0; }\n  .vloc-ins-col-data div.vloc-ins-err-tooltip div.vloc-ins-err-details.nds-popover__body {\n    white-space: normal;\n    width: 20rem; }\n","%vlocity_namespace%__CustomJavascript__c":"vlocity.cardframework.registerModule.directive('insFileUploadHandler', function() {\n    return {\n        restrict: 'E',\n        template: '<span class=\"\"><input id=\"{{inputId}}\" name=\"{{inputId}}\" class=\"vloc-ins-xlsx-import__input\" ng-class=\"inputClass\" type=\"file\" accept=\".csv, .xlsx\"/><label for=\"{{inputId}}\" class=\"vloc-ins-xlsx-import__label\" ng-class=\"labelClass\">{{labelText}}</label></span>',\n        replace: true,\n        scope: {\n            onRead: '&',\n            onError: '&',\n            control: '=',\n            validation: '&',\n            inputId: '@',\n            labelText: '@',\n            wrapperClass: '@',\n            inputClass: '@',\n            labelClass: '@'\n        },\n        link: function (scope, element) {\n            const input = element.find('input');\n            function handleSelect() {\n                let files = this.files;\n                for (let i = 0, f = files[i]; i < files.length; ++i) {\n                    let reader = new FileReader();\n                    let data;\n                    reader.onload = function (e) {\n                        data = !e ? reader.content : e.target.result;\n\n                        /* if binary string, read with type 'binary' */\n                        try {\n                            let workbook = XLSX.read(data, { type: 'binary', cellDates:true });\n\n                            if (scope.onRead && typeof scope.onRead === 'function') {\n                                    scope.onRead({ $event: { workbook: workbook } }, scope.control);\n                            }\n                        } catch(err) {\n                            if (scope.onError) {\n                                if (typeof scope.onError === 'function') {\n                                    scope.onError({ $event : {error: err } });\n                                } else {\n                                    console.warn('Unhandled error reading file.', err);\n                                }\n                            }\n                        }\n\n                        input.val('');\n                    };\n\n                    //extend FileReader\n                    if (!FileReader.prototype.readAsBinaryString) {\n                        FileReader.prototype.readAsBinaryString = function (fileData) {\n                            let binary = '';\n                            let pt = this;\n                            let reader = new FileReader();\n                            reader.onload = function () {\n                                let bytes = new Uint8Array(reader.result);\n                                let length = bytes.byteLength;\n                                for (let i = 0; i < length; i++) {\n                                    binary += String.fromCharCode(bytes[i]);\n                                }\n                                //pt.result  - readonly so assign binary\n                                pt.content = binary;\n                                $(pt).trigger('onload');\n                            };\n                            reader.readAsArrayBuffer(fileData);\n                        };\n                    }\n\n                    reader.readAsBinaryString(f);\n\n                }\n            }\n\n            input.on('change', handleSelect);\n        }\n    };\n});\n\nvlocity.cardframework.registerModule.service('censusService', ['censusGateway', '$q', 'InsUtils', function(censusGateway, $q, InsUtils) {\n    const self = this;\n    self.censusDetails = [];\n    self.mapIdToPlan = {};\n    self.fieldSet = {};\n    self.nsPrefix = baseCtrl.prototype.$scope.nsPrefix;\n\n    function createParamForCRUDCensusService(members) {\n        const headers = [\n            {\n                'name': self.nsPrefix + 'PrimaryMemberIdentifier__c'\n            },\n            {\n                'name': self.nsPrefix + 'MemberIdentifier__c'\n            },\n            {\n                'name': self.nsPrefix + 'IsPrimaryMember__c'\n            },\n            {\n                'name': self.nsPrefix + 'IsSpouse__c'\n            },\n            {\n                'name': self.nsPrefix + 'RelatedCensusMemberId__c'\n            }\n        ];\n\n        if(self.fieldSet.headers && self.fieldSet.headers.length > 0) {\n            self.fieldSet.headers.forEach(function(header) {\n                headers.push(header);\n            });\n        }\n\n        return {\n            headers: headers,\n            members: members\n        };\n\n    }\n\n    /**\n     * Maps the csv row data to the mapping set in the modal\n     *\n     * @param headers record field info with mapping information. must contain field.csvHeader and field.name\n     * @param csvRow a row in the csv in json format {column header: cell value}\n     */\n    function mapFieldsInSet(headers, csvRow) {\n        const member = {};\n        const selectedHeaderIds = InsUtils.toJSONValues(headers);\n        const hasPlanMapping = selectedHeaderIds.indexOf(self.nsPrefix + 'ContractLineId__c') > -1;\n        const planLookUp = self.mapTypeToPlans;\n        for(let key in headers) {\n            if(hasPlanMapping && headers[key] === self.nsPrefix + 'ContractLineId__c') {\n\n                if(!member[headers[key]]) {\n                    member[headers[key]] = '';\n                }\n\n                if(!csvRow[key]) {\n                    continue;\n                }\n\n                const plan = !planLookUp[key] || !planLookUp[key][csvRow[key]] ? (key + ' - ' + csvRow[key]) :\n                    planLookUp[key][csvRow[key]];\n                member[headers[key]] += (member[headers[key]] ? ';' : '') +  plan ;\n            } else {\n                member[headers[key]] = csvRow[key];\n            }\n        }\n\n        if(csvRow.hasOwnProperty('Relationship')){\n            member.Relationship = csvRow.Relationship;\n        }\n        return member;\n    }\n\n    function isRelationshipNotSpecified(csvRow, member) {\n        return !csvRow.hasOwnProperty('Relationship') &&\n            !member.hasOwnProperty(self.nsPrefix + 'IsPrimaryMember__c') &&\n            !member.hasOwnProperty(self.nsPrefix + 'IsSpouse__c');\n    }\n\n    /**\n     * Converts the result of XLSX parsing to census JSON\n     * @param {} csvData\n     */\n    function csvDataToCensus(headers, csvData) {\n        let empUniqueId;\n        let members = csvData.map(function(csvRow, index) {\n            let member = mapFieldsInSet(headers, csvRow);\n            const uniqueId = Math.floor(Math.random() * new Date().valueOf()).toString();\n\n            /**\n             * Handler if Relationship and IsPrimaryMember__c is not provided\n             */\n            if(isRelationshipNotSpecified(csvRow, member) || member[self.nsPrefix + 'IsPrimaryMember__c']){\n                member.Relationship = 'Employee';\n                member[self.nsPrefix + 'IsPrimaryMember__c'] = true;\n            }\n\n            if(member.Relationship === 'Employee') {\n                empUniqueId = uniqueId;\n            }\n            member[self.nsPrefix + 'IsPrimaryMember__c'] = member[self.nsPrefix + 'IsPrimaryMember__c'] || member.Relationship === 'Employee';\n            if(!member[self.nsPrefix + 'PrimaryMemberIdentifier__c']) {\n                member[self.nsPrefix + 'PrimaryMemberIdentifier__c'] = !member[self.nsPrefix + 'IsPrimaryMember__c'] ? empUniqueId : '';\n            }\n            if(!member[self.nsPrefix + 'MemberIdentifier__c']) {\n                member[self.nsPrefix + 'MemberIdentifier__c'] = member[self.nsPrefix + 'IsPrimaryMember__c'] ? empUniqueId : uniqueId;\n            }\n            member[self.nsPrefix + 'IsSpouse__c'] = member[self.nsPrefix + 'IsSpouse__c'] || member.Relationship === 'Spouse';\n            member.index = index;\n            return member;\n        });\n        return $q.resolve(members);\n    }\n\n    function sortCensusRecord(census, censusData) {\n        if (census[this.nsPrefix + 'IsPrimaryMember__c']) {\n            censusData.splice(0, 0, census);\n        } else if (census[this.nsPrefix + 'IsSpouse__c']) {\n            if (censusData.length && censusData[0][this.nsPrefix + 'IsPrimaryMember__c']) {\n                censusData.splice(1, 0, census);\n            } else if (censusData.length) {\n                censusData.splice(0, 0, census);\n            } else {\n                censusData = censusData.concat(census);\n            }\n\n        } else {\n            censusData = censusData.concat(census);\n        }\n\n        return censusData;\n    }\n\n    function getProductEnrollmentField(headers) {\n        let fieldDescription;\n        for(let i = 0 ; i < headers.length ; i ++) {\n            if(headers[i].name === self.nsPrefix + 'ContractLineId__c') {\n                fieldDescription = headers[i];\n                break;\n            }\n        }\n        return fieldDescription;\n    }\n\n    function generateProductLookUps(headers) {\n        const fieldDescription = getProductEnrollmentField(headers);\n        const mapTypeToPlans = {};\n        const mapIdToPlan = {};\n        if(!fieldDescription || !fieldDescription.options) {\n            return;\n        }\n\n        fieldDescription.options.forEach(function(product) {\n            if(!mapTypeToPlans[product.type]) {\n                mapTypeToPlans[product.type] = {};\n            }\n\n            mapIdToPlan[product.value] = product;\n            mapTypeToPlans[product.type][product.name] = product.value;\n\n        });\n\n        return {\n            typeToPlans: mapTypeToPlans,\n            idToPlan: mapIdToPlan\n        };\n\n    }\n\n    function setProductLookups(headers) {\n        const lookups = generateProductLookUps(headers);\n        if(!lookups){\n            return;\n        }\n        self.mapTypeToPlans = lookups.typeToPlans;\n        self.mapIdToPlan = lookups.idToPlan;\n    }\n\n    function setFields(fieldsetHeaders) {\n        self.fieldSet = {\n            headers: fieldsetHeaders\n        };\n        setProductLookups(fieldsetHeaders);\n    }\n\n    function updateMembers(opts) {\n        if(opts.censusDetails.length > 0) {\n            opts['census'] = createParamForCRUDCensusService(opts.censusDetails);\n            return censusGateway.updateMembers(opts);\n        }\n        return $q.resolve({});\n    }\n\n    function deleteMembers(opts) {\n        opts['census'] = createParamForCRUDCensusService(opts.censusDetails);\n        return censusGateway.deleteMembers(opts);\n    }\n\n    function getFieldSetHeaders() {\n        return self.fieldSet.headers;\n    }\n\n    function getMembers (opts) {\n        return censusGateway.getMembers(opts)\n            .then(function(result) {\n                const deferred = $q.defer();\n                if(result.errors && result.errors.length > 0) {\n                    deferred.reject(result.errors);\n                } else {\n                    setFields(result.census.headers);\n                    result = result.census.members || [];\n                    const censusGroup = _.groupBy(result, function(censusDetail) {\n                        return censusDetail[self.nsPrefix + 'RelatedCensusMemberId__c'] ||  censusDetail.Id;\n                    });\n                    let censusDetails = [];\n                    Object.keys(censusGroup).forEach(function(key) {\n                        let censusData = [];\n                        censusGroup[key].forEach(function(census) {\n                            census.isEdited = false;\n                            censusData = sortCensusRecord(census, censusData);\n                        });\n                        censusDetails = censusDetails.concat(censusData);\n                    });\n                    deferred.resolve(censusDetails);\n                }\n                return deferred.promise;\n            });\n    }\n\n    function getMapIdToPlan() {\n        return self.mapIdToPlan;\n    }\n\n    function getMapTypeToPlans() {\n        return self.mapTypeToPlans;\n    }\n\n    function getCustomLabels(opts) {\n        return censusGateway.getCustomLabels(opts);\n    }\n\n    return {\n        getMembers: getMembers,\n        deleteMembers: deleteMembers,\n        updateMembers: updateMembers,\n        censusDetails: this.censusDetails,\n        csvDataToCensus: csvDataToCensus,\n        getFieldSetHeaders: getFieldSetHeaders,\n        getMapIdToPlan: getMapIdToPlan,\n        getMapTypeToPlans: getMapTypeToPlans,\n        getCustomLabels: getCustomLabels,\n        getProductEnrollmentField: getProductEnrollmentField\n\n    };\n}]);\n\n\n/**\n * Service to perform apex calls to Census Service\n */\nvlocity.cardframework.registerModule.service('censusGateway', function($q) {\n    const OperationType = {\n        DELETE: 'DELETE',\n        UPSERT: 'UPSERT'\n    };\n    const OperationPrefix = {\n        GET: 'get',\n        DELETE: 'delete',\n        UPSERT: 'update'\n    };\n    const OperationTypes = [OperationType.DELETE, OperationType.UPSERT];\n    // Calls OmniScript buttonClick function, will perform remote action (and optional preProcess method) defined on the Selectable Item\n    // that houses this template\n    /**\n     * @param {Object} control Element control\n     * @param {Object} scp Element scope\n     * @param {Object|undefined} selectedItem In Selectable Items El case, the item selected by the user where they trigger the remote call\n     * @param {String} operation The operation of the remote call ('Delete', 'Add', etc.)\n     * @param {Function|undefined} customizer The customized function to be called once the remote call promise comes back\n     */\n    function remoteInvoke(control, scp) {\n        const deferred = $q.defer();\n        scp.buttonClick(scp.bpTreeResponse, control, scp, undefined, 'typeAheadSearch', undefined, function(remoteResp) {\n            deferred.resolve(remoteResp);\n        });\n        return deferred.promise;\n    }\n\n    function getMethod(methodName,operation) {\n        if(!operation || methodName.indexOf(OperationPrefix.GET) !== 0) return methodName;\n        let newPrefix = '';\n        if(operation === OperationType.DELETE) {\n            newPrefix = OperationPrefix.DELETE;\n        } else if(operation === OperationType.UPSERT) {\n            newPrefix = OperationPrefix.UPSERT;\n        }\n\n        return methodName.replace(new RegExp('^' + OperationPrefix.GET), newPrefix);\n    }\n\n    function apexRequest(opts) {\n        let operation = opts.operation;\n        let control = opts.control;\n        let scope = opts.scope;\n        let configRemoteMethod = control.propSetMap.remoteMethod;\n        const configRemoteClass = control.propSetMap.remoteClass;\n        let remoteClass = '';\n\n        if(OperationTypes.indexOf(operation) != -1) {\n            control.propSetMap.remoteMethod = getMethod(control.propSetMap.remoteMethod, operation);\n            scope.bpTree.response.census = opts.census;\n        }\n        else if(opts.remoteClass){\n            control.propSetMap.remoteClass = opts.remoteClass;\n            control.propSetMap.remoteMethod = opts.remoteMethod;\n        }\n\n        return remoteInvoke(opts.control, opts.scope)\n            .then(function(response) {\n                if(remoteClass) {\n                    control.propSetMap.remoteClass = remoteClass;\n                }\n                scope.bpTree.response.census = null;\n                control.propSetMap.remoteMethod = configRemoteMethod;\n                control.propSetMap.remoteClass = configRemoteClass;\n                return $q.resolve(response);\n            });\n    }\n\n    function getMembers(opts) {\n        return apexRequest(opts);\n    }\n\n    function deleteMembers(opts) {\n        opts.operation = OperationType.DELETE;\n        return apexRequest(opts);\n    }\n\n    function updateMembers(opts) {\n        opts.operation = OperationType.UPSERT;\n        return apexRequest(opts);\n    }\n\n    function getCustomLabels (opts) {\n        opts.remoteClass = 'DefaultUserCustomLabelsImplementation';\n        opts.remoteMethod = 'getUserCustomLabels';\n        return apexRequest(opts);\n    }\n\n    return {\n        getMembers: getMembers,\n        deleteMembers: deleteMembers,\n        updateMembers: updateMembers,\n        getCustomLabels: getCustomLabels\n    };\n});\n\nvlocity.cardframework.registerModule.controller('InsCensusController', ['$scope', '$rootScope', 'censusService', 'InsCensusModal', '$q', 'InsValidationHandlerService',\nfunction($scope, $rootScope, censusService, InsCensusModal, $q, InsValidationHandlerService){\n    'use strict';\n\n    const CENSUS_TEMPLATE_NAME = 'insOsFlowCensusTemplate';\n    const RELATIONSHIP_KEY = 'Relationship';\n    const RELATIONSHIPS = ['Employee', 'Spouse', 'Child'];\n    const DEFAULT_UPLOAD_LIMIT = 2000;\n    $scope.bpTree.response.validCensus = true;\n    $scope.usePagination = true;\n    $scope.isValidCensus = true;\n    $scope.resources = {};\n    $scope.censusInfo = {\n        EmpCount: 0,\n        EmpFaCount: 0,\n        EmpChCount: 0,\n        EmpSpCount: 0,\n        total: 0\n    };\n    $scope.search = {\n        keyword: ''\n    };\n    $scope.DEFAULT_LABELS = ['InsOSCensusEmployeeTotalCount', 'InsOSCensusEmployeeOnlyCount', 'InsOSCensusEmployeeWithSpouseCount', 'InsButtonCancel', 'Save',\n        'InsOSCensusEmployeeWithChildCount', 'InsOSCensusEmployeeWithFamilyCount', 'InsOSCensusSearchName', 'InsOSCensusDownloadTemplate', 'InsOSCensusUploadMembers',\n        'InsOSCensusAddEmployee', 'InsOSCensusDeleteAllData', 'InsOSCensusIdentifyFileMappings', 'InsOSCensusRecords', 'Select',\n        'InsOSCensusRelationship', 'InsOSCensusRelationshipEmployee', 'InsOSCensusRelationshipSpouse', 'InsOSCensusRelationshipChild', 'InsOSCensusErrorUploadSummaryLink',\n        'InsOSCensusErrorNoRowInFile', 'InsOSCensusErrorExceedRowCount', 'InsOSCensusErrorInvalidValueForRelationship', 'InsOSCensusErrorMissingParameter',\n        'InsOSCensusErrorInvalidValueOnUpload', 'InsOSCensusErrorEncounteredOnUpload', 'InsOSCensusOverwriteConfirmation', 'InsOSCensusDeleteMember', 'InsCensusTotalEmployees'];\n\n    function onSuccess(response) {\n        try {\n            censusService.censusDetails = syncMembersToResponse(censusService.censusDetails, response);\n            $scope.filteredCensus = censusService.censusDetails.slice();\n            $scope.headers = censusService.getFieldSetHeaders();\n            formatAllDateFields(censusService.censusDetails, true);\n            calculateCensusCount();\n        }\n        catch(e) {\n            console.error(e);\n        }\n\n    }\n\n    function createLookupIdToMember(members) {\n        return members\n            .reduce(function(map, member) {\n                if(member.isNew || !member.isUpdated) {\n                    map[member.Id] = member;\n                }\n                return map;\n            }, {});\n    }\n\n    function syncMembersToResponse(currentMembers, response) {\n        const lookupIdToMember = createLookupIdToMember(currentMembers);\n        const newMembers = [];\n        let members = [];\n        response.forEach(function(member) {\n            member = lookupIdToMember[member.Id] || member;\n            if(member.isNew ) {\n                newMembers.push(member);\n            } else {\n                members.push(member);\n            }\n        });\n        return newMembers.concat(members);\n    }\n\n    function checkIfTextExists(value, keyword) {\n        return value !== null && value !== undefined && value.toLowerCase().indexOf(keyword.toLowerCase()) !== -1;\n    }\n\n    function validateCensus(type, data) {\n        if(type !== 'spouseCount') return ;\n\n        const spouseCount = data.filter(function(member) {\n            return member[$scope.nsPrefix + 'IsSpouse__c'] && !member[$scope.nsPrefix + 'IsPrimaryMember__c'];\n        }).length;\n\n        if(spouseCount > 1) {\n            $scope.bpTree.response.validCensus = false;\n        }\n    }\n\n    function calculateCensusCount() {\n        const censusGroup = _.groupBy(censusService.censusDetails, function(censusDetail) {\n            return censusDetail[$scope.nsPrefix + 'RelatedCensusMemberId__c'] || censusDetail.Id;\n        });\n\n        $scope.censusInfo = {\n            EmpCount: 0,\n            EmpFaCount: 0,\n            EmpChCount: 0,\n            EmpSpCount: 0,\n            total: 0\n        };\n\n        $scope.bpTree.response.validCensus = true;\n\n        Object.keys(censusGroup).forEach(function(key) {\n            let hasEmployee;\n            let hasSpouse;\n            let hasChild;\n            censusGroup[key].forEach(function(census) {\n                if (census[$scope.nsPrefix + 'IsPrimaryMember__c']) {\n                    hasEmployee = true;\n                } else if(census[$scope.nsPrefix + 'IsSpouse__c']) {\n                    hasSpouse = true;\n                } else if(census[$scope.nsPrefix + 'IsSpouse__c'] !== undefined) {\n                    hasChild = true;\n                }\n            });\n\n            if (hasEmployee && hasSpouse && hasChild) {\n                $scope.censusInfo.EmpFaCount += 1;\n            } else if (hasEmployee && hasSpouse && !hasChild) {\n                $scope.censusInfo.EmpSpCount += 1;\n            } else if (hasEmployee && !hasSpouse && hasChild) {\n                $scope.censusInfo.EmpChCount += 1;\n            } else if (hasEmployee && !hasSpouse && !hasChild) {\n                $scope.censusInfo.EmpCount += 1;\n            }\n\n            validateCensus('spouseCount', censusGroup[key]);\n        });\n\n        $scope.censusInfo.total = $scope.censusInfo.EmpFaCount +\n                                  $scope.censusInfo.EmpSpCount +\n                                  $scope.censusInfo.EmpChCount +\n                                  $scope.censusInfo.EmpCount;\n\n        $scope.censusAgeErrorMsg = '';\n        $scope.errorDOBList = [];\n    }\n\n    function getIndexToAddDependent(censusDetails, employee) {\n        let index;\n        let selectedEmp = false;\n\n        censusDetails.forEach(function(censusDetail, censusIndex) {\n            if (censusDetail[$scope.nsPrefix + 'MemberIdentifier__c'] === employee[$scope.nsPrefix + 'MemberIdentifier__c']) {\n                selectedEmp = true;\n                index = censusIndex;\n            }\n            if (selectedEmp && censusDetail[$scope.nsPrefix + 'PrimaryMemberIdentifier__c'] === employee[$scope.nsPrefix + 'MemberIdentifier__c']) {\n                index = censusIndex;\n            }\n        });\n\n        return index;\n    }\n\n    function getCensus(censusDetails, censusMember, isEmployee) {\n        const removedCensusData = [];\n        const updatedCensusData =  _.reject(censusDetails, function(censusDetail) {\n            if (isEmployee && (censusDetail[$scope.nsPrefix + 'RelatedCensusMemberId__c'] === censusMember.Id || censusDetail.Id === censusMember.Id)) {\n                removedCensusData.push(censusDetail);\n            } else if(!isEmployee && (censusDetail.Id === censusMember.Id || !censusMember.Id)) {\n                removedCensusData.push(censusDetail);\n            }\n\n            if(censusDetail.isNew) {\n                return isEmployee ?\n                    censusDetail[$scope.nsPrefix + 'PrimaryMemberIdentifier__c'] === censusMember[$scope.nsPrefix + 'MemberIdentifier__c'] || censusDetail[$scope.nsPrefix + 'MemberIdentifier__c'] === censusMember[$scope.nsPrefix + 'MemberIdentifier__c'] :\n                    censusDetail[$scope.nsPrefix + 'MemberIdentifier__c'] === censusMember[$scope.nsPrefix + 'MemberIdentifier__c'];\n\n            } else {\n                return isEmployee ?\n                    (censusDetail[$scope.nsPrefix + 'RelatedCensusMemberId__c'] === censusMember.Id || censusDetail.Id === censusMember.Id) :\n                    censusDetail.Id === censusMember.Id;\n            }\n\n        });\n\n        return {\n            updatedCensusData,\n            removedCensusData\n        };\n    }\n\n    function filterEditedCensus(censusDetails) {\n        return censusDetails.filter(function(censusDetail, index){\n            censusDetail.index = index;\n            return censusDetail.isEdited || censusDetail.isNew;\n        });\n    }\n\n    function groupCensus(members) {\n        return _.groupBy(members, function(censusDetail) {\n            return censusDetail[$scope.nsPrefix + 'PrimaryMemberIdentifier__c'] ||  censusDetail[$scope.nsPrefix + 'MemberIdentifier__c'];\n        });\n    }\n\n    function partialReload(response, ids) {\n        const idToMemberMap = {};\n        response.forEach(function(member) {\n            if(ids.indexOf(member.Id) > -1) {\n                idToMemberMap[member.Id] = member;\n            }\n        });\n        censusService.censusDetails = censusService.censusDetails.map(function(member) {\n            return idToMemberMap[member.Id] || member;\n        });\n    }\n\n    function fullReload(response, membersWithError) {\n        membersWithError = membersWithError || [];\n        const newPrimaryWithError = [];\n        const newDependentWithError = [];\n        const idToMemberWithError = {};\n\n        membersWithError.forEach(function(member) {\n            member.error = formatErrorMessage(member.error, $scope.nameToLabelMap);\n            if(!member.Id && member[$scope.nsPrefix + 'PrimaryMemberIdentifier__c']) {\n                newDependentWithError.push(member);\n            } else if(!member.Id && member[$scope.nsPrefix + 'MemberIdentifier__c']){\n                newPrimaryWithError.push(member);\n            } else {\n                idToMemberWithError[member.Id] = member;\n            }\n        });\n        const censusGroup = groupCensus(newPrimaryWithError.concat(response).concat(newDependentWithError));\n        let newCensusDetails = [];\n        for(let key in censusGroup) {\n            newCensusDetails = newCensusDetails.concat(censusGroup[key]);\n        }\n        censusService.censusDetails = newCensusDetails.map(function(member){\n            return idToMemberWithError[member.Id] || member;\n        });\n    }\n\n    function reloadData(control, opts) {\n        opts = opts || {};\n        const errors = opts.errors || [];\n        return censusService.getMembers({control: control, scope: $scope})\n            .then(function(response) {\n                if(opts.ids) {\n                    partialReload(response, opts.ids);\n                }\n                else {\n                    fullReload(response, errors);\n                }\n                formatAllDateFields(censusService.censusDetails, true);\n                reload();\n            });\n    }\n\n    $scope.upsertTableData = function(control) {\n        const censusDetails = filterEditedCensus(censusService.censusDetails);\n        let errors;\n        formatAllDateFields(censusDetails);\n        return censusService\n            .updateMembers({control: control, scope: $scope, censusDetails: censusDetails})\n            .then(function(response) {\n                errors = response.errors || [];\n                return reloadData(control, {errors: errors});\n            });\n    };\n\n    function deleteCensus(control, censusMember, isEmployee){\n        const membersList = getCensus(censusService.censusDetails, censusMember, isEmployee);\n        if(censusMember.Id) {\n            censusService\n                .deleteMembers({control: control, scope: $scope, censusDetails: membersList.removedCensusData})\n                .then(function() {\n                    let ids = [];\n                    if(!isEmployee) {\n                        ids.push(censusMember[$scope.nsPrefix + 'RelatedCensusMemberId__c']);\n                    }\n                    censusService.censusDetails = membersList.updatedCensusData;\n                    return reloadData(control, {ids: ids});\n                });\n        } else {\n            censusService.censusDetails = membersList.updatedCensusData;\n            reload(censusMember.index);\n        }\n    }\n\n    function hasUnsavedChangesForMember(memberId) {\n        if(!memberId) {\n            return false;\n        }\n\n        return censusService.censusDetails.some(function(member) {\n            return member.isEdited && member.Id === memberId;\n        });\n    }\n\n    $scope.deleteCensus = function(control, censusMember, isEmployee) {\n        if(censusMember.Id && hasUnsavedChangesForMember(censusMember[$scope.nsPrefix + 'RelatedCensusMemberId__c'])) {\n            InsCensusModal.launchConfirmationModal($scope, $scope.customLabels.InsOSCensusDeleteMember,\n                $scope.customLabels.InsOSCensusOverwriteConfirmation,\n                function() {\n                    deleteCensus(control, censusMember, isEmployee);\n                });\n         }\n        else {\n            deleteCensus(control, censusMember, isEmployee);\n        }\n\n    };\n\n    function formatAllDateFields(censusDetails, toUTC) {\n        const dateFields = $scope.headers.filter(function(header) {\n            return header.type === 'DATE' || header.type === 'DATETIME';\n        });\n        if(dateFields.length === 0) {\n            return;\n        }\n        censusDetails.forEach(function(member) {\n            dateFields.forEach(function(dateField)  {\n                member[dateField.name] = formatDate(member[dateField.name], toUTC);\n            });\n        });\n    }\n\n    function formatDate(date, toUTC) {\n        const userLocale = $rootScope.vlocity.userAnLocale;\n        if(isNaN(Date.parse(date)) || (!isNaN(date) && !(date instanceof Date))) {\n            return date;\n        }\n        const d = new Date(date);\n        let formattedDate;\n        if (userLocale) {\n            formattedDate = d.toLocaleDateString(userLocale);\n        } else {\n            formattedDate = toUTC ? (d.getUTCMonth() + 1) + '/' + d.getUTCDate() + '/' + d.getUTCFullYear() :\n                 (d.getMonth() + 1) + '/' + d.getDate() + '/' + d.getFullYear();\n        }\n        return formattedDate;\n    }\n\n    $scope.updateCensusMember = function(censusMember, shouldUpdateCount){\n        censusService.censusDetails.some(function(censusDetail) {\n            if(censusDetail.Id === censusMember.Id) {\n                censusMember.isEdited = true;\n                return true;\n            }\n        });\n\n        if (shouldUpdateCount) {\n            calculateCensusCount();\n        }\n    };\n\n    function reload(index) {\n        filterEmployees($scope.search.keyword);\n        calculateCensusCount();\n        if(index != null) {\n            navigateToPageOfIndex(index);\n        } else {\n            navigateToPage($scope.currentPage - 1);\n        }\n    }\n\n    function initMember(primaryMemberId) {\n        const member = {};\n        const isDependent = !!primaryMemberId;\n        let headers = $scope.headers;\n\n        headers.forEach(function(header) {\n            member[header.name] = '';\n        });\n\n        member[$scope.nsPrefix + 'IsPrimaryMember__c'] = !isDependent;\n        member[$scope.nsPrefix + 'PrimaryMemberIdentifier__c'] = primaryMemberId;\n        member[$scope.nsPrefix + 'MemberIdentifier__c'] = Math.floor(Math.random() * new Date().valueOf()).toString();\n        member.isNew = true;\n\n        return member;\n    }\n\n    $scope.addNewMember = function(employee) {\n        const isDependent = !!employee;\n        employee = employee || {};\n        const member = initMember(employee[$scope.nsPrefix + 'MemberIdentifier__c']);\n        const censusDetail = member;\n        let index = 0;\n        if (isDependent) {\n            index = getIndexToAddDependent(censusService.censusDetails, employee);\n            censusService.censusDetails.splice(index + 1, 0, censusDetail);\n        } else {\n            censusService.censusDetails = [censusDetail].concat(censusService.censusDetails);\n        }\n        reload(index);\n    };\n\n    function validateHasValidRows(csvData) {\n        if(!csvData.length) {\n            InsValidationHandlerService.throwError({\n                message: $scope.customLabels.InsOSCensusErrorNoRowInFile\n            });\n            return false;\n        }\n        let uploadLimit = DEFAULT_UPLOAD_LIMIT;\n        if($scope.bpTree.response.censusMemberUploadLimit && !isNaN($scope.bpTree.response.censusMemberUploadLimit)) {\n            uploadLimit = parseInt($scope.bpTree.response.censusMemberUploadLimit);\n        }\n        if(csvData.length > uploadLimit){\n            InsValidationHandlerService.throwError({\n                message: $scope.customLabels.InsOSCensusErrorExceedRowCount.replace('{0}', uploadLimit)\n            });\n            return false;\n        }\n        return true;\n    }\n\n    function getRelationshipIndex(csvData) {\n        let csvColumnHeaders = Object.keys(csvData[0]);\n        return csvColumnHeaders.indexOf(RELATIONSHIP_KEY);\n    }\n\n    function getCsvColumnHeaders(csvData) {\n        const csvColumnHeaders = Object.keys(csvData[0]);\n        const relationshipHeaderIdx = getRelationshipIndex(csvData);\n        if(relationshipHeaderIdx > -1) {\n            csvColumnHeaders.splice(relationshipHeaderIdx, 1);\n        }\n        return csvColumnHeaders;\n    }\n\n    function validateRelationshipKeys(csvData) {\n        if(getRelationshipIndex(csvData) === -1){\n            return true;\n        }\n        const errors = csvData.filter(function(row) {\n            if(RELATIONSHIPS.indexOf(row[RELATIONSHIP_KEY]) === -1) {\n                row['Error'] = $scope.customLabels.InsOSCensusErrorInvalidValueForRelationship.replace('{0}', row[RELATIONSHIP_KEY]);\n                return true;\n            }\n        });\n        if(errors.length > 0) {\n            handleUploadError(generateCSVToJSONErrorMessage(csvData.length, errors.length), csvData, errors, []);\n            return false;\n        }\n        return true;\n    }\n\n    function hasUnsavedChanges() {\n        return censusService.censusDetails.some(function(member) {\n            return member.isEdited || member.isNew;\n        });\n    }\n\n    function openFileMapperModal(control, csvData) {\n        const cardFieldMap = {};\n        const csvColumnHeaders = getCsvColumnHeaders(csvData);\n        $scope.headers.forEach(function(header){\n            if(csvColumnHeaders.indexOf(header.label) !== -1) {\n                cardFieldMap[header.label] = header.name;\n            }\n        });\n\n        const records = {\n            data: csvData,\n            csvColumnHeaders: csvColumnHeaders,\n            cardFieldMap: cardFieldMap,\n            uploadInfo: {\n                status: 'success',\n                csvDataCount: csvData.length\n            }\n        };\n\n        InsCensusModal.launchFileMapperModal($scope, records,\n            control, 'vloc-ins-editable-table', 'true', $scope.customLabels.InsOSCensusUploadMembers);\n    }\n\n    $scope.uploadCensus = function($event, control) {\n        const csvData = XLSX.utils.sheet_to_json($event.workbook.Sheets[$event.workbook.SheetNames[0]], { defval: ''});\n\n        if(!validateHasValidRows(csvData)) {\n            return;\n        }\n        if(!validateRelationshipKeys(csvData)) {\n            return;\n        }\n        if(hasUnsavedChanges()) {\n            InsCensusModal.launchConfirmationModal($scope, $scope.customLabels.InsOSCensusUploadMembers,\n                $scope.customLabels.InsOSCensusOverwriteConfirmation,\n                function() {\n                    openFileMapperModal(control, csvData);\n                });\n        }\n        else {\n            openFileMapperModal(control, csvData);\n        }\n\n    };\n\n    $scope.uploadError = function($event) {\n        console.warn($event.error);\n    };\n\n    function filterEmployees(keyword) {\n        if (!keyword || !keyword.length) {\n            $scope.filteredCensus = censusService.censusDetails.slice(0);\n            return;\n        }\n\n        let searchIdList = [];\n        const filteredCensus = [];\n\n        censusService.censusDetails.map(function(censusDetail) {\n            if (checkIfTextExists(censusDetail[$scope.nsPrefix + 'FirstName__c'], keyword) || checkIfTextExists(censusDetail[$scope.nsPrefix + 'LastName__c'], keyword) ) {\n                if (censusDetail[$scope.nsPrefix + 'RelatedCensusMemberId__c'] && searchIdList.indexOf(censusDetail[$scope.nsPrefix + 'RelatedCensusMemberId__c']) === -1) {\n                     searchIdList.push(censusDetail[$scope.nsPrefix + 'RelatedCensusMemberId__c']);\n                } else if (searchIdList.indexOf(censusDetail.Id) === -1) {\n                     searchIdList.push(censusDetail.Id);\n                }\n            }\n        });\n\n        censusService.censusDetails.forEach(function(emp) {\n            if (searchIdList.indexOf(emp.Id) !== -1 || searchIdList.indexOf(emp[$scope.nsPrefix + 'RelatedCensusMemberId__c']) !== -1) {\n                filteredCensus.push(emp);\n            }\n        });\n\n        $scope.filteredCensus = filteredCensus;\n    }\n\n    /**\n     * Filters table data by firstname/lastname based on the input of search box\n     *\n     * @param {String} $scope.search.keyword search term for the filtering\n     */\n    $scope.searchEmployee = function() {\n        filterEmployees($scope.search.keyword);\n        navigateToFirstPage();\n    };\n\n    $scope.clearSearch = function() {\n        $scope.search.keyword = '';\n        $scope.searchEmployee();\n    };\n\n    /**\n     * Validate Census\n     */\n    function validateOSTemplate() {\n        if(!$scope.bpTree.response.censusId ) {\n            InsValidationHandlerService.throwError({\n                message: $scope.customLabels.InsOSCensusErrorMissingParameter.replace('{0}', 'censusId')\n            });\n            $scope.isValidCensus = false;\n            return false;\n        }\n        return true;\n    }\n\n    function onRequestError(errors) {\n        InsValidationHandlerService.throwError({\n            message: errors\n        });\n        $scope.isValidCensus = false;\n    }\n\n    function handleCustomLabelsResponse(response) {\n        $scope.resources.isLoaded = true;\n        customLabels = $scope.bpTree.response.names.split(',');\n        customLabels.forEach(function(labelId){\n            if(response.data[labelId]){\n                $scope.customLabels[labelId] = response.data[labelId];\n            }\n        });\n    }\n\n    function loadLabelsAndMembers(control) {\n        if(!$scope.bpTree.response.names) {\n            $scope.bpTree.response.names = $scope.DEFAULT_LABELS.join();\n        }\n        return censusService.getCustomLabels({control: control, scope: $scope})\n            .then(function(response) {\n                handleCustomLabelsResponse(response);\n                if(!validateOSTemplate()) {\n                    return;\n                }\n                return censusService.getMembers({control: control, scope: $scope});\n            });\n    }\n\n    function initHeaders() {\n        $scope.nameToLabelMap = $scope.headers.reduce(function(nameToLabelMap, header) {\n            if(header.name === ($scope.nsPrefix + 'LastName__c')) {\n                $scope.lblLastName = header.label;\n            }\n            nameToLabelMap[header.name] = header.label;\n            return nameToLabelMap;\n        }, {});\n        $scope.mapIdToPlan = censusService.getMapIdToPlan();\n        $scope.mapTypeToPlans = censusService.getMapTypeToPlans();\n    }\n\n    /**\n     * Triggered on page initialization, retrieves all the members for the current censusId\n     */\n    $scope.loadCensus = function(control) {\n        loadLabelsAndMembers(control)\n            .then(onSuccess, onRequestError)\n            .then(navigateToFirstPage)\n            .then(initHeaders);\n    };\n\n    /**\n     * When triggered, deletes all members for the current censusId\n     *\n     * @param {Object} control Element control\n     *\n     */\n    $scope.deleteAllCensus = function(control) {\n        const toDeleteCensusDetails = censusService.censusDetails.filter(function(member) {\n            return member.Id;\n        });\n        censusService\n            .deleteMembers({control: control, scope: $scope, censusDetails: toDeleteCensusDetails})\n            .then(onSuccess([]))\n            .then(navigateToFirstPage);\n    };\n\n    function sheetToBuffer(sheet) {\n        let buffer = new ArrayBuffer(sheet.length);\n        let view = new Uint8Array(buffer);\n        for (let i=0; i<sheet.length; i++) view[i] = sheet.charCodeAt(i) & 0xFF;\n        return buffer;\n    }\n\n    function generateCSVFile(newCSVData) {\n        const ERROR_SHEET_TITLE = 'Upload data with error';\n        const workbook = XLSX.utils.book_new();\n        workbook.SheetNames.push(ERROR_SHEET_TITLE);\n        const worksheet = XLSX.utils.aoa_to_sheet(newCSVData);\n        workbook.Sheets[ERROR_SHEET_TITLE] = worksheet;\n        return XLSX.write(workbook, {bookType: 'xlsx', type: 'binary'});\n    }\n\n    function shouldShowInvalidRowsOnly() {\n        return $scope.bpTree.response.showInvalidRowsOnly;\n    }\n\n    function generateCSVData(censusMembers, headers) {\n        const KEY_ERROR = 'Error';\n        const csvColumnHeaders = Object.keys(censusMembers[0]);\n        if(csvColumnHeaders.indexOf(KEY_ERROR) < 0) {\n            csvColumnHeaders.push(KEY_ERROR);\n        }\n        const newCSVData = [];\n        const fieldNameToHeaderMap = getFieldNameToHeaderMap(headers);\n        censusMembers.forEach(function(csvRow) {\n            if(!csvRow.hasOwnProperty(KEY_ERROR) && shouldShowInvalidRowsOnly()) {\n                return;\n            }\n            newCSVData.push(csvColumnHeaders.map(function(header) {\n                if(header == KEY_ERROR) {\n                    return formatErrorMessage(csvRow[header], fieldNameToHeaderMap);\n                }\n                return csvRow[header];\n            }));\n        });\n        newCSVData.unshift(csvColumnHeaders);\n        return newCSVData;\n    }\n\n    function getFieldNameToHeaderMap(headers) {\n        const ret = {};\n        for(let key in headers){\n            ret[headers[key]] = key;\n        }\n        const enrollmentField = censusService.getProductEnrollmentField($scope.headers);\n        if(enrollmentField) {\n            ret[enrollmentField.name] = enrollmentField.label;\n        }\n        return ret;\n    }\n\n    function formatErrorMessage(message, headers) {\n        if(!message) {\n            return '';\n        }\n\n        for(let key in headers) {\n            if(key.indexOf($scope.nsPrefix) === 0) {\n                message = message.replace(new RegExp(key, 'g'), headers[key]);\n            }\n        }\n        return message;\n    }\n\n    /**\n     *\n     * Adds the errors from response to the parsed CSV data in JSON format\n     *\n     * @param {Response} response - update response\n     * @param {Array[Object]} csvData - parsed CSV data\n     */\n    function appendResponseErrorsToCSVData(response, csvData) {\n        const responseErrors = response.errors;\n        responseErrors.forEach(function(member) {\n            csvData[member.index].Error = member.error;\n        });\n    }\n\n    function generateCSVToJSONErrorMessage(totalUploadCount, errCount) {\n        return $scope.customLabels.InsOSCensusErrorInvalidValueOnUpload\n            .replace('{0}', errCount)\n            .replace('{1}', totalUploadCount);\n    }\n\n    function generateErrorMessage(totalUploadCount, errCount) {\n        return $scope.customLabels.InsOSCensusErrorEncounteredOnUpload\n            .replace('{0}', errCount)\n            .replace('{1}', totalUploadCount);\n    }\n\n    /**\n     * Displays toast with link to the upload summary\n     *\n     * @param {Array[Object]} worksheetData - return of XLSX.read function\n     */\n    function handleUploadError(errorMessage, worksheetData, errors, headers) {\n        const newWorksheetData = generateCSVData(worksheetData, headers);\n        const worksheetUploadSummary = generateCSVFile(newWorksheetData);\n        InsValidationHandlerService.throwError({\n            message: errorMessage,\n            action: {\n                callback: function() {\n                    saveAs(new Blob([sheetToBuffer(worksheetUploadSummary)], {type: 'application/octet-stream'}),\n                    'upload-summary.xlsx');\n                },\n                title: $scope.customLabels.InsOSCensusErrorUploadSummaryLink\n            }\n        });\n    }\n\n    /**\n     * Displays save error in UI, if any.\n     * If the error is a string, display a toast containing the message.\n     * If the error is an array, append it to the csv upload file.\n     *\n     * @param {Object} response - response\n     * @param {Array[Object]} csvData raw csv rows extracted by papaparse/sheet js. Mapping should be {columnheader: cellValue}\n     * @param {Array[Object]} headers field definition and their mapping to the CSV headers\n     */\n    function handleSaveResponseError(response, headers, csvData) {\n        if(response.errors && response.errors.length) {\n            if(Array.isArray(response.errors) && response.errors[0].index !== undefined) {\n                appendResponseErrorsToCSVData(response, csvData);\n                handleUploadError(generateErrorMessage(csvData.length, response.errors.length), csvData, response.errors, headers);\n            }\n            else {\n                InsValidationHandlerService.throwError({\n                    message: response.errors\n                });\n            }\n        }\n    }\n\n    /**\n     * Workflow to save census members from csv/xls upload.\n     *\n     * @param {Object} control Element control\n     * @param {Array[Object]} headers field definition and their mapping to the CSV headers\n     * @param {Array[Object]} members raw csv rows extracted by papaparse/sheet js. Mapping should be {columnheader: cellValue}\n     *\n     */\n    $scope.saveUploadData = function(control, headers, members) {\n        let censusMembers = null;\n        const csvData = members;\n\n        censusService\n            .csvDataToCensus(headers, members)\n            .then(function(members) {\n                censusMembers = members;\n                formatAllDateFields(censusMembers);\n                return censusService\n                    .updateMembers({control: control, scope: $scope, censusDetails: members});\n            })\n            .then(function(response) {\n                handleSaveResponseError(response, headers, csvData);\n                if(response.censusMemberIds && response.censusMemberIds.length) {\n                    censusService.censusDetails.forEach(function(member) {\n                        member.isUpdated = response.censusMemberIds.indexOf(member.Id) > -1;\n                    });\n                }\n                return censusService.getMembers({control: control, scope: $scope});\n            })\n            .then(onSuccess, onRequestError)\n            .then(navigateToFirstPage);\n    };\n\n    window.onbeforeunload = function(event) {\n        event.preventDefault();\n        if (filterEditedCensus(censusService.censusDetails).length) {\n            return '';\n        }\n    };\n\n    $scope.downloadFile = function() {\n        window.open('../resource/' + CENSUS_TEMPLATE_NAME);\n        return false;\n    };\n\n    $scope.itemsPerPage = 10;\n\n    function navigateToPageOfIndex(index) {\n        navigateToPage(Math.floor((index + 1)/ $scope.itemsPerPage));\n    }\n\n    function navigateToFirstPage() {\n        navigateToPage(0);\n    }\n\n    $scope.navigateToPage = navigateToPage;\n\n    function navigateToPage(index) {\n        $scope.paginateItems(null, {page: index});\n    }\n\n    function generatePages(current, last) {\n        const buffer = 2;\n        const leftCounter = current - buffer;\n        const rightCounter = current + buffer + 1;\n        const pages = [];\n        let pagesWithEllipses = [];\n        let prevPage;\n\n        for(let i = 1; i <= last; i++) {\n            if(i == 1 || i == last || i >= leftCounter && i < rightCounter) {\n                pages.push(i);\n            }\n        }\n        pages.forEach(function(page){\n            if (prevPage) {\n                if (page - prevPage === buffer) {\n                    pagesWithEllipses.push(prevPage + 1);\n                } else if (page - prevPage !== 1) {\n                    pagesWithEllipses.push('...');\n                }\n            }\n            pagesWithEllipses.push(page);\n            prevPage = page;\n        });\n        if(pagesWithEllipses.length == 1){\n            return [];\n        } else {\n            return pagesWithEllipses;\n        }\n    }\n\n    // Gets called when clicking next/previous directional buttons at top\n    $scope.paginateItems = function(direction, opts) {\n        if(!$scope.filteredCensus){\n            return;\n        }\n        $scope.filteredCensus.forEach(function(detail, index) {\n            detail.index = index;\n        });\n\n        opts = opts || {};\n        let startIndex = 0;\n        const data = $scope.tableData;\n\n        $scope.totalNumberOfPages = Math.ceil($scope.filteredCensus.length / $scope.itemsPerPage);\n        $scope.totalNumberOfItems = $scope.filteredCensus.length;\n        if(opts.page) {\n            if(opts.page >= $scope.totalNumberOfPages) {\n                opts.page = $scope.totalNumberOfPages - 1;\n            }\n            startIndex = opts.page * $scope.itemsPerPage;\n        } else if (direction === 'next') {\n            startIndex = data[data.length - 1].index + 1;\n        } else if (direction === 'prev') {\n            startIndex =  data[0].index - $scope.itemsPerPage;\n            if (startIndex < 0) {\n                startIndex = 0;\n            }\n        }\n        $scope.currentPage = Math.ceil(startIndex / $scope.itemsPerPage ) + 1;\n        $scope.pages = generatePages($scope.currentPage, $scope.totalNumberOfPages);\n        $scope.tableData = $scope.filteredCensus ? $scope.filteredCensus.slice(startIndex, startIndex + $scope.itemsPerPage) : [];\n    };\n\n    // Decides whether the directional button should be active or disabled based on\n    // the location we're at in the whole set of products.\n    $scope.showPageControl = function(direction) {\n        let show = false;\n        if (direction === 'next') {\n            show = $scope.tableData[$scope.tableData.length - 1].index < $scope.filteredCensus.length - 1;\n        } else if (direction === 'prev') {\n            show = $scope.tableData[0].index > 0;\n        }\n        return show;\n    };\n\n    $scope.showError = function(censusDetail) {\n        censusDetail.isErrorDisplayed = !censusDetail.isErrorDisplayed;\n    };\n\n    angular.element(window).bind('scroll', function(event) {\n        const elDatePicker = document.querySelector('.nds-datepicker');\n        if(!elDatePicker) {\n            return;\n        }\n        const elField = elDatePicker.previousElementSibling;\n        const boundingBoxField = elField.getBoundingClientRect();\n        elDatePicker.style.top = (boundingBoxField.top + boundingBoxField.height) + 'px';\n\n    });\n\n\n}]);\n\nvlocity.cardframework.registerModule.directive('insScrollHandler', [function() {\n    return {\n      link: function (scope, elem) {\n        elem.on('scroll', function () {\n            const elDatePicker = document.querySelector('.nds-datepicker');\n            if(elDatePicker) {\n                elDatePicker.previousElementSibling.click();\n            }\n        });\n      }\n    };\n}]);\n\n// Modal Service\n//----------------------------------------------------------------\n//----------------------------------------------------------------\n//----------------------------------------------------------------\nvlocity.cardframework.registerModule.factory('InsCensusModal', ['$sldsModal',\n    function($sldsModal){\n        'use strict';\n\n        const scrollTop = function() {\n            if ('parentIFrame' in window){\n                window.parentIFrame.scrollTo(0);\n            } else {\n                $('body').scrollTop(0);\n            }\n        };\n\n        return {\n            launchFileMapperModal: function(scope, records, control, customClass, onHide, title) {\n                const modalScope = scope.$new();\n                scrollTop();\n                modalScope.isLayoutLoaded = false;\n                modalScope.title = title;\n                modalScope.customClass = customClass;\n                modalScope.uploadInfo = records.uploadInfo;\n                modalScope.cardFieldMap = records.cardFieldMap;\n                modalScope.csvColumnHeaders = records.csvColumnHeaders;\n                modalScope.setCensusMembers = function() {\n                    this.$slideHide();\n                    scope.saveUploadData(control, modalScope.cardFieldMap,\n                        records.data);\n                };\n\n                $sldsModal({\n                    scope: modalScope,\n                    templateUrl: 'sldsModalTemplate.html',\n                    show: true,\n                    vlocSlide: true,\n                    onHide: onHide\n                });\n            },\n\n            launchConfirmationModal: function(scope, title, message, onSave) {\n                const modalScope = scope.$new();\n                scrollTop();\n                modalScope.isLayoutLoaded = false;\n                modalScope.title = title;\n                modalScope.message = message;\n                modalScope.onSave = function() {\n                    this.$slideHide();\n                    onSave();\n                };\n\n                $sldsModal({\n                    scope: modalScope,\n                    templateUrl: 'confirmationTemplate.html',\n                    show: true,\n                    vlocSlide: true,\n                    onSave: onSave\n                });\n            }\n        };\n    }\n]);\n\nvlocity.cardframework.registerModule.factory('InsUtils', function() {\n    return {\n        /**\n         * Returns all the values in a JSON\n         * Alternative function for Object.values()\n         *\n         * @param {Object} obj - JSON\n         */\n        toJSONValues: function(obj) {\n            if(!obj) return [];\n            let values = [];\n            for(let key in obj) {\n                values.push(obj[key]);\n            }\n            return values;\n        }\n    };\n});\n\nvlocity.cardframework.registerModule.factory('InsValidationHandlerService', ['$rootScope', '$sldsModal', '$timeout', function($rootScope, $sldsModal, $timeout) {\n    'use strict';\n    return {\n        throwError: function(error) {\n            let statusCode = '';\n            if (!error.message) {\n                error.message = 'No error message.';\n            }\n            if (error.statusCode) {\n                statusCode = '(' + error.statusCode + '): ';\n            }\n            if (typeof error.type === 'string') {\n                error.type = error.type.charAt(0).toUpperCase() + this.slice(1) + ' ';\n            } else {\n                error.type = '';\n            }\n            if (error.message && error.message.indexOf('Logged in?') > -1) {\n                error.message = 'You have been logged out of Salesforce. Please back up any changes to your document and refresh your browser window to login again.';\n                error.type = '';\n                statusCode = '';\n            }\n            $rootScope.notification = $rootScope.notification || {};\n            $rootScope.notification.active = true;\n            $rootScope.notification.type = 'error';\n            if($rootScope.notification.type === 'error') {\n                $rootScope.notification.icon = 'error';\n            }\n            $rootScope.notification.message = error.type + statusCode + error.message;\n            $rootScope.notification.action = error.action;\n\n\n            $timeout(function() {\n                $rootScope.isLoaded = true;\n            }, 500);\n        }\n    };\n}]);","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-census-member-upload/1/Vlocity/1563756226408","%vlocity_namespace%__HTML__c":"<div ng-controller=\"InsCensusController\" class=\"vloc-ins-census-container\" ng-if=\"bpTree.asIndex === child.eleArray[0].rootIndex\" ng-init=\"loadCensus(control)\">\n    <div ng-if=\"resources.isLoaded\">\n        <div class=\"nds-notify_container slds-notify_container vloc-ins-notify-container\" ng-if=\"$root.notification.active\">\n            <div class=\"nds-notify nds-notify_toast slds-notify slds-notify_toast slds-theme nds-theme_{{$root.notification.type}} slds-theme_{{$root.notification.type}}\" role=\"alert\">\n                <span class=\"nds-assistive-text slds-assistive-text\">{{$root.notification.type}}</span>\n                <span class=\"nds-icon_container nds-icon-utility-{{$root.notification.type}} nds-m-right_small nds-no-flex nds-align-top\n                        slds-icon_container slds-icon-utility-{{$root.notification.type}} slds-m-right_small slds-no-flex slds-align-top\" title=\"{{$root.notification.type}}\">\n                    <slds-svg-icon sprite=\"'utility'\" size=\"'small'\" icon=\"$root.notification.icon\"></slds-svg-icon>\n                </span>\n                <div class=\"nds-notify__content slds-notify__content\">\n                    <h2 class=\"nds-text-heading_small slds-text-heading_small\">{{$root.notification.message}}</h2>\n                    <p>\n                        <button ng-if=\"$root.notification.action\" ng-click=\"$root.notification.action.callback()\" class=\"nds-button slds-button vloc-ins-toast-action\">\n                            {{$root.notification.action.title}}\n                        </button>\n                    </p>\n                </div>\n                <div class=\"nds-notify__close slds-notify__close\">\n                    <button class=\"nds-button nds-button_icon nds-button_icon-inverse slds-button slds-button_icon slds-button_icon-inverse vloc-ins-notify-close\" title=\"Close\" ng-click=\"$root.notification.active = false\">\n                        <slds-svg-icon sprite=\"'utility'\" icon=\"'close'\"></slds-svg-icon>\n                    </button>\n                </div>\n            </div>\n        </div>\n        <div class=\"nds-wrap nds-grid nds-gutters nds-box slds-wrap slds-grid slds-gutters slds-box vloc-ins-header-summary\">\n            <div class=\"nds-col slds-col\">\n                <span>{{::customLabels.InsCensusTotalEmployees}}</span>\n                <div class=\"nds-text-heading_large slds-text-heading_large vloc-ins-header-summary-count\">{{censusInfo.total}}</div>\n            </div>\n            <div class=\"nds-col slds-col\">\n                <span>{{::customLabels.InsOSCensusEmployeeOnlyCount}}</span>\n                <div class=\"nds-text-heading_large slds-text-heading_large vloc-ins-header-summary-count\">{{censusInfo.EmpCount}}</div>\n            </div>\n            <div class=\"nds-col slds-col\">\n                <span>{{::customLabels.InsOSCensusEmployeeWithSpouseCount}}</span>\n                <div class=\"nds-text-heading_large slds-text-heading_large vloc-ins-header-summary-count\">{{censusInfo.EmpSpCount}}</div>\n            </div>\n            <div class=\"nds-col slds-col\">\n                <span>{{::customLabels.InsOSCensusEmployeeWithChildCount}}</span>\n                <div class=\"nds-text-heading_large slds-text-heading_large vloc-ins-header-summary-count\">{{censusInfo.EmpChCount}}</div>\n            </div>\n            <div class=\"nds-col slds-col\">\n                <span>{{::customLabels.InsOSCensusEmployeeWithFamilyCount}}</span>\n                <div class=\"nds-text-heading_large slds-text-heading_large vloc-ins-header-summary-count\">{{censusInfo.EmpFaCount}}</div>\n            </div>\n        </div>\n        <div class=\"nds-wrap nds-grid nds-gutters_direct slds-wrap slds-grid slds-gutters_direct vloc-ins-control-bar\" ng-if=\"isValidCensus\">\n            <div class=\"nds-col slds-col\">\n                <div class=\"nds-form-element slds-form-element\">\n                    <label class=\"nds-form-element__label slds-form-element__label\" for=\"search-input\">{{::customLabels.InsOSCensusSearchName}}</label>\n                    <div class=\"nds-form-element__control nds-input-has-icon nds-input-has-icon_left-right slds-form-element__control slds-input-has-icon slds-input-has-icon_left-right\">\n                        <slds-svg-icon sprite=\"'utility'\" icon=\"'search'\" size=\"'xx-small'\" extra-classes=\"'nds-input__icon nds-input__icon_left nds-icon-text-default slds-input__icon slds-input__icon_left slds-icon-text-default'\"></slds-svg-icon>\n                        <input type=\"text\" id=\"search-input\" placeholder=\"Search Name\" class=\"nds-input slds-input\" ng-model=\"search.keyword\" ng-change=\"searchEmployee()\"/>\n                        <button class=\"nds-button nds-button_icon nds-input__icon nds-input__icon_right slds-button slds-button_icon slds-input__icon slds-input__icon_right\" title=\"Clear\" ng-click=\"clearSearch()\">\n                            <slds-svg-icon sprite=\"'utility'\" icon=\"'clear'\" size=\"'xx-small'\" extra-classes=\"'nds-button__icon nds-icon-text-light slds-button__icon slds-icon-text-light'\"></slds-svg-icon>\n                            <span class=\"nds-assistive-text slds-assistive-text\">{{::customLabels.InsOSCensusEmployeeTotalCount}}</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"nds-col nds-wrap nds-grid nds-grid_align-end slds-col slds-wrap slds-grid slds-grid_align-end\">\n                <div class=\"nds-col slds-col\">\n                    <button ng-click=\"downloadFile()\" class=\"nds-button slds-button\">{{::customLabels.InsOSCensusDownloadTemplate}}</button>\n                </div>\n                <div class=\"nds-col slds-col\">\n                    <ins-file-upload-handler\n                        input-id=\"prime-census__import-file\"\n                        class=\"nds-button nds-button_brand slds-button slds-button_brand\"\n                        label-text=\"{{::customLabels.InsOSCensusUploadMembers}}\"\n                        control=\"control\"\n                        on-read=\"uploadCensus($event, control)\"\n                        on-error=\"uploadError($event)\"\n                        input-class=\"vloc-ins-hide-element\"\n                        ng-model=\"censusFile\">\n                    </ins-file-upload-handler>\n                </div>\n                <div class=\"nds-col slds-col\">\n                    <button class=\"nds-button nds-button_brand slds-button slds-button_brand\" ng-click=\"addNewMember()\">{{::customLabels.InsOSCensusAddEmployee}}</button>\n                </div>\n                <div class=\"nds-col slds-col\">\n                    <button class=\"nds-button nds-button_brand slds-button slds-button_brand\" ng-click=\"deleteAllCensus(control)\">{{::customLabels.InsOSCensusDeleteAllData}}</button>\n                </div>\n            </div>\n        </div>\n        <div class=\"vloc-ins-census-member-upload\" ng-if=\"bpTree.asIndex === child.eleArray[0].rootIndex\">\n            <div class=\"vloc-ins-census-table-container nds-grid slds-grid\" ng-if=\"tableData.length\">\n                <div class=\"vloc-ins-census-table-names nds-col slds-col\">\n                    <table class=\"nds-table nds-table_bordered nds-no-row-hover slds-table slds-table_bordered slds-no-row-hover\">\n                        <thead>\n                            <tr class=\"nds-line-height_reset slds-line-height_reset\">\n                                <th>\n                                    <div class=\"nds-truncate nds-assistive-text slds-truncate slds-assistive-text\" title=\"{{::customLabels.OmniScriptError}}\">\n                                        {{::customLabels.OmniScriptError}}\n                                    </div>\n                                </th>\n                                <th scope=\"col\">\n                                    <div class=\"nds-truncate slds-truncate\" title=\"{{::lblLastName}}\">\n                                        {{::lblLastName}}\n                                    </div>\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr ng-repeat=\"censusDetail in tableData track by $index\"\n                                ng-form=\"censusForm_{{$index}}\"\n                                ng-show=\"!showErrorsOnly || (showErrorsOnly && censusForm_{{$index}}.$invalid) || loopform.$valid\"\n                                ng-class=\"{'vloc-ins-no-border': (!censusDetail[nsPrefix + 'IsPrimaryMember__c']) }\">\n                                <td class=\"vloc-ins-col-data nds-cell-edit nds-cell-error slds-cell-edit slds-cell-error\" ng-class=\"{'nds-has-focus slds-has-focus': censusDetail.isErrorDisplayed}\" role=\"gridcell\">\n                                    <button class=\"nds-button nds-button_icon nds-button_icon-error nds-m-horizontal_xxx-small slds-button slds-button_icon slds-button_icon-error slds-m-horizontal_xxx-small\"\n                                        tabindex=\"{{$index + 1}}\" ng-if=\"censusDetail.error\" ng-click=\"showError(censusDetail)\">\n                                        <slds-svg-icon sprite=\"'utility'\" icon=\"'warning'\" size=\"'xx-small'\" class=\"nds-button__icon slds-button__icon\"></slds-svg-icon>\n                                        <span class=\"nds-assistive-text slds-assistive-text\">{{::customLabels.OmniScriptError}}</span>\n                                    </button>\n                                    <div class=\"vloc-ins-err-tooltip nds-popover nds-popover_tooltip nds-nubbin_bottom-left nds-theme_error\" ng-if=\"censusDetail.isErrorDisplayed\" role=\"tooltip\" id=\"error-tooltip-01\">\n                                        <div class=\"nds-popover__body slds-popover__body vloc-ins-err-details\">{{censusDetail.error}}</div>\n                                    </div>\n                                </td>\n                                <td class=\"vloc-ins-col-data nds-cell-edit slds-cell-edit\" data-label=\"{{::lblLastName}}\" ng-class=\"{'nds-has-error slds-has-error': ((censusForm_{{$index}}.lastName.$touched || censusForm_{{$index}}.$submitted) && censusForm_{{$index}}.lastName.$invalid)}\">\n                                    <div class=\"nds-form-element slds-form-element\">\n                                        <input type=\"text\" name=\"lastName\" ng-change=\"updateCensusMember(censusDetail)\" tabindex=\"{{$index + 1}}\" ng-model-options=\"{allowInvalid: true}\"\n                                            class=\"nds-input slds-input\" ng-model=\"censusDetail[nsPrefix + 'LastName__c']\" aria-describedby=\"error-message-lastname-{{index}}\" required/>\n                                    </div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <div class=\"vloc-ins-census-table-fields nds-scrollable_x nds-col slds-scrollable_x slds-col\" ins-scroll-handler>\n                    <table class=\"nds-table nds-table_bordered nds-no-row-hover slds-table slds-table_bordered slds-no-row-hover\">\n                        <thead>\n                            <tr class=\"nds-line-height_reset slds-line-height_reset\">\n                                <th  ng-repeat=\"header in headers\" ng-if=\"(header.name !== nsPrefix + 'LastName__c') && (header.name !== nsPrefix + 'ContractLineId__c')\" title=\"{{header.label}}\">\n                                    {{header.label}}\n                                </th>\n                                <th ng-repeat=\"(type, plans) in mapTypeToPlans\" ng-if=\"mapTypeToPlans\">\n                                    {{type}}\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr ng-repeat=\"censusDetail in tableData track by $index\"\n                                ng-init=\"memberIndex = $index + 1\"\n                                ng-form=\"censusDetailForm_{{memberIndex}}\"\n                                ng-show=\"!showErrorsOnly || (showErrorsOnly && censusDetailForm_{{memberIndex}}.$invalid) || loopform.$valid\"\n                                ng-class=\"{'vloc-ins-no-border': (!censusDetail[nsPrefix + 'IsPrimaryMember__c']) }\">\n                                <td class=\"vloc-ins-col-data nds-cell-edit slds-cell-edit\" ng-repeat=\"header in headers\" data-label=\"{header.name}\"\n                                    ng-if=\"(header.name !== nsPrefix + 'LastName__c') && (header.name !== nsPrefix +'ContractLineId__c')\"\n                                    ng-class=\"{'nds-has-error slds-has-error': ((censusDetailForm_{{memberIndex}}.{{header.name}}.$touched || censusDetailForm_{{memberIndex}}.$submitted) && censusDetailForm_{{memberIndex}}.{{header.name}}.$invalid)}\">\n                                    <input type=\"text\" tabindex=\"{{memberIndex}}\" ng-change=\"updateCensusMember(censusDetail)\"\n                                        ng-if=\"header.type === 'STRING' || header.type === 'MULTIPICKLIST' || header.type === 'ENCRYPTEDSTRING' || header.type === 'REFERENCE'\"\n                                        class=\"nds-input slds-input vloc-ins-field-text\" ng-model=\"censusDetail[header.name]\"/>\n                                    <input type=\"number\" tabindex=\"{{memberIndex}}\" ng-change=\"updateCensusMember(censusDetail)\"\n                                        ng-if=\"header.type === 'DOUBLE'\" class=\"nds-input slds-input\" ng-model=\"censusDetail[header.name]\"/>\n                                    <input type=\"email\" name=\"{{header.name}}\" tabindex=\"{{memberIndex}}\" ng-change=\"updateCensusMember(censusDetail)\"\n                                        ng-if=\"header.type === 'EMAIL'\" class=\"nds-input slds-input vloc-ins-field-text\" ng-model=\"censusDetail[header.name]\"/>\n                                    <div class=\"nds-form-element slds-form-element\" ng-if=\"header.type === 'BOOLEAN'\">\n                                        <div class=\"nds-form-element__control slds-form-element__control\">\n                                            <div class=\"nds-checkbox slds-checkbox\">\n                                                <input type=\"checkbox\" tabindex=\"{{memberIndex}}\" name=\"options\" id=\"checkbox-{{header.name}}-{{memberIndex}}\" ng-change=\"updateCensusMember(censusDetail)\" ng-model=\"censusDetail[header.name]\" />\n                                                <label class=\"nds-checkbox__label slds-checkbox__label\" for=\"checkbox-{{header.name}}-{{memberIndex}}\">\n                                                    <span class=\"nds-checkbox_faux slds-checkbox_faux\"></span>\n                                                    <span class=\"nds-form-element__label slds-form-element__label\"></span>\n                                                </label>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class=\"nds-is-relative slds-is-relative nds-form-element slds-form-element\" ng-if=\"header.type === 'DATE'\" >\n                                        <input type=\"text\" tabindex=\"{{memberIndex}}\"\n                                            name=\"{{header.name}}\"\n                                            class=\"slds-input nds-input datatype-date vloc-ins-field-date\"\n                                            ng-model=\"censusDetail[header.name]\" ng-model-options=\"{debounce: 0, required: false}\"\n                                            ng-change=\"updateCensusMember(censusDetail, header.name)\"\n                                            slds-date-picker />\n                                    </div>\n                                    <div class=\"nds-form-element slds-form-element\" ng-if=\"header.type === 'PICKLIST'\" >\n                                        <div class=\"nds-form-element__control slds-form-element__control\">\n                                            <div class=\"nds-select_container slds-select_container\">\n                                            <select class=\"nds-select slds-select\" tabindex=\"{{memberIndex}}\" ng-model=\"censusDetail[header.name]\" ng-change=\"updateCensusMember(censusDetail)\">\n                                                <option value=\"\">{{::customLabels.Select}}</option>\n                                                <option ng-repeat=\"option in header.options\" value=\"{{option.value}}\">{{option.label}}</option>\n                                            </select>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td class=\"vloc-ins-col-data\" ng-repeat=\"(type, plans) in mapTypeToPlans\" ng-if=\"mapTypeToPlans\">\n                                    <span ng-repeat=\"productId in censusDetail[nsPrefix + 'ContractLineId__c'].split(';')\" ng-if=\"mapIdToPlan[productId].type == type\">\n                                        {{mapIdToPlan[productId].name}}\n                                    </span>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <div class=\"vloc-ins-census-table-actions nds-col slds-col\">\n                    <table class=\"nds-table nds-table_bordered nds-no-row-hover slds-table slds-table_bordered slds-no-row-hover\">\n                        <thead>\n                            <tr class=\"nds-line-height_reset slds-line-height_reset\">\n                                <th scope=\"col\">\n                                    <div class=\"nds-truncate slds-truncate\" title=\"{{::customLabels.InsOSCensusRelationship}}\">{{::customLabels.InsOSCensusRelationship}}</div>\n                                </th>\n                                <th scope=\"col\">\n                                    <div class=\"nds-truncate slds-truncate\" title=\"\">\n                                        <button class=\"nds-button nds-button_icon nds-button_icon-small nds-float_right nds-popover__close slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close\"\n                                                ng-click=\"upsertTableData(control)\" title=\"Save\" >\n                                            <slds-svg-icon sprite=\"'utility'\" icon=\"'save'\" size=\"'small'\" extra-classes=\"'nds-icon-text-default slds-icon-text-default'\"></slds-svg-icon>\n                                        </button>\n\n                                    </div>\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr ng-repeat=\"censusDetail in tableData track by $index\"\n                                ng-form=\"censusForm_{{$index}}\"\n                                ng-show=\"!showErrorsOnly || (showErrorsOnly && censusForm_{{$index}}.$invalid) || loopform.$valid\"\n                                ng-class=\"{'vloc-ins-no-border': (!censusDetail[nsPrefix + 'IsPrimaryMember__c']) }\">\n                                <td class=\"vloc-ins-col-data\" data-label=\"Relationship\">\n                                    <input tabindex=\"{{$index + 1}}\" type=\"text\" value=\"{{::customLabels.InsOSCensusRelationshipEmployee}}\" class=\"nds-select slds-select\" ng-if=\"censusDetail[nsPrefix + 'IsPrimaryMember__c']\" disabled required></select>\n                                    <div class=\"nds-form-element slds-form-element\" ng-if=\"!censusDetail[nsPrefix + 'IsPrimaryMember__c']\"  >\n                                        <div class=\"nds-form-element__control slds-form-element__control\">\n                                            <div class=\"nds-select_container slds-select_container\" >\n                                                <select class=\"nds-select slds-select\"\n                                                    tabindex=\"{{$index + 1}}\"\n                                                    ng-model=\"censusDetail[nsPrefix + 'IsSpouse__c']\"\n                                                    ng-change=\"updateCensusMember(censusDetail, true)\"\n                                                    ng-options=\"(item?customLabels.InsOSCensusRelationshipSpouse:customLabels.InsOSCensusRelationshipChild) for item in [true, false]\" required>\n                                                </select>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td class=\"vloc-ins-col-action\">\n                                    <button class=\"nds-button nds-button_icon nds-button_icon-small nds-float_right nds-popover__close slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close\"\n                                        tabindex=\"{{$index + 1}}\" ng-click=\"deleteCensus(control, censusDetail, censusDetail[nsPrefix + 'IsPrimaryMember__c'])\" title=\"{{::customLabels.InsOSCensusDeleteMember}}\" >\n                                        <slds-svg-icon sprite=\"'utility'\" icon=\"'delete'\" size=\"'small'\" extra-classes=\"'nds-icon-text-default slds-icon-text-default'\"></slds-svg-icon>\n                                    </button>\n                                    <button class=\"nds-button nds-button_icon nds-button_icon-small nds-float_right nds-popover__close slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close\"\n                                        ng-if=\"censusDetail[nsPrefix + 'IsPrimaryMember__c']\" ng-click=\"addNewMember(censusDetail)\" tabindex=\"{{$index + 1}}\" title=\"{{::customLabels.InsOSCensusAddDependent}}\" >\n                                        <slds-svg-icon sprite=\"'utility'\" icon=\"'adduser'\" size=\"'small'\" extra-classes=\"'nds-icon-text-default slds-icon-text-default'\"></slds-svg-icon>\n                                    </button>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n        <ul class=\"vloc-ins-pagination nds-text-heading_small slds-text-heading_small nds-align_absolute-center slds-align_absolute-center\" ng-if=\"usePagination && totalNumberOfItems\">\n            <li ng-if=\"showPageControl('prev')\">\n                <button class=\"nds-button slds-button vloc-ins-nav\" ng-click=\"navigateToPage(0)\">\n                    &laquo;\n                </button>\n            </li>\n            <li ng-if=\"showPageControl('prev')\">\n                <button class=\"nds-button slds-button vloc-ins-nav\" ng-click=\"paginateItems('prev')\">\n                    &lsaquo;\n                </button>\n            </li>\n            <li ng-repeat=\"pageNumber in pages track by $index\" >\n                <button class=\"nds-button slds-button\" ng-click=\"navigateToPage(pageNumber - 1)\" ng-disabled=\"pageNumber === '...'\">\n                    <span ng-class=\"{ 'vloc-ins-active' : currentPage === pageNumber  }\">{{ pageNumber }}</span>\n                </button>\n            </li>\n            <li ng-if=\"showPageControl('next')\">\n                <button class=\"nds-button slds-button vloc-ins-nav\" ng-click=\"paginateItems('next')\">\n                    &rsaquo;\n                </button>\n            </li>\n            <li ng-if=\"showPageControl('next')\">\n                <button class=\"nds-button slds-button vloc-ins-nav\" ng-click=\"navigateToPage(totalNumberOfPages)\">\n                    &raquo;\n                </button>\n            </li>\n        </ul>\n    </div>\n</div>\n<script type=\"text/ng-template\" id=\"sldsModalTemplate.html\">\n    <div class=\"vloc-ins-file-header-mapping-modal\" >\n        <section role=\"dialog\" tabindex=\"-1\" aria-labelledby=\"modal-heading-01\" aria-modal=\"true\" aria-describedby=\"modal-content-id-1\" class=\"nds-modal nds-fade-in-open nds-modal_large\">\n            <div class=\"nds-modal__container slds-modal__container  vloc-ins-omni\" >\n                <header class=\"nds-modal__header slds-modal__header\">\n                    <button class=\"nds-button nds-button_icon nds-modal__close nds-button_icon-inverse slds-button slds-button_icon slds-modal__close slds-button_icon-inverse\" title=\"Close\" ng-click=\"$slideHide()\">\n                        <slds-svg-icon sprite=\"'utility'\" icon=\"'close'\" size=\"'medium'\" ></slds-svg-icon>\n                        <span class=\"nds-assistive-text slds-assistive-text\">Close</span>\n                    </button>\n                    <h2 id=\"modal-heading-01\" class=\"nds-text-heading_medium nds-hyphenate slds-text-heading_medium slds-hyphenate\">{{title}}</h2>\n                </header>\n                <div class=\"nds-modal__content nds-p-around_medium slds-modal__content slds-p-around_medium\" id=\"modal-content-id-1\">\n                    <div class=\"nds-text-align_center slds-text-align_center panel panel-success\" ng-if=\"uploadInfo.status === 'success'\" >\n                        <div class=\"panel-body\">{{ uploadInfo['csvDataCount'] }} {{::customLabels.InsOSCensusRecords}} </div>\n                    </div>\n                    <div class=\"nds-size_1-of-1 slds-size_1-of-1 vloc-ins-nds-underline--gradient nds-m-top_small nds-m-bottom_large nds-m-top_large\n                        slds-m-top_small slds-m-bottom_large slds-m-top_large\">\n                        <h1 class=\"vloc-ins-nds-page_header\">{{::customLabels.InsOSCensusIdentifyFileMappings}}</h1>\n                    </div>\n                    <div class=\"nds-grid nds-wrap\">\n                        <div class=\"nds-m-bottom_small nds-size_1-of-3 nds-grid nds-grid_align-center slds-m-bottom_small slds-size_1-of-3 slds-grid slds-grid_align-center\" ng-repeat=\"columnHeader in csvColumnHeaders\">\n                            <div class=\"nds-col nds-size_1-of-2 slds-col slds-size_1-of-2\">\n                                <div class=\"vloc-ins-nds-inline-control__label nds-p-left_small slds-p-left_small\">\n                                    {{columnHeader}}\n                                </div>\n                                <select ng-disabled=\"uploadInfo.status === 'mapped'\"\n                                    ng-options=\"header.name as header.label for header in headers\"\n                                    ng-model=\"cardFieldMap[columnHeader]\"\n                                    class=\" nds-select slds-select vloc-attrs-select\"\n                                    id=\"select-{{$index}}-{{header.name}}\">\n                                    <option value=\"\"></option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <footer class=\"nds-modal__footer slds-modal__footer\">\n                    <button class=\"nds-button nds-button_neutral slds-button slds-button_neutral\" ng-click=\"$slideHide()\">{{::customLabels.InsButtonCancel}}</button>\n                    <button class=\"nds-button nds-button_brand slds-button slds-button_brand\" ng-click=\"setCensusMembers()\">{{::customLabels.Save}}</button>\n                </footer>\n            </div>\n        </section>\n        <div class=\"nds-backdrop nds-backdrop_open slds-backdrop slds-backdrop_open\"></div>\n    </div>\n</script>\n\n<script type=\"text/ng-template\" id=\"confirmationTemplate.html\">\n    <section role=\"dialog\" tabindex=\"-1\" aria-labelledby=\"modal-heading-01\" aria-modal=\"true\" aria-describedby=\"modal-content-id-1\" class=\"nds-modal nds-fade-in-open slds-modal slds-fade-in-open\">\n        <div class=\"nds-modal__container slds-modal__container\">\n            <header class=\"nds-modal__header slds-modal__header\">\n                <button class=\"nds-button nds-button_icon nds-modal__close nds-button_icon-inverse slds-button slds-button_icon slds-modal__close slds-button_icon-inverse\" title=\"Close\" ng-click=\"$slideHide()\">\n                    <slds-svg-icon sprite=\"'utility'\" icon=\"'close'\" size=\"'medium'\" ></slds-svg-icon>\n                    <span class=\"nds-assistive-text slds-assistive-text\">Close</span>\n                </button>\n                <h2 id=\"modal-heading-01\" class=\"nds-modal__title nds-hyphenate slds-modal__title slds-hyphenate\">{{title}}</h2>\n            </header>\n            <div class=\"nds-modal__content nds-p-around_medium slds-modal__content slds-p-around_medium\" id=\"modal-content-id-1\">\n                <p>{{message}}</p>\n            </div>\n            <footer class=\"nds-modal__footer slds-modal__footer\">\n                <button class=\"nds-button nds-button_neutral slds-button slds-button_neutral\" ng-click=\"$slideHide()\">{{::customLabels.InsButtonCancel}}</button>\n                <button class=\"nds-button nds-button_brand slds-button slds-button_brand\" ng-click=\"onSave()\">{{::customLabels.OmniOK}}</button>\n            </footer>\n        </div>\n    </section>\n    <div class=\"nds-backdrop nds-backdrop_open slds-backdrop slds-backdrop_open\"></div>\n</script>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__Sass__c":".vloc-ins-xlsx-import {\n    border: none;\n    color: #fff;\n    background-color: #1663bf;\n    border-radius: 0.1875rem;\n    font-size: 0.875rem;\n    padding: 0.4375rem 0;\n    font-weight: 200;\n    margin: 0 0.75rem 0 1.5625rem;\n    width: 9rem;\n}\n\n@media screen and (max-width: 60rem) {\n    vloc-ins-xlsx-import {\n        margin: 0.625rem 0 0.625rem 0;\n    }\n}\n\n.vloc-ins-xlsx-import-label {\n    padding: 0.625rem 1.0625rem;\n    cursor: pointer;\n}\n\n.vloc-ins-xlsx-import-label:hover {\n    color: #fff;\n}\n\n.vloc-ins-xlsx-import-label:hover {\n    box-shadow: none;\n}\n\n.nds-form-element__control-help {\n    margin-bottom: 6.25rem;\n}\n\n.nds-header__desktop.hideCommonNav{\n    display: none;\n}\n\n.nds-size_1-of-1.nds-header__desktop.census-navigation {\n    display: block;\n    margin-bottom: -11.25rem;\n    margin-top: 9.375rem;\n    color: #556a8c;\n    font-size: .75rem;\n    font-weight: 300;\n}\n\n.vloc-ins-census-container {\n    width: 100%;\n}\n\n\ntr.vloc-ins-no-border td.vloc-ins-col-data, tr.vloc-ins-no-border td.vloc-ins-col-action{\n    border-top: none;\n}\n\n.vloc-ins-census-table {\n    \n    &-fields, &-actions, &-names{\n        th {\n            height: 2.5rem;\n        }\n        td {\n            height: 3.125rem;\n        }\n    }\n}\n\n.vloc-ins-col-action  {\n    min-width: 5rem;\n}\n\n.vloc-ins-census-table-container select.nds-select, .vloc-ins-census-table-container input[type=\"number\"].nds-input  {\n    min-width: 6.25rem;\n}\n\n.vloc-ins-header-summary {\n    text-align: center;\n}\n\n.vloc-ins-header-summary .vloc-ins-header-summary-count {\n    color: #00396b;\n    font-weight: 500;\n}\n\n@media screen and (max-width: 60rem) {\n    .vloc-ins-add-dependent button.vloc-ins-btn-add {\n        margin-bottom: 0.625rem;\n    }\n}\n\n.vloc-ins-hide-element {\n    display:none;\n}\n\n.vloc-ins-control-bar {\n    margin: 1.5rem 0;\n}\n\n.vloc-ins-control-bar .nds-grid_align-end .nds-col {\n    margin: 0.3125rem;\n}\n\n.nds-size_1-of-1.nds-header__mobile-only.vloc-ins-census-navigation {\n    display: block;\n}\n\n.nds-size_1-of-1.nds-header__desktop.vloc-ins-census-navigation {\n    display: block;\n    margin-bottom: -11.25rem;\n    margin-top: 9.375rem;\n    color: #556a8c;\n    font-size: .75rem;\n    font-weight: 300;\n}\n\n.vloc-ins-omni {\n    .vloc-modal-input-upload{\n        position: relative;\n        right: -2rem; \n        padding-bottom: 1rem;\n    }\n\n    .vloc-ins-nds-underline--gradient {\n        border-bottom: none;\n    }\n    .vloc-ins-nds-underline--gradient {\n        border-bottom: .05rem solid #cfd7e6;\n        min-height: 2.2rem;\n        background: linear-gradient(141deg, #05a6df, #1fc8db 51%, #50e3c2 75%);\n        font-size: 1.5rem;\n    }\n    .vloc-ins-nds-page_header {\n        font-size: 1.5rem;\n        min-height: 2rem;\n        height: 2rem;\n        padding: 0;\n        background: #fff;\n        color: #00396b;\n        border-radius: 0;\n        font-weight: 300;\n        border: none;\n        box-shadow: none;\n        text-align: left;\n        left: 0;\n        max-width: 100%;\n        line-height: 1;\n    }\n\n    div.vloc-control-wrapper {\n        position: relative;\n    }\n    .vloc-ins-nds__border.vlc-slds__border--primary {\n        border-color: #cfd7e6;\n    }\n    .vloc-control-wrapper {\n        min-height: 3rem;\n        font-size: 1rem;\n        color: #00396b;\n    }\n    .vloc-control-wrapper {\n        min-height: 3rem;\n        height: 3rem;\n    }\n    .vloc-ins-nds__border {\n        border-radius: 0.1875rem;\n        border: 0.0625rem solid #d8dde6;\n    }\n    .vloc-ins-nds-inline-control__label {\n        position: relative;\n        font-size: .9rem;\n        font-weight: 500;\n        color: #00396b;\n        padding-left: 0.475rem;\n    }\n}\n\n.vloc-ins-file-header-mapping-modal {\n    height: 40rem;\n}\n\n.vloc-ins-pagination{\n    display: flex;\n\n    li {\n        margin-left: .25rem;\n    }\n\n    .active{\n        text-decoration: underline;\n    }\n\n    .vloc-ins-nav {\n        width: 1rem;\n    }\n\n    .vloc-ins-active {\n        text-decoration: underline;\n        font-weight: 500;\n    }\n\n    .nds-button[disabled] {\n        color: #1663bf;\n    }\n}\n\n.nds-line-height_reset th {\n    text-transform: uppercase;\n}\n\n.via-nds .nds-datepicker {\n    position: fixed;\n    min-width: 21.125rem;\n}\n\n.vloc-ins-census-container .vloc-ins-notify-container{\n    .vloc-ins-toast-action {\n        color: white;\n        text-decoration: underline;\n    }\n}\n\n.vloc-ins-field {\n    &-date {\n        min-width: 5.75rem;\n    }\n\n    &-text {\n        min-width: 7.5rem;\n    }\n    \n}\n\n.vloc-ins-col-data div.vloc-ins-err-tooltip {\n    position: absolute;\n    bottom: 3.825rem; \n    left: 0; \n    \n    div.vloc-ins-err-details.nds-popover__body {\n        white-space: normal;\n        width: 20rem;\n    }\n}","%vlocity_namespace%__Type__c":"component","%vlocity_namespace%__Version__c":1,"Name":"ins-os-census-member-upload","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-census-member-upload/%vlocity_namespace%__VlocityUITemplate__c/ins-os-census-member-upload"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-census-member-upload","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-census-member-upload","VlocityDataPackName":"ins-os-census-member-upload","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".vloc-ins-file-upload-container {\n  position: relative;\n  width: 100%; }\n  .vloc-ins-file-upload-container .vloc-ins-file-upload-notify_container {\n    min-height: 2.5rem;\n    position: absolute;\n    visibility: hidden;\n    opacity: 0;\n    transition: visibility 0ms linear 150ms, position 0ms linear 150ms, opacity 150ms ease-in; }\n    .vloc-ins-file-upload-container .vloc-ins-file-upload-notify_container.active {\n      opacity: 1;\n      position: static;\n      visibility: visible;\n      transition: visibility 0ms linear 0ms, position 0ms linear 0ms, opacity 150ms ease-in; }\n","%vlocity_namespace%__CustomJavascript__c":"var self = this;\n\n// Notification object\nbaseCtrl.prototype.notification = {\n    active: false,\n    type: 'Notify',\n    message: ''\n};\n\nbaseCtrl.prototype.closeNotification = function() {\n    baseCtrl.prototype.notification.active = false;\n};\n\n// Need the control object in JS, grabbing it on template init\nbaseCtrl.prototype.init = function(control) {\n    baseCtrl.prototype.control = control;\n}\n\n// Directive on the file input element to handle upload after file is selected\nvlocity.cardframework.registerModule.directive('vlocInsFileUpload', function($q) {\n    return {\n        restrict: 'A',\n        require: 'ngModel',\n        link: function(scope, element, attrs, ngModel) {\n            if (!ngModel) return;\n            ngModel.$render = function() {};\n            element.bind('change', function(e) {\n                if (typeof Papa === 'undefined') {\n                    baseCtrl.prototype.notification.active = true;\n                    baseCtrl.prototype.notification.type = 'Error';\n                    baseCtrl.prototype.notification.message = 'The Papa Parse javascript library cannot be found.';\n                    element.val(null);\n                    scope.$digest();\n                    return;\n                }\n                element.parse({\n                    config: {},\n                    before: function(file, inputElem) {\n                        var sFileName = inputElem.value;\n                        baseCtrl.prototype.$scope.bpTree.response.tableData.rows = [];\n                        baseCtrl.prototype.notification = {\n                            active: false,\n                            type: 'Notify',\n                            message: ''\n                        };\n                        if (file.name.substr(file.name.length - 3, file.name.length).toLowerCase() !== 'csv') {\n                            baseCtrl.prototype.notification.active = true;\n                            baseCtrl.prototype.notification.type = 'Error';\n                            baseCtrl.prototype.notification.message = 'Sorry, ' + file.name + ' is invalid, only a csv file can be uploaded. Please choose the correct csv file.';\n                        } else {\n                            // Parse CSV\n                            Papa.parse(file, {\n                                header: true,\n                                dynamicTyping: true,\n                                complete: function(result) {\n                                    if (result.errors.length) {\n                                        baseCtrl.prototype.notification.active = true;\n                                        baseCtrl.prototype.notification.type = 'Error';\n                                        baseCtrl.prototype.notification.message = 'There has been an upload error.';\n                                    } else {\n                                        processUploadedData(result.data).then(function(data) {\n                                            // Successfully processed CSV\n                                            baseCtrl.prototype.$scope.bpTree.response.inputMap = {};\n                                            baseCtrl.prototype.$scope.bpTree.response.inputMap.tableData = baseCtrl.prototype.$scope.bpTree.response.tableData;\n                                            baseCtrl.prototype.$scope.bpTree.response.contextId = baseCtrl.prototype.$scope.bpTree.response.ContextId;\n                                            // Virtual button click of configured Remote Action within the OmniScript Step:\n                                            // Passing in 'typeAheadSearch' as the operation so the callback gets hit.\n                                            baseCtrl.prototype.$scope.buttonClick(baseCtrl.prototype.$scope.bpTree.response, baseCtrl.prototype.control, baseCtrl.prototype.$scope, undefined, 'typeAheadSearch', undefined, function(success) {\n                                                if (success) {\n                                                    // Callback is called after the data has been uploaded to the object (using contextId)\n                                                    baseCtrl.prototype.notification.active = true;\n                                                    baseCtrl.prototype.notification.type = 'Success';\n                                                    baseCtrl.prototype.notification.message = 'Successfully uploaded and processed ' + result.data.length + ' records from ' + file.name;\n                                                } else {\n                                                    baseCtrl.prototype.notification.active = true;\n                                                    baseCtrl.prototype.notification.type = 'Error';\n                                                    baseCtrl.prototype.notification.message = 'There has been an error saving the Census Data.';\n                                                }\n                                            });\n                                        }, function(error) {\n                                            baseCtrl.prototype.notification.active = true;\n                                            baseCtrl.prototype.notification.type = 'Error';\n                                            baseCtrl.prototype.notification.message = 'There has been an error: ' + error;\n                                        }, function(warning) {\n                                            baseCtrl.prototype.notification.active = true;\n                                            baseCtrl.prototype.notification.type = 'Notify';\n                                            baseCtrl.prototype.notification.message = warning;\n                                        });\n                                    }\n                                }\n                            });\n                        }\n                    },\n                    error: function(error, file, inputElem, reason) {\n                        baseCtrl.prototype.notification.active = true;\n                        baseCtrl.prototype.notification.type = 'Error';\n                        baseCtrl.prototype.notification.message = error + ': ' + reason;\n                    },\n                    complete: function() {\n                        // Clearing the file out of the input so it can be used again:\n                        element.val(null);\n                    }\n                });\n            });\n\n            function processUploadedData(data) {\n                var deferred = $q.defer();\n                var tableData = baseCtrl.prototype.$scope.bpTree.response.tableData;\n                angular.forEach(tableData.rows, function(row) {\n                    row.deleted = false;\n                    angular.forEach(tableData.headers, function(header) {\n                        self.validateData(header, row);\n                    });\n                });\n                angular.forEach(data, function(item) {\n                    self.addRowUpload(item);\n                });\n                if (!tableData.rows.length) {\n                    deferred.notify('No rows were processed from this CSV File.');\n                } else {\n                    if (!tableData || !tableData.rows) {\n                        deferred.reject('No rows array available.');\n                    } else {\n                        deferred.resolve(tableData);\n                    }\n                }\n                return deferred.promise;\n            }\n        }\n    };\n});\n\nthis.addRow = function(row) {\n    var tableData = baseCtrl.prototype.$scope.bpTree.response.tableData;\n    if (row.deleted === null) {\n        row.deleted = false;\n    }\n\n    if (row.rowKey === null) {\n        row.rowKey = Math.floor(Math.random() * 16777215).toString(16); // Random hexidecimal string    \n    }\n\n    // Add Hidden Values to every row as it is added, if it has a default.\n    // Hidden values are assumed to be the same across all rows\n    angular.forEach(tableData.headers, function(header) {\n        if (row[header.name] === null && header.defaultValue !== null) {\n            row[header.name] = header.defaultValue;\n        }\n    });\n    baseCtrl.prototype.$scope.bpTree.response.tableData.rows.push(row);\n};\n\nthis.addRowUpload = function(row) {\n    var tableData = baseCtrl.prototype.$scope.bpTree.response.tableData;\n    angular.forEach(tableData.headers, function(header) {\n        angular.forEach(row, function(value, key) {\n            if (header.label.toLowerCase() == key.toLowerCase()) {\n                row[header.name] = value;\n                delete row[key];\n            }\n        });\n    });\n    self.addRow(row);\n};\n\nthis.parseDate = function(date) {\n    if (date === null || date === '') {\n        return '';\n    }\n    return moment.utc(date).format('YYYY-MM-DD');\n};\n\nthis.validateData = function(header, row) {\n    if (header.type === 'DATE') {\n        row[header.name] = self.parseDate(row[header.name]);\n    }\n};","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-census-upload/1/Vlocity/1503349463132","%vlocity_namespace%__HTML__c":"<div class=\"vloc-ins-file-upload-container\" ng-init=\"baseCtrl.init(control)\">\n    <div class=\"slds-notify_container vloc-ins-file-upload-notify_container\" ng-class=\"{'active': baseCtrl.notification.active}\">\n        <div class=\"slds-notify slds-notify--alert slds-theme--alert-texture\" role=\"alert\" ng-class=\"{'slds-theme--success': baseCtrl.notification.type === 'Success', 'slds-theme--error': baseCtrl.notification.type === 'Error'}\">\n            <button class=\"slds-button slds-notify__close slds-button--icon-inverse\" title=\"Close\" ng-click=\"baseCtrl.closeNotification()\">\n                <slds-button-svg-icon size=\"'small'\" sprite=\"'utility'\" icon=\"'close'\" extra-classes=\"'slds-notify__close slds-button--icon-inverse'\"></slds-button-svg-icon>\n                <span class=\"slds-assistive-text\">Close</span>\n            </button>\n            <span class=\"slds-assistive-text\">{{baseCtrl.notification.message}}</span>\n            <h2>{{baseCtrl.notification.message}}</h2>\n        </div>\n    </div>\n    <div class=\"slds-form-element\">\n        <span class=\"slds-form-element__label\" id=\"vloc-upload-census\">Select the CSV File to Upload:</span>\n        <div class=\"slds-form-element__control\">\n            <div class=\"slds-file-selector slds-file-selector--files\">\n                <input type=\"file\" class=\"slds-file-selector__input slds-assistive-text\" accept=\".csv\" id=\"vloc-upload-census-input\" aria-describedby=\"vloc-upload-census\" ng-model=\"baseCtrl.selectedFile\" vloc-ins-file-upload />\n                <label class=\"slds-file-selector__body\" for=\"vloc-upload-census-input\">\n                    <span class=\"slds-file-selector__button slds-button slds-button--neutral\">\n                        <slds-button-svg-icon size=\"'small'\" sprite=\"'utility'\" icon=\"'upload'\" extra-classes=\"'slds-button__icon--left'\"></slds-button-svg-icon>\n                        Upload CSV File\n                    </span>\n                </label>\n            </div>\n        </div>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":".vloc-ins-file-upload-container {\n    position: relative;\n    width: 100%;\n\n    .vloc-ins-file-upload-notify_container {\n        min-height: 2.5rem;\n        position: absolute;\n        visibility: hidden;\n        opacity: 0;\n        transition: visibility 0ms linear 150ms,\n                    position 0ms linear 150ms,\n                    opacity 150ms ease-in;\n\n        &.active {\n            opacity: 1;\n            position: static;\n            visibility: visible;\n            transition: visibility 0ms linear 0ms,\n                        position 0ms linear 0ms,\n                        opacity 150ms ease-in;\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-census-upload","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-census-upload/%vlocity_namespace%__VlocityUITemplate__c/ins-os-census-upload"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-census-upload","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-census-upload","VlocityDataPackName":"ins-os-census-upload","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".via-slds .ins-os-confirmation-wrapper p {\n  margin-bottom: 1rem; }\n  .via-slds .ins-os-confirmation-wrapper p a {\n    color: #16325C; }\n\n.via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card {\n  border: 1px solid #0070D2;\n  background-color: #F8FBFE;\n  color: #16325C;\n  border-radius: 0.25rem;\n  padding: 1.25rem 1.5rem;\n  margin-bottom: 1.5rem;\n  line-height: 1.4; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card h3 {\n    font-weight: bold;\n    font-size: 1.25rem; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-amount-container {\n    text-align: right; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-annual-premium {\n    line-height: 1.75rem; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-value {\n    font-weight: bold; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-print-desktop a {\n    color: #01A7E1; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-print-mobile {\n    display: none; }\n    .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-print-mobile a {\n      color: #01A7E1; }\n\n.via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-items {\n  display: flex;\n  justify-content: space-between; }\n\n@media screen and (max-width: 650px) {\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-print-desktop {\n    display: none; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-print-mobile {\n    display: block; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-exp-date {\n    display: block; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-annual-premium {\n    text-align: left; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-m-top--x-small {\n    margin-top: 0.5rem; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-m-bottom--x-small {\n    margin-bottom: 0.5rem; } }\n","%vlocity_namespace%__CustomJavascript__c":"var insConfirmationMonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\nbaseCtrl.prototype.insConfirmationformatDate = function(date) {\n    var dateObj = new Date(date);\n    return insConfirmationMonths[dateObj.getUTCMonth()] + ' ' + dateObj.getUTCDate() + ', ' + dateObj.getUTCFullYear();\n};","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-confirmation/1/Vlocity/1509126559802","%vlocity_namespace%__HTML__c":"<div class=\"ins-os-confirmation-wrapper\" ng-if=\"control.vlcSI[control.itemsKey]\">\n    <div class=\"ins-os-confirmation-container\" ng-repeat=\"p in control.vlcSI[control.itemsKey]\">\n        <p>Congratulations!  Your payment has been approved, and your policy is now in force.  Please find your policy number and a link to print your evidence of insurance.</p>\n        <div class=\"slds-grid slds-wrap ins-os-confirmation-card ins-os-confirmation-items\">\n            <div class=\"slds-col\">\n                <div class=\"slds-size--2-of-2 slds-m-bottom--x-small ins-os-confirmation-m-bottom--x-small\">\n                    <span class=\"ins-os-confirmation-label\">Policy Number</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.confirmPolicyNumber}}</span>\n                </div>\n                <div class=\"slds-max-small-size--1-of-1 slds-size--1-of-2 slds-m-bottom--x-small ins-os-confirmation-m-bottom--x-small\">\n                    <h3>{{p.confirmProductName}}</h3>\n                </div>\n\n                <div class=\"slds-max-small-size--1-of-1 slds-size--3-of-4 slds-m-bottom--x-small ins-os-confirmation-m-bottom--x-small\">\n                    <span class=\"ins-os-confirmation-label\">Effective</span>\n                    <span class=\"ins-os-confirmation-value\">{{baseCtrl.insConfirmationformatDate(p.confirmEffectiveDate)}}</span>\n                    <span class=\"ins-os-confirmation-label\">through</span>\n                    <span class=\"ins-os-confirmation-value ins-os-confirmation-exp-date\">{{baseCtrl.insConfirmationformatDate(p.confirmExpirationDate)}}</span>\n                </div>\n                <div class=\"slds-size--2-of-2\">\n                    <span class=\"ins-os-confirmation-label\">Payable</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.confirmBillFrequency}}</span>\n                    <span class=\"ins-os-confirmation-label\">via</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.confirmPaymentName}}</span>\n                    <div class=\"break-on-mobile ins-os-confirmation-m-top--x-small slds-m-top--x-small\" ng-if=\"p.confirmAutoPay\">Your Policy will <strong>Auto Renew</strong></div>\n                </div>\n            </div>\n            <div class=\"slds-col ins-os-amount-container\">\n                <div class=\"slds-max-small-size--1-of-1 slds-m-bottom--x-small slds-text-align--right ins-os-confirmation-m-bottom--x-small ins-os-confirmation-annual-premium\">\n                    <span class=\"ins-os-confirmation-label\">Total Annual</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.totalAmount}} </span>\n                </div>\n                <div ng-if=\"p.confirmAnnualPremium\" class=\"slds-max-small-size--1-of-1 slds-m-bottom--x-small slds-text-align--right ins-os-confirmation-m-bottom--x-small ins-os-confirmation-annual-premium\">\n                    <span class=\"ins-os-confirmation-label\">Annual Premium</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.confirmAnnualPremium}}</span>\n                </div>\n                <div ng-if=\"p.totalTaxForTerm\" class=\"slds-max-small-size--1-of-1 slds-m-bottom--x-small slds-text-align--right ins-os-confirmation-m-bottom--x-small ins-os-confirmation-annual-premium\">\n                    <span class=\"ins-os-confirmation-label\">Taxes</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.totalTaxForTerm}}</span>\n                </div>\n                <div ng-if=\"p.totalFeeForTerm\" class=\"slds-max-small-size--1-of-1 slds-m-bottom--x-small slds-text-align--right ins-os-confirmation-m-bottom--x-small ins-os-confirmation-annual-premium\">\n                    <span class=\"ins-os-confirmation-label\">Fees</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.totalFeeForTerm}}</span>\n                </div>\n            </div>\n        </div>\n        <p>We look forward to serving you as your insurance needs evolve.  Please contact us at <a href=\"https://www.vlocity.com/\" target=\"_blank\"><strong>www.vlocity.com</strong></a>, via email at <a href=\"mailto:customerservice@vlocity.com\"><strong>customerservice@vlocity.com</strong></a> or or via phone at <a href=\"tel:18448562489\"><strong>888.Vlocity</strong></a> if we can be of assistance.</p>\n    </div>\n</div>\n","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":".via-slds {\n    .ins-os-confirmation-wrapper {\n        p {\n            margin-bottom: 1rem;\n            \n            a {\n                color: #16325C;\n            }\n        }\n        \n        .ins-os-confirmation-card {\n            border: 1px solid #0070D2;\n            background-color: #F8FBFE;\n            color: #16325C;\n            border-radius: 0.25rem;\n            padding: 1.25rem 1.5rem;\n            margin-bottom: 1.5rem;\n            line-height: 1.4;\n\n            h3 {\n                font-weight: bold;\n                font-size: 1.25rem;\n            }\n            .ins-os-amount-container {\n                text-align: right;\n            }\n\n            .ins-os-confirmation-annual-premium {\n                line-height: 1.75rem;\n            }\n\n            .ins-os-confirmation-value {\n                font-weight: bold;\n            }\n\n            .ins-os-confirmation-print-desktop {\n                a {\n                    color: #01A7E1;\n                }\n            }\n\n            .ins-os-confirmation-print-mobile {\n                display: none;\n\n                a {\n                    color: #01A7E1;\n                }\n            }\n        }\n\n        .ins-os-confirmation-items {\n            display: flex;\n            justify-content: space-between;\n        }\n    }\n\n    @media screen and (max-width: 650px) {\n        .ins-os-confirmation-wrapper {\n            .ins-os-confirmation-card {\n                .ins-os-confirmation-print-desktop {\n                    display: none;\n                }\n\n                .ins-os-confirmation-print-mobile {\n                    display: block;\n                }\n\n                .ins-os-confirmation-exp-date {\n                    display: block;\n                }\n\n                .ins-os-confirmation-annual-premium {\n                    text-align: left;\n                }\n\n                .ins-os-confirmation-m-top--x-small {\n                    margin-top: 0.5rem;\n                }\n\n                .ins-os-confirmation-m-bottom--x-small {\n                    margin-bottom: 0.5rem;\n                }\n            }\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-confirmation","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-confirmation/%vlocity_namespace%__VlocityUITemplate__c/ins-os-confirmation"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-confirmation","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-confirmation","VlocityDataPackName":"ins-os-confirmation","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".via-nds .nds-spinner_container {\n  z-index: 9999; }\n\n.via-nds .vloc-validation-icon svg {\n  fill: #000000; }\n\n.via-nds .vloc-ins-multi-item-child-customize-container .vloc-ins-multi-item-toggle-plan-details {\n  position: absolute;\n  z-index: 6;\n  top: 1.8rem;\n  left: 4rem;\n  border: none;\n  margin: 0;\n  padding: 0 0.25rem;\n  text-align: left;\n  line-height: 1.8;\n  font-size: 0.875rem;\n  width: auto; }\n  .via-nds .vloc-ins-multi-item-child-customize-container .vloc-ins-multi-item-toggle-plan-details.menu-open {\n    z-index: 4; }\n\n.via-nds .vloc-ins-multi-item-child-customize-container .vloc-ins-multi-item-child-customize {\n  transition: height 250ms cubic-bezier(0.65, 0.05, 0.36, 1);\n  overflow: hidden;\n  position: relative;\n  z-index: 1; }\n  .via-nds .vloc-ins-multi-item-child-customize-container .vloc-ins-multi-item-child-customize:not(.in) {\n    height: 0 !important; }\n  .via-nds .vloc-ins-multi-item-child-customize-container .vloc-ins-multi-item-child-customize.in {\n    height: auto; }\n\n.via-nds .vloc-ins-coverages-container {\n  width: 100%;\n  margin: 0; }\n  .via-nds .vloc-ins-coverages-container .vloc-ins-product-name {\n    font-size: 1.25rem;\n    font-weight: 400;\n    padding: 0 0.65rem 0.75rem; }\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card {\n    background-color: #F8FBFE;\n    position: relative; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-heading {\n      padding-left: 0.625rem; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverage-custom-image {\n      width: 2rem;\n      height: auto; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card input {\n      min-height: 0;\n      max-height: 2rem;\n      height: auto; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .nds-checkbox__label .nds-form-element__label {\n      display: inline-block; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverage-main-heading h2 {\n      font-weight: 400; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper {\n      transition: background-color 150ms ease-in, border-color 150ms ease-in; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-total {\n        font-size: 1.25rem;\n        display: flex;\n        align-items: flex-end; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .nds-media__figure .nds-icon_container {\n        background: transparent; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .nds-media__figure .nds-icon_container .nds-icon {\n          fill: #0070D2;\n          margin: -0.5rem; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .vloc-ins-coverage-child-name-description-container {\n        padding-bottom: 0.25rem; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .vloc-ins-coverage-child-name-description-container .nds-text-body--regular {\n          line-height: 1.4;\n          font-size: 1rem;\n          font-weight: 100; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .vloc-ins-coverages-child-name {\n        font-weight: bold;\n        font-size: 1.4rem;\n        color: #16325C; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .vloc-ins-coverages-child-description {\n        font-style: italic;\n        color: #6187C0; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container.has-price {\n        margin-bottom: 0.5rem; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container.has-price .vloc-ins-coverage-child-name-description-container {\n          border-bottom: 1px solid #e6f1fb; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container {\n        max-height: 0;\n        overflow: hidden;\n        transition: max-height 250ms cubic-bezier(0.65, 0.05, 0.36, 1), padding 250ms cubic-bezier(0.65, 0.05, 0.36, 1);\n        border-bottom: 1px solid #d8dde6; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container .vloc-product-attribute-category {\n          margin-bottom: 0;\n          position: relative; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container .vloc-product-attribute-category.last {\n            margin-bottom: 0.5rem; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container .vloc-ins-coverages-collapse-toggle {\n          position: absolute;\n          height: 2rem;\n          width: 100%;\n          bottom: 0;\n          left: 0;\n          text-align: center;\n          font-size: 0.75rem;\n          line-height: 2rem;\n          user-select: none;\n          cursor: pointer;\n          background-color: transparent;\n          transition: background-color 150ms ease-in; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container .vloc-ins-coverages-collapse-toggle:hover {\n            background-color: #ebf3fc; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container .vloc-ins-coverages-collapse-toggle .toggle-label .toggle-show {\n            display: inline; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container .vloc-ins-coverages-collapse-toggle .toggle-label .toggle-hide {\n            display: none; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container .vloc-ins-coverages-collapse-toggle .nds-icon {\n            transition: transform 150ms ease-in;\n            position: relative;\n            top: -1px; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container.in {\n          max-height: 150rem;\n          padding: 0 0 0.25rem 0;\n          overflow: visible; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container.in.in-add-active {\n            overflow: hidden; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container.in .vloc-ins-coverages-collapse-toggle .toggle-label .toggle-show {\n            display: none; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container.in .vloc-ins-coverages-collapse-toggle .toggle-label .toggle-hide {\n            display: inline; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container.in .vloc-ins-coverages-collapse-toggle .nds-icon {\n            transform: rotate(180deg); }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container.accordion-toggle-active .vloc-product-attribute-category.last {\n          margin-bottom: 0; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.accordion-active {\n        position: relative;\n        padding-bottom: 2rem; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.accordion-active .vloc-product-attribute-category-container {\n          border-bottom: none; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.accordion-active .vloc-product-attribute-category-container .vloc-ins-coverages-collapse-toggle {\n            border-bottom: 1px solid #d8dde6; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.optional-coverage {\n        background-color: transparent;\n        border-color: transparent;\n        border-radius: 0.25rem;\n        background-color: #F8FBFE; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.optional-coverage:hover {\n          border-color: #00559f; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.optional-coverage.accordion-active .vloc-product-attribute-category-container {\n          border-bottom: none; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.optional-coverage.accordion-active .vloc-product-attribute-category-container .vloc-ins-coverages-collapse-toggle {\n            border-bottom: none; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.optional-coverage .vloc-ins-coverages-optional-checkbox .vloc-ins-coverages-optional-checkbox-label {\n          cursor: pointer; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.optional-coverage-selected {\n        cursor: pointer; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.optional-coverage-selected.accordion-active .vloc-product-attribute-category-container .vloc-ins-coverages-collapse-toggle {\n          border-bottom: 1px solid #d8dde6; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container {\n      max-height: 0;\n      overflow: hidden;\n      transition: max-height 250ms cubic-bezier(0.65, 0.05, 0.36, 1); }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container.toggle-categories {\n        position: relative;\n        padding-top: 1.25rem; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container .vloc-product-attribute-category-name {\n        font-weight: 400;\n        font-size: 0.9375rem; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container .vloc-product-attribute-category-name.accordion-toggle {\n          cursor: pointer;\n          position: absolute;\n          top: 0;\n          left: 0;\n          color: #49739c;\n          transition: color 150ms ease-in; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container .vloc-product-attribute-category-name.accordion-toggle .nds-icon {\n            transition: transform 150ms ease-in;\n            position: relative;\n            fill: #49739c;\n            transition: fill 150ms ease-in;\n            top: -1px; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container .vloc-product-attribute-category-name.accordion-toggle:hover {\n            color: #395979; }\n            .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container .vloc-product-attribute-category-name.accordion-toggle:hover .nds-icon {\n              fill: #395979; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container.in {\n        max-height: 100rem;\n        overflow: visible; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container.in.in-add-active {\n          overflow: hidden; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container.in .vloc-product-attribute-category-name.accordion-toggle .nds-icon {\n          transform: rotate(90deg); }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category.category-accordion {\n      border-bottom: 1px solid #dfe6ed;\n      margin: 0 9.5rem 0.75rem 5rem;\n      padding: 0.75rem 0 0.5rem; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category.category-accordion.last {\n        padding-bottom: 0;\n        border-bottom: none; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category.category-accordion .vloc-ins-coverages-coverage-row {\n        margin: 0 0.5rem 0 1.5rem; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.optional-coverage {\n      padding-bottom: 0.75rem;\n      background-color: transparent;\n      border: none; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.optional-coverage .vloc-ins-coverages-heading {\n        padding-top: 0.75rem; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.optional-coverage .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container {\n        border-bottom: none; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.added-optional-coverage {\n      background-color: #F8FBFE;\n      padding: 0; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.added-optional-coverage.optional-coverage .vloc-ins-coverages-card-inner-wrapper {\n        margin-left: 1rem;\n        margin-right: 1rem; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.added-optional-coverage.optional-coverage .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-optional-checkbox .nds-checkbox [type=checkbox][disabled] + .nds-checkbox__label .nds-checkbox--faux {\n          background-color: #0070D2; }\n          .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.added-optional-coverage.optional-coverage .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-optional-checkbox .nds-checkbox [type=checkbox][disabled] + .nds-checkbox__label .nds-checkbox--faux:after {\n            border-color: white; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.last-non-optional {\n      background-color: #F8FBFE;\n      padding-bottom: 0;\n      margin-bottom: 0.75rem; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.last-non-optional .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container {\n        border-bottom: none; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.parent-product .vloc-ins-coverages-card-inner-wrapper {\n      border: none;\n      border-bottom: 1px solid rgba(0, 112, 210, 0.5);\n      padding-bottom: 0.25rem; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.parent-product .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header .vloc-ins-coverages-child-name {\n        font-size: 1.5rem; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.parent-product .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header .vloc-ins-coverages-child-description {\n        color: #16325C; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.parent-product .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container {\n        border-bottom: none; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.only-root {\n      border-bottom: 1px solid #0070D2;\n      border-radius: 0.25rem;\n      margin-bottom: 1rem; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card.only-root.parent-product .vloc-ins-coverages-card-inner-wrapper {\n        border-bottom: none; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage .vloc-ins-coverages-card-inner-wrapper {\n      background-color: #ecf2fa;\n      transition: background-color 150ms ease-in, border-color 150ms ease-in; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage .vloc-ins-coverages-card-inner-wrapper.optional-coverage {\n        background-color: #ecf2fa; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage .vloc-ins-coverages-card-inner-wrapper.optional-coverage:hover {\n          border-color: #19355E; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header .vloc-ins-coverages-child-name {\n        color: #16325C; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header .vloc-ins-coverages-child-description {\n        color: #6187C0; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container .vloc-ins-coverages-collapse-toggle:hover {\n        background-color: #ebf3fc; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container .vloc-product-attribute-category-name.accordion-toggle {\n      color: #49739c; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container .vloc-product-attribute-category-name.accordion-toggle .nds-icon {\n        fill: #49739c; }\n      .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container .vloc-product-attribute-category-name.accordion-toggle:hover {\n        color: #395979; }\n        .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage .vloc-product-attribute-category .vloc-ins-coverages-coverage-row-container .vloc-product-attribute-category-name.accordion-toggle:hover .nds-icon {\n          fill: #395979; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card:hover.optional-coverage.parent-product .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header .vloc-ins-coverages-child-description {\n      color: #16325C; }\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-total span {\n    font-weight: 400; }\n\n@media screen and (max-width: 767px) {\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category, .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category.category-accordion {\n    margin: 0 4.5rem 0.75rem 5rem; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-row, .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category.category-accordion .vloc-ins-coverages-coverage-row {\n      margin: 0; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category .vloc-ins-coverages-coverage-limit .nds-select, .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category.category-accordion .vloc-ins-coverages-coverage-limit .nds-select {\n      font-size: 16px; } }\n\n@media screen and (max-width: 600px) {\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card {\n    padding: 0; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category, .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category.category-accordion {\n      margin: 0 1rem 0.75rem 1.5rem; } }\n\n@media screen and (max-width: 500px) {\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverage-main-heading h2 {\n    font-size: 24px; }\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-total {\n    font-size: 20px; }\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper {\n    margin-left: 0;\n    margin-right: 0; } }\n\n@media screen and (max-width: 450px) {\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container {\n    padding-left: 1rem;\n    padding-right: 1rem;\n    position: relative;\n    padding-bottom: 0; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .nds-media__figure {\n      margin-right: 0.75rem; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .vloc-ins-coverage-custom-image {\n      width: 1.5rem; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .vloc-ins-coverages-child-name {\n      font-size: 16px; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .vloc-ins-coverages-child-description {\n      font-size: 12px; }\n    .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container .vloc-ins-coverages-header .vloc-ins-coverage-child-name-description-container .nds-text-body--regular {\n      font-size: .7rem; }\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-total {\n    font-size: 14px; }\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-coverage-limit .nds-select {\n    font-size: 14px; } }\n\n@media screen and (max-width: 350px) {\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container {\n    padding-left: 0.75rem;\n    padding-right: 0.75rem; } }\n\n.via-slds .slds-spinner_container {\n  z-index: 9999; }\n\n.via-slds .slds-slider {\n  display: -ms-flexbox;\n  display: flex;\n  position: relative;\n  font-size: 0.8125rem; }\n\n.via-slds input[type=range].slds-slider__range {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  width: 100%;\n  margin: 0.5rem 0;\n  background: transparent;\n  border-radius: 0.125rem;\n  padding: 0; }\n  .via-slds input[type=range].slds-slider__range:focus {\n    outline: 0; }\n  .via-slds input[type=range].slds-slider__range::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 1rem;\n    height: 1rem;\n    border-radius: 50%;\n    background: #1589ee;\n    border: 0;\n    box-shadow: rgba(0, 0, 0, 0.16) 0 2px 3px;\n    cursor: pointer;\n    transition: background 0.15s ease-in-out;\n    margin-top: 2px; }\n    .via-slds input[type=range].slds-slider__range::-webkit-slider-thumb:hover {\n      background-color: #0070d2; }\n  .via-slds input[type=range].slds-slider__range::-webkit-slider-runnable-track {\n    width: 100%;\n    height: 4px;\n    cursor: pointer;\n    background: #ecebea;\n    border-radius: 0.125rem; }\n  .via-slds input[type=range].slds-slider__range::-moz-range-thumb {\n    -moz-appearance: none;\n    appearance: none;\n    width: 1rem;\n    height: 1rem;\n    border-radius: 50%;\n    background: #1589ee;\n    border: 0;\n    box-shadow: rgba(0, 0, 0, 0.16) 0 2px 3px;\n    cursor: pointer;\n    transition: background 0.15s ease-in-out; }\n    .via-slds input[type=range].slds-slider__range::-moz-range-thumb:hover {\n      background-color: #0070d2; }\n  .via-slds input[type=range].slds-slider__range::-moz-range-track {\n    width: 100%;\n    height: 4px;\n    cursor: pointer;\n    background: #ecebea;\n    border-radius: 0.125rem; }\n  .via-slds input[type=range].slds-slider__range::-ms-track {\n    width: 100%;\n    height: 4px;\n    cursor: pointer;\n    background: #ecebea;\n    border-radius: 0.125rem;\n    width: 100%;\n    background: transparent;\n    border-color: transparent;\n    color: transparent;\n    cursor: pointer; }\n  .via-slds input[type=range].slds-slider__range::-ms-thumb {\n    appearance: none;\n    width: 1rem;\n    height: 1rem;\n    border-radius: 50%;\n    background: #1589ee;\n    border: 0;\n    box-shadow: rgba(0, 0, 0, 0.16) 0 2px 3px;\n    cursor: pointer;\n    transition: background 0.15s ease-in-out; }\n    .via-slds input[type=range].slds-slider__range::-ms-thumb:hover {\n      background-color: #0070d2; }\n  .via-slds input[type=range].slds-slider__range:focus::-webkit-slider-thumb, .via-slds input[type=range].slds-slider__range:focus::-moz-range-thumb {\n    background-color: #0070d2;\n    box-shadow: 0 0 3px #0070D2; }\n  .via-slds input[type=range].slds-slider__range:active::-webkit-slider-thumb, .via-slds input[type=range].slds-slider__range:active::-moz-range-thumb {\n    background-color: #0070d2; }\n  .via-slds input[type=range].slds-slider__range[disabled]::-webkit-slider-thumb {\n    background-color: #ecebea;\n    cursor: default; }\n  .via-slds input[type=range].slds-slider__range[disabled]::-webkit-slider-runnable-track {\n    background-color: #ecebea;\n    cursor: default; }\n  .via-slds input[type=range].slds-slider__range[disabled]::-moz-range-thumb {\n    background-color: #ecebea;\n    cursor: default; }\n  .via-slds input[type=range].slds-slider__range[disabled]::-moz-range-track {\n    background-color: #ecebea;\n    cursor: default; }\n  .via-slds input[type=range].slds-slider__range[disabled]::-ms-thumb {\n    background-color: #ecebea;\n    cursor: default; }\n  .via-slds input[type=range].slds-slider__range[disabled]::-ms-track {\n    background-color: #ecebea;\n    cursor: default; }\n\n.via-slds .slds-slider__value {\n  padding: 0 0.5rem; }\n\n.via-slds .slds-slider-label__label {\n  display: block; }\n\n.via-slds .slds-slider_vertical {\n  height: 13.875rem; }\n  .via-slds .slds-slider_vertical .slds-slider__range {\n    width: 12rem;\n    height: 1rem;\n    transform: rotate(-90deg);\n    transform-origin: 6rem 6rem; }\n  .via-slds .slds-slider_vertical .slds-slider__value {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    padding: 0; }\n","%vlocity_namespace%__CustomJavascript__c":"/* jshint esversion: 6 */\nlet insConfigCustomEventName = 'vloc-os-ins-config-product-set-' + Math.round((new Date()).getTime() / 1000);\nlet insConfigLoadedOnce;\nbaseCtrl.prototype.setSelectedProducts = function(control) {\n    let event = new CustomEvent(insConfigCustomEventName, {'detail': control.vlcSI[control.itemsKey]});\n    baseCtrl.prototype.$scope.currentConfigElementName = control.name;\n    if (!baseCtrl.prototype.$scope.insConfigControlRef) {\n        baseCtrl.prototype.$scope.insConfigControlRef = {};\n    }\n    baseCtrl.prototype.$scope.insConfigControlRef[baseCtrl.prototype.$scope.currentConfigElementName] = control;\n    if (baseCtrl.prototype.vlocOSInsConfigProductSet && baseCtrl.prototype.vlocOSInsConfigProductSet.timestamp !== control.vlcSI[control.itemsKey][0].timestamp) {\n        document.dispatchEvent(event);\n    }\n    if (!baseCtrl.prototype.vlocOSInsConfigProductSet) {\n        baseCtrl.prototype.vlocOSInsConfigProductSet = {};\n    }\n    baseCtrl.prototype.vlocOSInsConfigProductSet.root = control.vlcSI[control.itemsKey];\n};\n\nvlocity.cardframework.registerModule.controller('insCoveragesCtrl', ['$scope', '$rootScope', '$timeout', '$q', function($scope, $rootScope, $timeout, $q) {\n    'use strict';\n    // Need to clear out rules object so it can track data within this scope:\n    $rootScope.attributeUserValues = {};\n    $rootScope.evalProductsArray = [];\n    // Instantiating sortedCoverages map that will contain products stored by key that is repeated over in the UI\n    $scope.sortedCoverages = {};\n    // Template Config Options:\n    $scope.insCoveragesConfig = {\n        showParentProduct: true, // Show Parent Product in UI\n        remoteMethod: false, // Boolean to decide whether we can call buttonClick from JS (set to true in setSelectedOption)\n        callButtonClick: true, // Manually turn the automatic remote call off even if the class and method are set\n        coverageAccordion: true, // Turn on/off accordion on coverages\n        coverageAccordionMinAttrs: 2, // The number of minimum coverage attributes needed (throughout all categories) to trigger an accordion if attrCatAccordion is false\n        attrCatAccordion: false, // Turn on/off accordion and category name for attribute categories (the accordion will automatically be off if only 1 category, but category name will remain if this is true). To keep category names, but disable the accordions, set 'coverageAccordionMinAttrs' to an unattainably high number\n        attrCatAccordionMinCats: 2 // The number of minimum attribute categories needed to trigger a category accordion if attrCatAccordion is true\n    };\n    $scope.bpTreeResponse = {};\n    // Flags to determine whether to recalculate coverages\n    $scope.calcConfig = {\n        disableAutoCalculate: false,\n        triggerCalculate: false,\n        calculationDone: true\n    };\n\n    $scope.validationMessages = [];\n\n    $scope.currencyCode = '$';\n    if (baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol) {\n        $scope.currencyCode = baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol;\n    }\n\n    // Listening for a new product selection if the user goes previous and selects a new product\n    function listenForConfigEvent(e) {\n        // Unflattened products/coverages\n        $scope.productsList = e.detail;\n        // Need to clear out rules object so it can track data within this scope:\n        $rootScope.attributeUserValues = {};\n        $rootScope.evalProductsArray = [];\n        // Instantiating sortedCoverages map that will contain products stored by key that is repeated over in the UI\n        $scope.sortedCoverages = {};\n        document.removeEventListener(insConfigCustomEventName, listenForConfigEvent);\n        insConfigCustomEventName = 'vloc-os-ins-config-product-set-' + Math.round((new Date()).getTime() / 1000);\n        document.addEventListener(insConfigCustomEventName, listenForConfigEvent);\n        // If these coverages are used in the multi-auto flow, we need to refresh this function on back/forth\n        if ($scope.initMultiAuto) {\n            $scope.initMultiAuto();\n        }\n        $scope.createData($scope.productsList, baseCtrl.prototype.$scope.bpTree.response, true);\n    }\n    if (!insConfigLoadedOnce) {\n        document.addEventListener(insConfigCustomEventName, listenForConfigEvent);\n    } else {\n        insConfigCustomEventName = 'vloc-os-ins-config-product-set-' + Math.round((new Date()).getTime() / 1000);\n        document.addEventListener(insPsCustomEventName, listenForConfigEvent);\n    }\n\n    $scope.changeCoverageChain = {\n        moreQueued: [],\n        currentSetValues: [] // stored as product.ProductCode + '.' + attribute.code\n    };\n    document.addEventListener('vloc-ins-attribute-rule-set-value', function(e) {\n        let prodDotAttr = e.detail.product.ProductCode + '.' + e.detail.attribute.code;\n        let idx = $scope.changeCoverageChain.currentSetValues.indexOf(prodDotAttr);\n        if (idx > -1 && e.detail.attribute.ruleSetValue) {\n            return;\n        } else if (idx > -1 && !e.detail.attribute.ruleSetValue) {\n            $scope.changeCoverageChain.currentSetValues.splice(idx, 1);\n            $scope.changeCoverageChain.moreQueued.splice(idx, 1);\n        }\n        $scope.changeCoverageChain.currentSetValues.push(prodDotAttr);\n        $scope.changeCoverageChain.moreQueued.push({\n            product: angular.copy(e.detail.product),\n            attribute: angular.copy(e.detail.attribute)\n        });\n    });\n\n    function generateHashKey(idxs, factor) {\n        let hashKey = 'insobject:' + (parseInt(idxs) + 1) * factor;\n        return hashKey + factor + Math.ceil(Math.random() * 100000);\n    }\n\n    // Adds hash keys to products, also syncs prices\n    /**\n     * @param {Array} products Current level of products\n     * @param {Function} [callback]\n     * @param {Number} [factor] Used for hash generation\n     * @param {String} [passedProductName] Used for adding parent product name\n     */\n    function addHashKeys(products, callback, factor, passedProductName) {\n        const isRootProduct = products[0].RecordTypeName__c === 'Product' || products[0][$scope.nsPrefix + 'RecordTypeName__c'] === 'Product';\n        if (isRootProduct) {\n            $scope.productsList[0].Price = products[0].Price;\n            if (products[0].CalculatedPriceData) {\n                $scope.productsList[0].CalculatedPriceData = products[0].CalculatedPriceData;\n            }\n            if (products[0].totalSumInsured) {\n                $scope.productsList[0].totalSumInsured = products[0].totalSumInsured;\n            }\n            if (products[0].RawPriceData) {\n                $scope.productsList[0].RawPriceData = products[0].RawPriceData;\n            }\n        }\n        factor = factor || 1;\n        for (let i = 0; i < products.length; i++) {\n            const product = products[i];\n            if (!product.$$hashKey) {\n                // Need to make a dummy $$hashKey because OS needs it, but I can't use the angular generated ones\n                // because I need to use track by in my ng-repeats to retain databinding on buttonClick for Rules\n                product.$$hashKey = generateHashKey(i, factor);\n            }\n            if (passedProductName) {\n                product.parentProductName = passedProductName;\n            }\n            if (_.has(product, 'attributeCategories.records.length')) {\n                for (let j = 0; j < product.attributeCategories.records.length; j++) {\n                    const attrCat = product.attributeCategories.records[j];\n                    if (!attrCat.$$hashKey) {\n                        attrCat.$$hashKey = generateHashKey(i + j, factor);\n                    }\n                    if (_.has(attrCat, 'productAttributes.records.length')) {\n                        for (let k = 0; k < attrCat.productAttributes.records.length; k++) {\n                            const prodAttr = attrCat.productAttributes.records[k];\n                            if (!prodAttr.$$hashKey && prodAttr.constructor === Object) {\n                                prodAttr.$$hashKey = generateHashKey(i + j + k, factor);\n                            }\n                            if (prodAttr.userValues && prodAttr.userValues !== null && prodAttr.userValues.constructor === Array) {\n                                for (let l = 0; l < prodAttr.userValues.length; l++) {\n                                    const userValue = prodAttr.userValues[l];\n                                    if (!userValue.$$hashKey && userValue.constructor === Object) {\n                                        userValue.$$hashKey = generateHashKey(i + j + k + l, factor);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            // Child Products\n            if (_.has(product, 'childProducts.records.length')) {\n                addHashKeys(product.childProducts.records, callback, factor * 3, product.instanceKey || product.productName || product.Name);\n            } else if (callback && i === products.length - 1) {\n                callback(products);\n            }\n        }\n    }\n\n    // Helper function to loop through service result\n    function loopThroughAttributes(products, isChildProducts) {\n        let selectedCount = 0;\n        let nonCoverageProducts = [];\n        let returnObj = {};\n        for (let i = 0; i < products.length; ++i) {\n            let product = products[i];\n            product.originalIndex = i;\n            // Need to remove the child products that are not of RecordTypeName__c === \"CoverageSpec\" so the rest of\n            // the UI data setup will work properly\n            if (isChildProducts && ((!product.RecordTypeName__c && !product[$scope.nsPrefix + 'RecordTypeName__c']) || (product.RecordTypeName__c !== 'CoverageSpec' && product[$scope.nsPrefix + 'RecordTypeName__c'] !== 'CoverageSpec'))) {\n                nonCoverageProducts.push(i);\n            } else if (product.attributeCategories) {\n                let attrCats = product.attributeCategories.records;\n                if (attrCats) {\n                    if (!product.numberCategories) {\n                        product.numberCategories = attrCats.length;\n                    } else {\n                        product.numberCategories += attrCats.length;\n                    }\n                    for (let j = 0; j < attrCats.length; j++) {\n                        let attrCat = attrCats[j];\n                        if (attrCat.productAttributes) {\n                            let prodAttrs = attrCat.productAttributes.records;\n                            if (prodAttrs) {\n                                if (!product.numberAttributes) {\n                                    product.numberAttributes = prodAttrs.length;\n                                } else {\n                                    product.numberAttributes += prodAttrs.length;\n                                }\n                                for (let k = 0; k < prodAttrs.length; k++) {\n                                    let prodAttr = prodAttrs[k];\n                                    prodAttr.originalProductIndex = i;\n                                    prodAttr.originalCategoryIndex = j;\n                                    prodAttr.originalAttributeIndex = k;\n                                    if (prodAttr.userValues && prodAttr.userValues !== null && typeof prodAttr.userValues === 'object' && prodAttr.userValues.length) {\n                                        selectedCount = 0;\n                                        for (let l = 0; l < prodAttr.userValues.length; l++) {\n                                            let userValue = prodAttr.userValues[l];\n                                            for (let key in userValue) {\n                                                if (userValue[key]) {\n                                                    selectedCount++;\n                                                }\n                                            }\n                                        }\n                                        prodAttr.multiSelectLabel = selectedCount + ' Selected';\n                                    }\n                                    // If dropdown has only 1 option, show as readonly\n                                    if (prodAttr.inputType === 'dropdown' && prodAttr.values && prodAttr.values.length === 1) {\n                                        prodAttr.readonly = true;\n                                    }\n                                    if (prodAttr.inputType === 'dropdown' || prodAttr.inputType === 'radio' || prodAttr.multiselect) {\n                                        // If dropdown has only 1 option, show as readonly\n                                        if (prodAttr.values && prodAttr.values.length === 1) {\n                                            prodAttr.readonly = true;\n                                        }\n                                        // Update labelAndValue with display value for when dropdown is readonly\n                                        for (let i = 0; i < prodAttr.values.length; i++) {\n                                            const val = prodAttr.values[i];\n                                            if (prodAttr.userValues === val.value) {\n                                                prodAttr.value = val.label;\n                                                break;\n                                            } else if (prodAttr.userValues !== null && prodAttr.userValues.toString() === val.value){\n                                                prodAttr.value = val.label;\n                                                // Change userValues from number to string to match picklist dropdowns\n                                                prodAttr.userValues = prodAttr.userValues.toString();\n                                                break;  \n                                            }\n                                        }\n                                        prodAttr.labelAndValue = {\n                                            label: prodAttr.label,\n                                            valueLabel: prodAttr.value\n                                        }\n                                    }\n\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (product.childProducts && product.childProducts.records && isChildProducts) {\n                return loopThroughAttributes(product.childProducts.records, true);\n            }\n        }\n        returnObj = {\n            products: products,\n            nonCoverageCount: nonCoverageProducts.length\n        };\n        return returnObj;\n    }\n\n    // Sorts by root product, insured items, coverages\n    /**\n     * @param {Object} x\n     * @param {Object} y\n     */\n    function sortCoverages(x, y) {\n        if (x.RecordTypeName__c === 'Product' || x[$scope.nsPrefix + 'RecordTypeName__c'] === 'Product') {\n            return -1;\n        } else if (y.RecordTypeName__c !== 'CoverageSpec' && y[$scope.nsPrefix + 'RecordTypeName__c'] !== 'CoverageSpec') {\n            return 1;\n        }\n        if (x.isSelected === y.isSelected) {\n            if (x.displaySequence === y.displaySequence) {\n                if (x.Name < y.Name) {\n                    return -1;\n                } else {\n                    return 1;\n                }\n            } else if (x.displaySequence < y.displaySequence) {\n                return -1;\n            } else {\n                return 1;\n            }\n        } else if (x.isSelected < y.isSelected) {\n            return 1;\n        } else {\n            return -1;\n        }\n    }\n\n    // Format and sort coverages so sortedCoverages can be repeated over in the UI (called on init)\n    /**\n     * @param {Array} products\n     * @param {Object} [rootProduct] Product set used for adding the root product in basic coverages flow\n     */\n    function formatData(products, rootProduct) {\n        let coveragesAfterLoop;\n        let foundFirstOptional = false;\n        let productsReference = loopThroughAttributes(products).products;\n        if (productsReference[0].childProducts && productsReference[0].childProducts.records) {\n            coveragesAfterLoop = loopThroughAttributes(productsReference[0].childProducts.records, true);\n        } else {\n            coveragesAfterLoop = loopThroughAttributes(productsReference, true);\n        }\n        // Create a new array to sort coverages for the UI\n        const coverages = coveragesAfterLoop.products.slice();\n        const coveragesCount = coverages.length - coveragesAfterLoop.nonCoverageCount;\n        const sortedCoveragesKey = coverages[0].parentInstanceKey || coverages[0].parentProductName || coverages[0].Name;\n        $scope.sortedCoverages[sortedCoveragesKey] = [];\n        $scope.evaluatedCoverageCounter = {\n            coverages: 0,\n            lastNonOptionalIdx: 0\n        };\n\n        if (coverages) {\n            $scope.sortedCoverages[sortedCoveragesKey] = coverages.sort($scope.sortingFunc);\n            for (let i = 0; i < $scope.sortedCoverages[sortedCoveragesKey].length; i++) {\n                let sortedCoverage = $scope.sortedCoverages[sortedCoveragesKey][i];\n                sortedCoverage.popoverOpen = false;\n                if (sortedCoverage.RecordTypeName__c === 'CoverageSpec' || sortedCoverage[$scope.nsPrefix + 'RecordTypeName__c'] === 'CoverageSpec') {\n                    $scope.evaluatedCoverageCounter.coverages++;\n                    if (sortedCoverage.firstOptional) {\n                        delete sortedCoverage.firstOptional;\n                    }\n                    if (sortedCoverage.lastNonOptional) {\n                        delete sortedCoverage.lastNonOptional;\n                    }\n                    if (sortedCoverage.isSelected) {\n                        $scope.evaluatedCoverageCounter.lastNonOptionalIdx = i;\n                    }\n                    if (sortedCoverage.isOptional) {\n                        sortedCoverage.isOriginalOptional = true;\n\n                        sortedCoverage.isAddedOptional = sortedCoverage.isSelected ? true : false;\n                    }\n                    if (sortedCoverage.isOptional && !sortedCoverage.isSelected && !foundFirstOptional) {\n                        sortedCoverage.firstOptional = true;\n                        foundFirstOptional = true;\n                    }\n                    if (sortedCoverage.pendingUpdates) {\n                        delete sortedCoverage.pendingUpdates;\n                    }\n                    if (sortedCoverage.messages) {\n                        // Collect all validation messages\n                        angular.forEach(sortedCoverage.messages, function(message) {\n                            let title = sortedCoverage.Name;\n                            if (sortedCoverage.parentInstanceKey) {\n                                title = sortedCoverage.parentInstanceKey + ' - ' + title;\n                            }\n                            const formattedMessage = {\n                                severity: message.severity,\n                                message: message.message,\n                                title: title,\n                                code: message.code\n                            };\n                            let newMessage = true;\n                            for (let i = 0; i < $scope.validationMessages.length; i++) {\n                                const existingMessage = $scope.validationMessages[i];\n                                if (existingMessage.title === title && existingMessage.code === formattedMessage.code) {\n                                    newMessage = false;\n                                    break;\n                                }\n                            }\n                            if (newMessage) {\n                                $scope.validationMessages.push(formattedMessage);\n                            }\n                        });\n                    }\n                    if ($scope.evaluatedCoverageCounter.coverages === coveragesCount) {\n                        $scope.sortedCoverages[sortedCoveragesKey][$scope.evaluatedCoverageCounter.lastNonOptionalIdx].lastNonOptional = true;\n                    }\n                }\n            }\n            // Adds root product to top of sortedCoverages (does not apply for multi item and life templates)\n            if (rootProduct && !rootProduct[0].hasInstanceKeys && rootProduct[0].childProducts && rootProduct[0].childProducts.records) {\n                if (rootProduct[0].pendingUpdates) {\n                    delete rootProduct[0].pendingUpdates;\n                }\n                $scope.sortedCoverages[sortedCoveragesKey].unshift(rootProduct[0]);\n                if ($scope.sortedCoverages[sortedCoveragesKey][0].RecordTypeName__c === 'Product' || $scope.sortedCoverages[sortedCoveragesKey][0][$scope.nsPrefix + 'RecordTypeName__c'] === 'Product') {\n                    $scope.sortedCoverages[sortedCoveragesKey][0].parentProduct = true;\n                }\n                if (!$scope.evaluatedCoverageCounter.coverages) {\n                    $scope.sortedCoverages[sortedCoveragesKey][0].lastNonOptional = true;\n                }\n            }\n        } else {\n            $scope.sortedCoverages[sortedCoveragesKey] = productsReference;\n            if ($scope.sortedCoverages[sortedCoveragesKey][0].RecordTypeName__c === 'Product' || $scope.sortedCoverages[sortedCoveragesKey][0][$scope.nsPrefix + 'RecordTypeName__c'] === 'Product') {\n                $scope.sortedCoverages[sortedCoveragesKey][0].parentProduct = true;\n            }\n        }\n        // Used for rechecking when user navigates back and forth\n        if (rootProduct) {\n            if (!baseCtrl.prototype.vlocOSInsConfigProductSet) {\n                baseCtrl.prototype.vlocOSInsConfigProductSet = {};\n            }\n            baseCtrl.prototype.vlocOSInsConfigProductSet = $scope.sortedCoverages;\n            baseCtrl.prototype.vlocOSInsConfigProductSet.timestamp = rootProduct[0].timestamp;\n        }\n        console.log('$scope.sortedCoverages', $scope.sortedCoverages);\n    }\n\n    // When recalculating the price, OmniScript returns the data json to us, but we need to\n    // reformat that data's changes into our Angular binded data. We know that the only thing\n    // that will change is the Price field, so we kind of manually just update those prices below\n    // in an effort to not overwrite any rule evaluations that have already taken place.\n    /**\n     * @param {Array} products Current level of products\n     * @param {Boolean} [isCoverages] Set to true when products is the last level of childProducts (i.e., coverages)\n     * @param {Number} [summedCoverages] Total price\n     * @param {Array} [originalProductSet]\n     */\n    function updatePrices(products, isCoverages, summedCoverages, originalProductSet) {\n        summedCoverages = summedCoverages || 0;\n        originalProductSet = originalProductSet || products;\n\n        for (let i = 0, l = products.length; i < l; i++) {\n            const product = products[i];\n            let originalProduct = product;\n            if (product.pathFromRoot) {\n                originalProduct = _.get(originalProductSet, product.pathFromRoot);\n            }\n            if (product.hasOwnProperty('Price') && !isCoverages) {\n                originalProduct.Price = product.Price;\n                // This part only matters in a multi-item flow. childInsuredItemName will only exist\n                // if this template is included as a child component of ins-os-multi-item\n                if (baseCtrl.prototype.insuredItemNames && baseCtrl.prototype.insuredItemNames.childInsuredItemName === product.Name) {\n                    if (product.Price === '') {\n                        product.Price = 0;\n                    }\n                    summedCoverages += product.Price;\n                }\n            } else if (originalProduct.Price && isCoverages) {\n                // When the products passed in are $scope.sortedCoverages, we want to do the opposite\n                // because we've already updated originalProductSet's prices\n                product.Price = originalProduct.Price;\n            } else {\n                originalProduct.Price = '';\n            }\n            console.log('originalProduct', originalProduct);\n            if (product.childProducts && product.childProducts.records) {\n                // if the childProducts have no childProducts, we're at the last level which always includes the coverages\n                let foundChildProducts = false;\n                for (let j = 0; j < product.childProducts.records.length; j++) {\n                    const child = product.childProducts.records[j];\n                    if (child.childProducts) {\n                        foundChildProducts = true;\n                        break;\n                    }\n                }\n                if (!foundChildProducts) {\n                    isCoverages = true;\n                }\n                updatePrices(product.childProducts.records, isCoverages, summedCoverages, originalProductSet);\n            }\n        }\n        console.log('products after updatePrices', products);\n        if (summedCoverages && !isCoverages && originalProductSet && (originalProductSet[0].RecordTypeName__c === 'Product' || originalProductSet[0][$scope.nsPrefix + 'RecordTypeName__c'] === 'Product')) {\n            originalProductSet[0].Price = summedCoverages;\n        }\n        return products;\n    }\n\n    // Helper function to format remoteResp and update prices\n    /**\n     * @param {Object} remoteResp Response from remote method\n     * @param {Object} [product] Coverage (not available from recalculate button)\n     * @param {Object} productsFromAddHashKeys Coverages with hash keys\n     * @param {String} [shouldFormatData] Parent product's instanceKey (only for multi-item)\n     * @param {Boolean} [pricesUpdated] Decides whether to reprice\n     * @param {Object} [response] bpTree.response\n     * @param {Object} [control] SI Element control\n     * @param {Object} [scp] Element scope\n     * @param {String} [currentTextValue] User input\n     * @param {Function} [sortFunc]\n     */\n    function changeCoverageHelper(remoteResp, product, productsFromAddHashKeys, shouldFormatData, pricesUpdated, response, control, scp, currentTextValue, sortFunc) {\n        // shouldFormatData gets passed as the parent product's instanceKey so we can use\n        // it as the key in $scope.sortedCoverages. This happens in multi-item when copying\n        // one product to another\n        if (shouldFormatData) {\n            formatData($scope.sortedCoverages[shouldFormatData], null, $scope.sortingFunc);\n        }\n        // Cannot just re-run formatData() because it wipes out the rules evaluations\n        // Pass remoteResp[control.name] to updatePrices because it'll have the hashKeys,\n        // but the return from hashKeys is the last level of childProducts, not the whole\n        // dataset\n        if (!pricesUpdated) {\n            // Update prices for control object\n            $scope.productsList = updatePrices(remoteResp[control.name]);\n            // Retain the timestamp before reassigning\n            $scope.productsList[0].timestamp = control.vlcSI[control.itemsKey][0].timestamp;\n            control.response = $scope.productsList;\n            control.vlcSI[control.itemsKey] = $scope.productsList;\n        }\n        // Aggregate populates control.response back to the dataJSON\n        scp.aggregate(scp, control.index, control.indexInParent, true, -1);\n        // Handle any rules evaluations\n        if ($scope.changeCoverageChain.moreQueued.length) {\n            const queuedProduct = $scope.changeCoverageChain.moreQueued[0].product;\n            const queuedAttribute = $scope.changeCoverageChain.moreQueued[0].attribute;\n            $scope.changeCoverageChain.currentSetValues.splice(0, 1);\n            $scope.changeCoverageChain.moreQueued.splice(0, 1);\n            $scope.calcConfig.triggerCalculate = true;\n            $scope.changeCoverage(response, control, scp, queuedProduct, queuedAttribute, currentTextValue);\n        } else {\n            // formatData will regenerate validation messages\n            $scope.validationMessages = [];\n            addHashKeys(remoteResp[control.name], function(coveragesSet) {\n                // Multi person template needs to reformat all sets of coverages\n                if ($scope.multiPersonTemplate || isCorrectCoverages(product, coveragesSet)) {\n                    formatData(coveragesSet, control.response);\n                }\n            });\n            if ($scope.multiPersonTemplate) {\n                // Repopulate empty coverages for alignment\n                $scope.syncSortedCoverages();\n            }\n            // $rootScope.attributeUserValue is broken with sortedCoverage after formatData.\n            // It needs to reestablish the reference with sortedCoverage to reflect right attributeUserValues.\n            $rootScope.attributeUserValues = {};\n            $scope.calcConfig.calculationDone = true;\n\n            // Prevent next step if any validation messages\n            $timeout(function() {\n                if ($scope.validationMessages.length) {\n                    angular.element('#' + control.name).scope().loopform.$setValidity('coverages', false);\n                    console.log('set step to invalid because a validation message appeared');\n                } else {\n                    angular.element('#' + control.name).scope().loopform.$setValidity('coverages', true);\n                    console.log('set step to valid because a validation message did not appear');\n                }\n            });\n        }\n    }\n\n    // Calls OmniScript buttonClick function, will perform remote action (and optional preProcess method) defined on the Selectable Item\n    // that houses this template\n    /**\n     * @param {Object} control Element control\n     * @param {Object} scp Element scope\n     * @param {Object|undefined} selectedItem In Selectable Items El case, the item selected by the user where they trigger the remote call\n     * @param {String} operation The operation of the remote call ('Delete', 'Add', etc.)\n     * @param {Function|undefined} customizer The customized function to be called once the remote call promise comes back\n     */\n    function remoteInvoke(control, scp, selectedItem, operation, customizer) {\n        const deferred = $q.defer();\n        if (control.propSetMap.preProcessClass && control.propSetMap.preProcessMethod) {\n            const remoteClass = control.propSetMap.remoteClass;\n            const remoteMethod = control.propSetMap.remoteMethod;\n            // Override remoteClass and remoteMethod for first buttonClick call\n            control.propSetMap.remoteClass = control.propSetMap.preProcessClass;\n            control.propSetMap.remoteMethod = control.propSetMap.preProcessMethod;\n\n            scp.buttonClick($scope.bpTreeResponse, control, scp, selectedItem, operation, customizer, function(response1) {\n                // Preprocess method returns configureProduct object so assign it back to payload for second buttonClick call\n                const bpTreeResponseKey = 'configureProduct';\n                $scope.bpTreeResponse[bpTreeResponseKey] = response1;\n                control.propSetMap.remoteClass = remoteClass;\n                control.propSetMap.remoteMethod = remoteMethod;\n\n                scp.buttonClick($scope.bpTreeResponse, control, scp, selectedItem, operation, customizer, function(response2) {\n                    deferred.resolve(response2);\n                });\n            });\n        } else {\n            scp.buttonClick($scope.bpTreeResponse, control, scp, selectedItem, operation, customizer, function(remoteResp) {\n                deferred.resolve(remoteResp);\n            });\n        }\n\n        return deferred.promise;\n    }\n\n    function isCorrectCoverages(product, coverages) {\n        // For single product template\n        if (!product || !product.parentInstanceKey) {\n            return true;\n        }\n        // For multi-item template, select correct set of coverages\n        if (coverages[0].parentInstanceKey === product.parentInstanceKey) {\n            return true;\n        }\n        return false;\n    }\n\n    $scope.decideCoverageCardClassNames = function(coverage) {\n        let classNames = '';\n        if (coverage.parentProduct && $scope.insCoveragesConfig.showParentProduct) {\n            classNames = classNames + ' parent-product';\n        }\n        if (coverage.isOriginalOptional) {\n            classNames = classNames + ' optional-coverage';\n        }\n        if (coverage.lastNonOptional) {\n            classNames = classNames + ' last-non-optional';\n        }\n        if (coverage.isAddedOptional) {\n            classNames = classNames + ' added-optional-coverage';\n        }\n        if (!$scope.evaluatedCoverageCounter.coverages && (coverage.RecordTypeName__c === 'Product' || coverage[$scope.nsPrefix + 'RecordTypeName__c'] === 'Product')) {\n            classNames = classNames + ' only-root';\n        }\n        if (coverage.showTypeHeader) {\n            classNames = classNames + ' show-type-header';\n        }\n        return classNames;\n    };\n\n    // Adds paths to root product, coverages and attributes in control.vlcSI[control.itemsKey],\n    //\n    // then assigns to $scope.productsList\n    /**\n     * @param {Array} products control.vlcSI[control.itemsKey]\n     * @param {Object} response baseCtrl.$scope.bpTree.response\n     * @param {String} [subsequentVisit] If the user goes back and selects a new product\n     */\n    $scope.createData = function(products, response, subsequentVisit) {\n        $scope.productsList = products;\n        $scope.bpTreeResponse = response;\n        console.log('products:\\n', products, '\\nresponse:\\n', response);\n        // Create object to power \"Same as...\" and changing the driver\n        if (!$scope.consolidatedData) {\n            $scope.consolidatedData = {\n                childInsuredItems: {},\n                grandChildInsuredItems: {}\n            };\n        }\n        const rootProduct = products[0];\n        rootProduct.pathFromRoot = '[0]';\n        rootProduct.pathFromChild = '[0]';\n        rootProduct.instanceKeyChildren = 0;\n        if (rootProduct.attributeCategories && rootProduct.attributeCategories.records) {\n            const attrCategories = rootProduct.attributeCategories.records;\n            for (let i = 0; i < attrCategories.length; i++) {\n                if (attrCategories[i].productAttributes) {\n                    const prodAttributes = attrCategories[i].productAttributes.records;\n                    for (let j = 0; j < prodAttributes.length; j++) {\n                        prodAttributes[j].pathFromRoot = 'attributeCategories.records[' + i + '].productAttributes.records[' + j + ']';\n                        prodAttributes[j].pathFromChild = 'attributeCategories.records[' + i + '].productAttributes.records[' + j + ']';\n                    }\n                }\n            }\n        }\n        // Assume 1 root product (flow doesn't make sense with more than 1)\n        if (rootProduct.childProducts && rootProduct.childProducts.records) {\n            const childProducts = rootProduct.childProducts.records;\n            // Loop over childProducts\n            for (let i = 0; i < childProducts.length; i++) {\n                let instanceKey = childProducts[i].instanceKey;\n                childProducts[i].pathFromRoot = '[0].childProducts.records[' + i + ']';\n                if (instanceKey) {\n                    rootProduct.instanceKeyChildren++;\n                    if ($scope.multiPersonSameAsData) {\n                        $scope.multiPersonSameAsData.push({\n                            label: 'Same as ' + instanceKey,\n                            name: instanceKey,\n                        });\n                        childProducts[i].sameAsData = $scope.defaultSameAsData;\n                    }\n                }\n                if (baseCtrl.prototype.insuredItemNames && (childProducts[i].Name === baseCtrl.prototype.insuredItemNames.childInsuredItemName || childProducts[i].productName === baseCtrl.prototype.insuredItemNames.childInsuredItemName)) {\n                    // instanceKey should be Name if no instanceKey\n                    instanceKey = instanceKey || childProducts[i].Name;\n                    // Need to add an indication on the root product that this flow contains instanceKeys\n                    if (rootProduct.RecordTypeName__c === 'Product' || rootProduct[$scope.nsPrefix + 'RecordTypeName__c'] === 'Product') {\n                        rootProduct.hasInstanceKeys = true;\n                    }\n                    const tempObj = {\n                        name: instanceKey,\n                        id: childProducts[i].Id,\n                        indexInJson: i,\n                        coverages: childProducts[i].childProducts.records\n                    };\n                    if (!$scope.consolidatedData.childInsuredItems[instanceKey]) {\n                        $scope.consolidatedData.childInsuredItems[instanceKey] = {};\n                    }\n                    $scope.consolidatedData.childInsuredItems[instanceKey] = tempObj;\n                }\n                if (childProducts[i].attributeCategories && childProducts[i].attributeCategories.records) {\n                    const attrCategories = childProducts[i].attributeCategories.records;\n                    for (let j = 0; j < attrCategories.length; j++) {\n                        if (attrCategories[j].productAttributes) {\n                            const prodAttributes = attrCategories[j].productAttributes.records;\n                            for (let k = 0; k < prodAttributes.length; k++) {\n                                prodAttributes[k].pathFromRoot = 'childProducts.records[' + i + '].attributeCategories.records[' + j + '].productAttributes.records[' + k + ']';\n                                prodAttributes[k].pathFromChild = 'attributeCategories.records[' + j + '].productAttributes.records[' + k + ']';\n                            }\n                        }\n                    }\n                }\n                if (childProducts[i].childProducts && childProducts[i].childProducts.records) {\n                    const grandChildProducts = childProducts[i].childProducts.records;\n                    for (let k = 0; k < grandChildProducts.length; k++) {\n                        grandChildProducts[k].pathFromRoot = '[0].childProducts.records[' + i + '].childProducts.records[' + k + ']';\n                        if (!grandChildProducts[k].parentInstanceKey) {\n                            grandChildProducts[k].parentInstanceKey = instanceKey;\n                        }\n                        grandChildProducts[k].formattedParentInstanceKey = grandChildProducts[k].parentInstanceKey.replace(/\\s/g, '-').toLowerCase();\n                        if (grandChildProducts[k].attributeCategories && grandChildProducts[k].attributeCategories.records) {\n                            const attrCategories = grandChildProducts[k].attributeCategories.records;\n                            for (let m = 0; m < attrCategories.length; m++) {\n                                if (attrCategories[m].productAttributes && attrCategories[m].productAttributes.records) {\n                                    const prodAttributes = attrCategories[m].productAttributes.records;\n                                    for (let o = 0; o < prodAttributes.length; o++) {\n                                        prodAttributes[o].parentProductCode = grandChildProducts[k].ProductCode;\n                                        prodAttributes[o].pathFromRoot = 'childProducts.records[' + k + '].attributeCategories.records[' + m + '].productAttributes.records[' + o + ']';\n                                        prodAttributes[o].pathFromChild = 'attributeCategories.records[' + m + '].productAttributes.records[' + o + ']';\n                                        const tempObj = {\n                                            name: grandChildProducts[k].productName || grandChildProducts[k].Name,\n                                            productCode: grandChildProducts[k].ProductCode,\n                                            categoryCode: attrCategories[m].Code__c,\n                                            attributeCode: prodAttributes[o].code,\n                                            pathFromRoot: prodAttributes[o].pathFromRoot,\n                                            pathFromChild: prodAttributes[o].pathFromChild\n                                        };\n                                        if (grandChildProducts[k].instanceKey) {\n                                            tempObj.instanceKey = grandChildProducts[k].instanceKey;\n                                        }\n                                        if (grandChildProducts[k].parentInstanceKey) {\n                                            tempObj.parentInstanceKey = grandChildProducts[k].parentInstanceKey;\n                                        }\n                                        if (!$scope.consolidatedData.grandChildInsuredItems[instanceKey]) {\n                                            $scope.consolidatedData.grandChildInsuredItems[instanceKey] = {};\n                                        }\n                                        if (!$scope.consolidatedData.grandChildInsuredItems[instanceKey][grandChildProducts[k].ProductCode]) {\n                                            $scope.consolidatedData.grandChildInsuredItems[instanceKey][grandChildProducts[k].ProductCode] = [];\n                                        }\n                                        $scope.consolidatedData.grandChildInsuredItems[instanceKey][grandChildProducts[k].ProductCode].push(tempObj);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        console.log('$scope.consolidatedData', $scope.consolidatedData);\n        if (subsequentVisit) {\n            $scope.setSelectedOption($scope.controlRef, $scope.productsList[0], $scope.optionRef, $scope.scpReference, $scope.sortingFunc);\n        }\n        console.log('$scope.productsList', $scope.productsList);\n    };\n\n    // Initial data formatting\n    /**\n     * @param {Object} control Element control\n     * @param {Object} p Product\n     * @param {Object} option default OS property\n     * @param {Object} scp Element scope\n     * @param {Function} [sortFunc]\n     */\n    $scope.setSelectedOption = function(control, p, option, scp, sortFunc) {\n        if (control === undefined || control === null) {\n            return;\n        }\n        $scope.sortingFunc = sortFunc || sortCoverages;\n        console.log('control', control);\n        console.log('%c' + p.Name + ' Data:', 'font-size: 14px; color: aqua; font-style: italic;', p);\n        console.log('clear out rules configs');\n        $rootScope.attrsMap = {}; //Master map of all attributes {'rulescode' : attr}\n        $rootScope.rulesMap = {}; //map to keep track of rulecodes that invoke a rule {'Copay.1': [rule1, rule2]} if attribute Copay.1 changes we need ot re-eval rule1 and rule2\n        $rootScope.valueExpressionMap = {}; //map to keep track of rulecodes which rules depend on to set value - \"valueExpression\"\n        $rootScope.dropdownValueRulesMap = {}; //map to keep track of rules for dropdown values\n        control.vlcSI[control.itemsKey][0].timestamp = new Date().getTime();\n        $scope.controlRef = control;\n        $scope.optionRef = option;\n        $scope.scpReference = scp;\n        if (control.propSetMap.hasOwnProperty('disableAutoCalculate')) {\n            $scope.calcConfig.disableAutoCalculate = control.propSetMap.disableAutoCalculate;\n        }\n\n        addHashKeys($scope.productsList, function(coverages) {\n            // For each product in productsList, addHashKeys returns the last level of childProducts\n            // Call formatData to sort each set of coverages\n            formatData(coverages, control.vlcSI[control.itemsKey], $scope.sortingFunc);\n        });\n        // Assign control.response for OS aggregate calls\n        control.response = $scope.productsList;\n        if (control.propSetMap.dataJSON) {\n            // scope of the selectable item element in OS, index of the element, parent index of element, optional (true), optional (-1)\n            console.log('scp from setSelectedOption', scp);\n            scp.aggregate(scp, control.index, control.indexInParent, true, -1);\n        }\n        if (control.propSetMap.remoteClass && control.propSetMap.remoteMethod) {\n            $scope.insCoveragesConfig.remoteMethod = true;\n        }\n        if ($scope.multiPersonTemplate) {\n            $scope.organizeMultiPersonData();\n        }\n    };\n\n    // Function to assess if coverage can be saved i.e. attrs do not have error\n    /**\n     * @param {Object} coverage Coverage\n     * @param {Object} control Element control\n     */\n    $scope.isDoneDisabled = function(coverage, control) {\n        if (coverage.popoverOpen && coverage.attributeCategories) {\n            for (let k = 0; k < coverage.attributeCategories.records.length; k++) {\n                let attrCats = coverage.attributeCategories.records[k];\n                for (let j = 0; j < attrCats.productAttributes.records.length; j++) {\n                    let attr = attrCats.productAttributes.records[j];\n                    if (attr.rules) {\n                        for (let i = 0; i < attr.rules.length; i++) {\n                            let rule = attr.rules[i];\n                            if (rule.ruleEvaluation && rule.messages && rule.messages[0].severity.toLowerCase() === 'error') {\n                                if (!angular.element('#' + control.name).scope().loopform.$invalid) {\n                                    // Prevent user from moving to next step if there is an error in the coverage popup\n                                    $timeout(function() {\n                                        angular.element('#' + control.name).scope().loopform.$setValidity('coverages', false);\n                                        console.log('set step to invalid because an attribute rule appeared');\n                                    });\n                                }\n                                return true;\n                            }\n\n                        }\n                    }\n                }\n            }\n        }\n        return false;\n    };\n\n    //Listenter that executes ChangeCoverage fn after rules have been evluated\n    //ensures the rules directive has run and now can invoke remote methods without procesing simulatenously with rules\n     /**\n     * @param {Object} e event\n     * @param {Object} data containing product and attribute sent from insRules directive for changeCoverage\n     */\n    $rootScope.$on('fire-onsave-event', function(e, data){\n        console.log('fire-onsave-event', data);\n        $scope.changeCoverage($scope.bpTreeResponse, $scope.controlRef, $scope.scpReference, data.product, data.attribute, null, false);\n    });\n    // Called when the user changes a coverage or clicks the recalculate button\n    /**\n     * @param {Object} response JSON input (bpTree.response)\n     * @param {Object} control SI Element control\n     * @param {Object} scp Element scope\n     * @param {Object} [product] Coverage (not available from recalculate button)\n     * @param {Object} [attribute] Coverage attribute\n     * @param {String} [currentTextValue] User input\n     * @param {String} [shouldFormatData] Parent product's instanceKey (only for multi-item)\n     */\n    $scope.changeCoverage = function(response, control, scp, product, attribute, currentTextValue, shouldFormatData) {\n        // When method is called from single coverage change if method called form directive but attr not save onchange, reject\n        console.log('%cChangeCoverageCall:', 'color: orange');\n        if (product && attribute) {\n            if(product.popoverOpen){\n                return;\n            }\n            if ($scope.calcConfig.disableAutoCalculate) {\n                product.pendingUpdates = product.pendingUpdates || [];\n                product.pendingUpdates.push(attribute.code);\n                if (product.isOptional) {\n                    // Re-sort to move coverage on page\n                    formatData($scope.sortedCoverages[product.parentProductName], $scope.productsList);\n                }\n            }\n            const productInResponse = _.get(control.response, product.pathFromRoot);\n            const attributeInResponse = _.get(productInResponse, attribute.pathFromChild);\n            attributeInResponse.userValues = attribute.userValues;\n            // Ensure there are no rules errors\n            if (attribute && attribute.rules) {\n                for (let i = 0; i < attribute.rules.length; i++) {\n                    const rule = attribute.rules[i];\n                    if (rule.ruleEvaluation && rule.messages && rule.messages[0].severity.toLowerCase() === 'error') {\n                        return;\n                    }\n                }\n            }\n        }\n\n        if ($scope.calcConfig.disableAutoCalculate) {\n            if (!$scope.calcConfig.triggerCalculate) {\n                $scope.calcConfig.calculationDone = false;\n                $timeout(function() {\n                    // Prevent next step until repricing is done\n                    angular.element('#' + control.name).scope().loopform.$setValidity('coverages', false);\n                    console.log('Calculate price before moving forward');\n                });\n                // Return since call didn't come from recalculate button\n                return;\n            }\n            $scope.calcConfig.triggerCalculate = false;\n        }\n\n        // Need this to happen on the next digest cycle to give the rules time to evaluate\n        const pricesUpdated = false;\n        $timeout(function() {\n            if (product) {\n                if (product.hasOwnProperty('errorMessage') && product.errorMessage) {\n                    angular.element('#' + control.name).scope().loopform.$setValidity('coverages', false);\n                    console.log('set step to invalid because an error message appeared', attribute);\n                } else {\n                    angular.element('#' + control.name).scope().loopform.$setValidity('coverages', true);\n                    console.log('set step to valid because an error message did not appear', attribute);\n                }\n            }\n        });\n\n        // Flag set by rules evaluation service to block remote save while rule evaluation is in progress\n        if ($rootScope.rulesInProgress) {\n            if (!$scope.blockRemoteInvoke) {\n                // Enqueue changeCoverage() one time which gets called after all the rule evaluations have run\n                $scope.blockRemoteInvoke = true;\n                $timeout(function() {\n                    $rootScope.rulesInProgress = false;\n                    $scope.blockRemoteInvoke = false;\n                    $scope.changeCoverage(response, control, scp);\n                }, 1000);\n            }\n            return;\n        }\n\n        if ($scope.insCoveragesConfig.callButtonClick && $scope.insCoveragesConfig.remoteMethod) {\n            if (currentTextValue || currentTextValue === 0) {\n                if (attribute.userValues && attribute.userValues !== currentTextValue) {\n                    remoteInvoke(control, scp, undefined, 'typeAheadSearch', undefined)\n                        .then(function(remoteResp) {\n                            changeCoverageHelper(remoteResp, product, null, shouldFormatData, pricesUpdated, response, control, scp, currentTextValue);\n                        })\n                        .catch(angular.noop);\n                }\n            } else {\n                remoteInvoke(control, scp, undefined, 'typeAheadSearch', undefined)\n                    .then(function(remoteResp) {\n                        changeCoverageHelper(remoteResp, product, null, shouldFormatData, pricesUpdated, response, control, scp, currentTextValue);\n                    })\n                    .catch(angular.noop);\n            }\n        }\n    };\n\n    $scope.selectOptionalCoverage = function(product, response, control, scp, sortFunc) {\n        if (!product.isOptional) {\n            console.log('not optional', product);\n            return;\n        }\n        const productInResponse = _.get(control.response, product.pathFromRoot);\n        product.isAddedOptional = !product.isAddedOptional;\n        productInResponse.isAddedOptional = product.isAddedOptional; // This is added by formatData so need to sync to response\n        productInResponse.isSelected = product.isSelected;\n        if (!$scope.multiPersonTemplate) {\n            // Re-sort to move coverage on page (multi person does not need to re-sort)\n            if ($scope.multiItemTemplate) {\n                formatData($scope.sortedCoverages[product.parentInstanceKey || product.parentProductName]);\n            } else {\n                formatData($scope.sortedCoverages[product.parentProductName], $scope.productsList);\n            }\n        }\n\n        if ($scope.calcConfig.disableAutoCalculate) {\n            $scope.calcConfig.calculationDone = false;\n            $timeout(function() {\n                // Prevent next step until repricing is done\n                angular.element('#' + control.name).scope().loopform.$setValidity('coverages', false);\n                console.log('Calculate price before moving forward');\n            });\n            // Return since call didn't come from recalculate button\n            return;\n        }\n\n        if ($scope.insCoveragesConfig.callButtonClick && $scope.insCoveragesConfig.remoteMethod) {\n            remoteInvoke(control, scp, undefined, 'typeAheadSearch', undefined)\n                .then(function(remoteResp) {\n                    $rootScope.attributeUserValues = {}; // Need to clear out rules object when selecting an optional coverage\n                    changeCoverageHelper(remoteResp, product, null, null, false, response, control, scp);\n                })\n                .catch(angular.noop);\n        }\n    };\n\n    $scope.doAccordion = function(child) {\n        if (!$scope.insCoveragesConfig.coverageAccordion) {\n            return false;\n        } else if (child.parentProduct) {\n            return false;\n        } else {\n            if (!$scope.insCoveragesConfig.attrCatAccordion) {\n                if (child.numberAttributes && child.numberAttributes < $scope.insCoveragesConfig.coverageAccordionMinAttrs) {\n                    return false;\n                } else if (child.numberAttributes) {\n                    return true;\n                } else {\n                    return false;\n                }\n            } else {\n                if (child.numberCategories && child.numberCategories < $scope.insCoveragesConfig.attrCatAccordionMinCats) {\n                    return false;\n                } else if (child.numberCategories) {\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n        }\n    };\n\n    // Only for multiselect dropdowns\n    $scope.countSelected = function(attribute) {\n        if (attribute.userValues && attribute.userValues.constructor === Array) {\n            attribute.multiSelectCount = attribute.userValues.length;\n        } else {\n            attribute.userValues = [];\n            attribute.multiSelectCount = 0;\n        }\n    };\n\n    // Only for multiselect dropdowns\n    $scope.toggleValue = function(attribute, value, index, response, control, scp, child) {\n        if (value.ruleSetValue) {\n            return;\n        }\n        if (!attribute.userValues) {\n            attribute.userValues = [];\n        }\n        if (attribute.userValues.indexOf(value.value) > -1) {\n            attribute.userValues.splice(attribute.userValues.indexOf(value.value), 1);\n        } else {\n            attribute.userValues.push(value.value);\n        }\n        $scope.countSelected(attribute);\n        $scope.changeCoverage(response, control, scp, child, attribute);\n    };\n\n    $rootScope.insOSCoveragesDropdowns = {};\n    $rootScope.toggleDropdown = function(attribute) {\n        if ($rootScope.insOSCoveragesDropdowns[attribute.attributeId]) {\n            $rootScope.insOSCoveragesDropdowns[attribute.attributeId] = false;\n        } else {\n            $rootScope.insOSCoveragesDropdowns[attribute.attributeId] = true;\n        }\n    };\n\n    $scope.formatDate = function(date, isDatetime) {\n        let formattedDate = null;\n        if (!date) {\n            console.error('This date is invalid', date);\n            return formattedDate;\n        } else {\n            let monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n            if (moment) {\n                monthNames = moment.months();\n                formattedDate = moment(date).format('MMMM Do YYYY');\n                if (isDatetime) {\n                    formattedDate = moment(date).format('MMM. Do YYYY, h:mm a');\n                }\n            } else {\n                const dateObj = new Date(date);\n                if (Object.prototype.toString.call(dateObj) === '[object Date]') {\n                    if (isNaN(dateObj.getTime())) {\n                        if (typeof date === 'string' && date.indexOf('.') > -1) {\n                            date = date.split('.')[0];\n                            return $scope.formatDate(date);\n                        }\n                    }\n                } else {\n                    console.error('This date is invalid', date);\n                }\n                formattedDate = monthNames[dateObj.getUTCMonth()] + ' ' + dateObj.getUTCDate() + ' ' + dateObj.getUTCFullYear();\n\n                if (isDatetime) {\n                    formattedDate = formattedDate + ' ' + dateObj.toLocaleTimeString();\n                }\n            }\n        }\n        return formattedDate;\n    };\n\n    $scope.stopPropagation = function(event) {\n        event.stopPropagation();\n    };\n\n    $scope.formatId = function(arr) {\n        const formattedStrings = arr.map(function(str) {\n            if (str || str === 0) {\n                return str.toString().replace(/\\s+/g, '-');\n            }\n        });\n        return formattedStrings.join('-');\n    };\n}]);\n\nvlocity.cardframework.registerModule.directive('insOsIncludeTemplate', function($templateRequest, $compile) {\n    'use strict';\n    return {\n        restrict: 'A',\n        transclude: true,\n        replace: true,\n        scope: false,\n        link: function($scope, element, attrs) {\n            let templatePath = attrs.insOsIncludeTemplate;\n            $templateRequest(templatePath).then(function(response) {\n                let contents = element.html(response).contents();\n                $compile(contents)($scope.$new(false, $scope.$parent));\n            });\n        }\n    };\n});\n\nvlocity.cardframework.registerModule.directive('insOsDropdownHandler', function($document) {\n    'use strict';\n    return {\n        restrict: 'A',\n        link: function(scope, element, attrs) {\n            let focused = false;\n            let initial = false;\n            const elementEvents = attrs.useFocus === 'true' || attrs.useFocus === undefined ? 'click focus' : 'click';\n            const parentElement = attrs.parentElement ? angular.element(attrs.parentElement) : element;\n            const onClick = function(event) {\n                const isChild = parentElement.has(event.target).length > 0;\n                const isSelf = parentElement[0] == event.target;\n                const isInside = isChild || isSelf;\n                let className = event.target.className;\n                if (event.target.parentElement) {\n                    className = className + ' ' + event.target.parentElement.className;\n                }\n                if (attrs.isClickDisabled === 'true') {\n                    console.log('click is disabled');\n                    return;\n                }\n                if (initial && isInside) {\n                    return;\n                }\n                if (event.target.nodeName === 'path') {\n                    className = event.target.parentElement.parentElement.className;\n                } else if (event.target.nodeName === 'svg') {\n                    className = event.target.parentElement.className;\n                }\n                scope.$apply(attrs.insOsDropdownHandler);\n                $document.off('click', onClick);\n                focused = false;\n            };\n            element.on(elementEvents, function() {\n                if (!focused) {\n                    scope.$apply(attrs.insOsDropdownHandler);\n                    $document.on('click', onClick);\n                    initial = true;\n                    focused = true;\n                }\n            });\n        }\n    };\n});\n\nvlocity.cardframework.registerModule.directive('insOsCalcHeight', ['$timeout', function($timeout) {\n    'use strict';\n    return {\n        restrict: 'A',\n        link: function(scope, element, attrs) {\n            const watchElementsClassNames = [\n                '.vloc-ins-coverages-heading',\n                '.vloc-ins-coverages-card-inner-wrapper'\n            ];\n            scope.$watch(\n                // This function returns the value that is watched in the next function.\n                // Collecting the length of child elements that would affect the height of this container.\n                function() {\n                    let watchElementsLength = 0;\n                    watchElementsLength = watchElementsLength + element[0].children.length;\n                    for (let i = 0; i < watchElementsClassNames.length; i++) {\n                        let watchElementsClassName = watchElementsClassNames[i];\n                        if ($(element[0]).find(watchElementsClassName) && $(element[0]).find(watchElementsClassName).length) {\n                            watchElementsLength = watchElementsLength + $(element[0]).find(watchElementsClassName).length;\n                        }\n                    }\n                    return watchElementsLength;\n                },\n                function(newValue, oldValue) {\n                    let containerHeight = 0;\n                    if (newValue !== oldValue || !attrs.style) {\n                        $timeout(function() {\n                            for (let i = 0; i < element[0].children.length; i++) {\n                                containerHeight += $(element[0].children[i]).outerHeight(true);\n                            }\n                            containerHeight = containerHeight + 'px';\n                            console.log('updated container height to: ', containerHeight);\n                            $(element[0]).css({height: containerHeight});\n                        }, 1000);\n                    }\n                }\n            );\n        }\n    };\n}]);\n\n// Directive to handle range inputs on mobile devices bc there is no angular touchend event handler\nvlocity.cardframework.registerModule.directive('insOsRangeHandler', function() {\n    'use strict';\n    return {\n        restrict: 'A',\n        link: function(scope, element, attrs) {\n            element.on('blur mouseup touchend', function(e) {\n                e.stopPropagation();\n                scope.$apply(attrs.insOsRangeChange);\n            });\n        }\n    };\n});","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-coverage-component/1/Vlocity/1529006927169","%vlocity_namespace%__HTML__c":"<article class=\"slds-p-horizontal--medium nds-p-horizontal--medium vloc-ins-coverages-card ng-hide\" ng-repeat=\"coverage in sortedCoverages[childProduct.instanceKey || childProduct.productName || childProduct.Name] track by $index\" ng-show=\"coverage.RecordTypeName__c === 'CoverageSpec' || coverage[nsPrefix + 'RecordTypeName__c'] === 'CoverageSpec' || (coverage.parentProduct && insCoveragesConfig.showParentProduct)\" ng-class=\"decideCoverageCardClassNames(coverage)\" scope=\"\" onload=\"\" ng-style=\"{'z-index': coverage.popoverOpen ? 7000 : (5000 - $index)}\" ins-rules-evaluate ins-rules-product=\"coverage\">\n    <div class=\"slds-m-bottom--small nds-m-bottom--small vloc-ins-coverages-heading\" ng-if=\"coverage.firstOptional\">\n        <div class=\"slds-text-align--left nds-text-align--left vloc-ins-coverage-main-heading\">\n            <h2 class=\"slds-text-heading--medium nds-text-heading--medium\">Optional</h2>\n        </div>\n    </div>\n    <div class=\"vloc-ins-coverages-card-inner-wrapper\" ng-class=\"{'optional-coverage': coverage.isOptional && !coverage.isAddedOptional, 'optional-coverage-selected': coverage.isOptional && coverage.isSelected, 'accordion-active': doAccordion(coverage)}\" bs-collapse>\n        <div class=\"slds-grid slds-p-top--medium slds-p-left--medium slds-p-right--x-large slds-p-bottom--x-small slds-is-relative nds-grid nds-p-top--medium nds-p-left--medium nds-p-right--x-large nds-p-bottom--x-small nds-is-relative vloc-ins-coverages-header-container\" ng-class=\"{'has-price': coverage.Price}\">\n            <div class=\"slds-media slds-media--center slds-has-flexi-truncate nds-media nds-media--center nds-has-flexi-truncate vloc-ins-coverages-header\">\n                <div class=\"slds-media__figure slds-m-right--large nds-media__figure nds-m-right--large\" ng-if=\"!coverage.isOptional && !coverage.parentProduct\">\n                    <img ng-src=\"{{instanceHost + coverage.ImageId}}\" class=\"vloc-ins-coverage-custom-image\" ng-if=\"coverage.ImageId\" />\n                    <span class=\"slds-icon_container nds-icon_container\" ng-if=\"!coverage.ImageId\">\n                        <slds-svg-icon sprite=\"'custom'\" size=\"'large'\" icon=\"'custom91'\"></slds-svg-icon>\n                        <span class=\"slds-assistive-text nds-assistive-text\">Default Icon</span>\n                    </span>\n                </div>\n                <div class=\"slds-media__figure slds-m-right--large slds-form-element nds-media__figure nds-m-right--large nds-form-element vloc-ins-coverages-optional-checkbox\" ng-if=\"coverage.isOptional\">\n                    <div class=\"slds-form-element__control nds-form-element__control\">\n                        <span class=\"slds-checkbox--add-button nds-checkbox--add-button\">\n                            <input type=\"checkbox\" name=\"options\" id=\"optional-coverage-{{childProductIndex}}-{{$index}}\" class=\"slds-assistive-text nds-assistive-text\" ng-disabled=\"coverage.isExcluded\" ng-model=\"coverage.isSelected\" ng-change=\"selectOptionalCoverage(coverage, bpTree.response, control, scpReference)\" />\n                            <label class=\"slds-checkbox--faux nds-checkbox--faux\" for=\"optional-coverage-{{childProductIndex}}-{{$index}}\">\n                                <span class=\"slds-assistive-text nds-assistive-text\">Select optional coverage</span>\n                            </label>\n                        </span>\n                    </div>\n                </div>\n                <div class=\"slds-grid slds-grid--align-spread slds-media__body nds-grid nds-grid--align-spread nds-media__body vloc-ins-coverage-child-name-description-container\">\n                    <div class=\"slds-col slds-p-right--medium nds-col nds-p-right--medium\">\n                        <h3 class=\"slds-text-heading--large nds-text-heading--large vloc-ins-coverages-child-name\">{{coverage.Name || coverage.productName}}</h3>\n                        <div class=\"slds-text-body--regular nds-text-body--regular vloc-ins-coverages-child-description\">{{coverage.Description}}</div>\n                    </div>\n                    <div class=\"slds-text-heading--small nds-text-heading--small vloc-ins-coverages-total\" ng-hide=\"coverage.parentProduct\">{{coverage.Price | currency: currencyCode: 0}}</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"vloc-product-attribute-category-container\" bs-collapse-target ng-class=\"{'accordion-toggle-active': doAccordion(coverage)}\">\n            <div class=\"vloc-product-attribute-category\" ng-repeat=\"category in coverage.attributeCategories.records track by $index\" ng-class=\"{'category-accordion': insCoveragesConfig.attrCatAccordion, 'last': $last}\" bs-collapse ng-style=\"{'z-index': (5555 - $index)}\">\n                <div class=\"vloc-ins-coverages-coverage-row-container\" ng-class=\"{'toggle-categories': insCoveragesConfig.attrCatAccordion && category.productAttributes.totalSize >= insCoveragesConfig.coverageAccordionMinAttrs}\" bs-collapse-target>\n                    <h4 class=\"vloc-product-attribute-category-name\" ng-if=\"insCoveragesConfig.attrCatAccordion && category.productAttributes.totalSize < insCoveragesConfig.coverageAccordionMinAttrs\">{{category.Name}}</h4>\n                    <h4 class=\"vloc-product-attribute-category-name accordion-toggle\" ng-if=\"insCoveragesConfig.attrCatAccordion && category.productAttributes.totalSize >= insCoveragesConfig.coverageAccordionMinAttrs\" bs-collapse-toggle>\n                        <slds-svg-icon sprite=\"'utility'\" icon=\"'chevronright'\" size=\"'xx-small'\" extra-classes=\"'slds-m-right--xx-small nds-m-right--xx-small'\"></slds-svg-icon>\n                        <span>{{category.Name}}</span>\n                    </h4>\n                    <div class=\"vloc-ins-coverages-coverage-row-attributes-outer-container\">\n                        <div class=\"vloc-ins-coverages-coverage-row-inner-container\" ng-repeat=\"attribute in category.productAttributes.records track by $index\" ng-if=\"!attribute.hiddenByRule && attribute.inputType !== 'equalizer'\" ng-style=\"{'z-index': (100 + (100 * (100 - $parent.$index)) - $index)}\" ins-rules-evaluate=\"attribute\" ins-rules-coverage=\"coverage\" ng-hide=\"attribute.hidden\">\n                            <div ins-os-include-template=\"{{customTemplates.AttributesDisplayTemplate}}\"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"vloc-ins-coverages-collapse-toggle\" ng-if=\"doAccordion(coverage)\" bs-collapse-toggle ng-click=\"stopPropagation($event)\">\n                <span class=\"toggle-label\"><span class=\"toggle-show\">Show</span><span class=\"toggle-hide\">Hide</span> Coverage Attributes</span>\n                <slds-svg-icon sprite=\"'utility'\" icon=\"'chevrondown'\" size=\"'xx-small'\" extra-classes=\"'slds-m-left--xx-small slds-m-right--xx-small nds-m-left--xx-small nds-m-right--xx-small'\"></slds-svg-icon>\n            </div>\n        </div>\n    </div>\n</article>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"// Variables:\n$royal-blue: #0070D2;\n$light-blue-bg: #F8FBFE;\n$text-navy: #00396b;\n$dark-navy: #19355E;\n$attr-label: #16325C;\n$border-color: #d8dde6;\n\n// Mixins\n@mixin changeColor($newColor) {\n    &.optional-coverage {\n        .vloc-ins-coverages-card-inner-wrapper {\n            background-color: lighten($newColor, 72%);\n            transition: background-color 150ms ease-in,\n                        border-color 150ms ease-in;\n\n            &.optional-coverage {\n                background-color: lighten($newColor, 72%);\n\n                &:hover {\n                    border-color: $newColor;\n                }\n            }\n\n            .vloc-ins-coverages-header {\n                .vloc-ins-coverages-child-name {\n                    color: $attr-label;\n                }\n\n                .vloc-ins-coverages-child-description {\n                    color: #6187C0;\n                }\n            }\n\n            .vloc-product-attribute-category-container {\n                .vloc-ins-coverages-collapse-toggle {\n                    &:hover {\n                        background-color: darken($light-blue-bg, 3%);\n                    }\n                }\n            }\n        }\n\n        .vloc-product-attribute-category {\n            .vloc-ins-coverages-coverage-row-container {\n                .vloc-product-attribute-category-name {\n                    &.accordion-toggle {\n                        color: #49739c;\n\n                        .nds-icon {\n                            fill: #49739c;\n                        }\n\n                        &:hover {\n                            color: darken(#49739c, 10%);\n\n                            .nds-icon {\n                                fill: darken(#49739c, 10%);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        &.parent-product {\n            .vloc-ins-coverages-card-inner-wrapper {\n                .vloc-ins-coverages-header {\n                    .vloc-ins-coverages-child-description {\n                        color: $attr-label;\n                    }\n                }\n            }\n        }\n    }\n}\n.via-nds {\n\n    .nds-spinner_container {\n        z-index: 9999;\n    }\n\n    .vloc-validation-icon {\n        svg {\n            fill: #000000;\n        }\n    }\n\n    .vloc-ins-multi-item-child-customize-container {\n        .vloc-ins-multi-item-toggle-plan-details {\n            position: absolute;\n            z-index: 6;\n            top: 1.8rem;\n            left: 4rem;\n            border: none;\n            margin: 0;\n            padding: 0 0.25rem;\n            text-align: left;\n            line-height: 1.8;\n            font-size: 0.875rem;\n            width: auto;\n\n            &.menu-open {\n                z-index: 4;\n            }\n        }\n        .vloc-ins-multi-item-child-customize {\n            transition: height 250ms cubic-bezier(0.65, 0.05, 0.36, 1);\n            overflow: hidden;\n            position: relative;\n            z-index: 1;\n\n            &:not(.in) {\n                height: 0 !important;\n            }\n\n            &.in {\n                height: auto;\n            }\n        }\n    }\n\n    .vloc-ins-coverages-container {\n        width: 100%;\n        margin: 0;\n\n        .vloc-ins-product-name {\n            font-size: 1.25rem;\n            font-weight: 400;\n            padding: 0 0.65rem 0.75rem;\n        }\n\n        .vloc-ins-coverages-card {\n            background-color: $light-blue-bg;\n            position: relative;\n\n            .vloc-ins-coverages-heading {\n                padding-left: 0.625rem;\n            }\n            \n            .vloc-ins-coverage-custom-image {\n                width: 2rem;\n                height: auto;\n            }\n\n            input {\n                min-height: 0;\n                max-height: 2rem;\n                height: auto;\n            }\n\n            .nds-checkbox__label {\n                .nds-form-element__label {\n                    display: inline-block;\n                }\n            }\n\n            .vloc-ins-coverage-main-heading {\n                h2 {\n                    font-weight: 400;\n                }\n            }\n\n            .vloc-ins-coverages-card-inner-wrapper {\n                transition: background-color 150ms ease-in,\n                            border-color 150ms ease-in;\n\n                .vloc-ins-coverages-total {\n                    font-size: 1.25rem;\n                    display: flex;\n                    align-items: flex-end;\n                }\n\n                .vloc-ins-coverages-header-container {\n                    .vloc-ins-coverages-header {\n                        .nds-media__figure {\n                            .nds-icon_container {\n                                background: transparent;\n\n                                .nds-icon {\n                                    fill: $royal-blue;\n                                    margin: -0.5rem;\n                                }\n                            }\n                        }\n                        .vloc-ins-coverage-child-name-description-container {\n                            padding-bottom: 0.25rem;\n\n                            .nds-text-body--regular {\n                                line-height: 1.4;\n                                font-size: 1rem;\n                                font-weight: 100;\n                            }\n                        }\n\n                        .vloc-ins-coverages-child-name {\n                            font-weight: bold;\n                            font-size: 1.4rem;\n                            color: $attr-label;\n                        }\n\n                        .vloc-ins-coverages-child-description {\n                            font-style: italic;\n                            color: #6187C0;\n                        }\n                    }\n\n                    &.has-price {\n                        margin-bottom: 0.5rem;\n\n                        .vloc-ins-coverage-child-name-description-container {\n                            border-bottom: 1px solid darken(#f8fbfe, 4%);\n                        }\n                    }\n                }\n\n                .vloc-product-attribute-category-container {\n                    max-height: 0;\n                    overflow: hidden;\n                    transition: max-height 250ms cubic-bezier(0.65, 0.05, 0.36, 1),\n                                padding 250ms cubic-bezier(0.65, 0.05, 0.36, 1);\n                    border-bottom: 1px solid $border-color;\n\n                    .vloc-product-attribute-category {\n                        margin-bottom: 0;\n                        position: relative;\n\n                        &.last {\n                            margin-bottom: 0.5rem;\n                        }\n                    }\n\n                    .vloc-ins-coverages-collapse-toggle {\n                        position: absolute;\n                        height: 2rem;\n                        width: 100%;\n                        bottom: 0;\n                        left: 0;\n                        text-align: center;\n                        font-size: 0.75rem;\n                        line-height: 2rem;\n                        user-select: none;\n                        cursor: pointer;\n                        background-color: transparent;\n                        transition: background-color 150ms ease-in;\n\n                        &:hover {\n                            background-color: darken($light-blue-bg, 3%);\n                        }\n\n                        .toggle-label {\n                            .toggle-show {\n                                display: inline;\n                            }\n\n                            .toggle-hide {\n                                display: none;\n                            }\n                        }\n\n                        .nds-icon {\n                            transition: transform 150ms ease-in;\n                            position: relative;\n                            top: -1px;\n                        }\n                    }\n\n                    &.in {\n                        max-height: 150rem;\n                        padding: 0 0 0.25rem 0;\n                        overflow: visible;\n\n                        &.in-add-active {\n                            overflow: hidden;\n                        }\n\n                        .vloc-ins-coverages-collapse-toggle {\n                            .toggle-label {\n                                .toggle-show {\n                                    display: none;\n                                }\n\n                                .toggle-hide {\n                                    display: inline;\n                                }\n                            }\n\n                            .nds-icon {\n                                transform: rotate(180deg);\n                            }\n                        }\n                    }\n\n                    &.accordion-toggle-active {\n                        .vloc-product-attribute-category {\n                            &.last {\n                                margin-bottom: 0;\n                            }\n                        }\n                    }\n                }\n\n                &.accordion-active {\n                    position: relative;\n                    padding-bottom: 2rem;\n\n                    .vloc-product-attribute-category-container {\n                        border-bottom: none;\n\n                        .vloc-ins-coverages-collapse-toggle {\n                            border-bottom: 1px solid $border-color;\n                        }\n                    }\n                }\n\n                &.optional-coverage {\n                    background-color: transparent;\n                    border-color: transparent;\n                    border-radius: 0.25rem;\n                    background-color: $light-blue-bg;\n\n                    &:hover {\n                        border-color: darken($royal-blue, 10%);\n                    }\n                    \n                    &.accordion-active {\n                        .vloc-product-attribute-category-container {\n                            border-bottom: none;\n\n                            .vloc-ins-coverages-collapse-toggle {\n                                border-bottom: none;\n                            }\n                        }\n                    }\n\n                    .vloc-ins-coverages-optional-checkbox {\n                        .vloc-ins-coverages-optional-checkbox-label {\n                            cursor: pointer;\n                        }\n                    }\n                }\n\n                &.optional-coverage-selected {\n                    cursor: pointer;\n\n                    &.accordion-active {\n                        .vloc-product-attribute-category-container {\n                            .vloc-ins-coverages-collapse-toggle {\n                                border-bottom: 1px solid $border-color;\n                            }\n                        }\n                    }\n                }\n            }\n\n            .vloc-product-attribute-category {\n                .vloc-ins-coverages-coverage-row-container {\n                    max-height: 0;\n                    overflow: hidden;\n                    transition: max-height 250ms cubic-bezier(0.65, 0.05, 0.36, 1);\n\n                    &.toggle-categories {\n                        position: relative;\n                        padding-top: 1.25rem;\n                    }\n\n                    .vloc-product-attribute-category-name {\n                        font-weight: 400;\n                        font-size: 0.9375rem;\n\n                        &.accordion-toggle {\n                            cursor: pointer;\n                            position: absolute;\n                            top: 0;\n                            left: 0;\n                            color: #49739c;\n                            transition: color 150ms ease-in;\n\n                            .nds-icon {\n                                transition: transform 150ms ease-in;\n                                position: relative;\n                                fill: #49739c;\n                                transition: fill 150ms ease-in;\n                                top: -1px;\n                            }\n\n                            &:hover {\n                                color: darken(#49739c, 10%);\n\n                                .nds-icon {\n                                    fill: darken(#49739c, 10%);\n                                }\n                            }\n                        }\n                    }\n\n                    &.in {\n                        max-height: 100rem;\n                        overflow: visible;\n\n                        &.in-add-active {\n                            overflow: hidden;\n                        }\n\n                        .vloc-product-attribute-category-name {\n                            &.accordion-toggle {\n                                .nds-icon {\n                                    transform: rotate(90deg);\n                                }\n                            }\n                        }\n                    }\n                }\n\n                &.category-accordion {\n                    border-bottom: 1px solid rgba(223, 230, 237, 1);\n                    margin: 0 9.5rem 0.75rem 5rem;\n                    padding: 0.75rem 0 0.5rem;\n\n                    &.last {\n                        padding-bottom: 0;\n                        border-bottom: none;\n                    }\n\n                    .vloc-ins-coverages-coverage-row {\n                        margin: 0 0.5rem 0 1.5rem;\n                    }\n                }\n            }\n\n            &.optional-coverage {\n                padding-bottom: 0.75rem;\n                background-color: transparent;\n                border: none;\n\n                .vloc-ins-coverages-heading {\n                    padding-top: 0.75rem;\n                }\n\n                .vloc-ins-coverages-card-inner-wrapper {\n                    .vloc-product-attribute-category-container {\n                        border-bottom: none;\n                    }\n                }\n            }\n\n            &.added-optional-coverage {\n                background-color: $light-blue-bg;\n                padding: 0;\n\n                &.optional-coverage {\n                    .vloc-ins-coverages-card-inner-wrapper {\n                        margin-left: 1rem;\n                        margin-right: 1rem;\n\n                        .vloc-ins-coverages-header-container {\n                            .vloc-ins-coverages-optional-checkbox {\n                                .nds-checkbox {\n                                    [type=checkbox][disabled] {\n                                        + .nds-checkbox__label {\n                                            .nds-checkbox--faux {\n                                                background-color: $royal-blue;\n\n                                                &:after {\n                                                    border-color: white;\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            &.last-non-optional {\n                background-color: $light-blue-bg;\n                padding-bottom: 0;\n                margin-bottom: 0.75rem;\n\n                .vloc-ins-coverages-card-inner-wrapper {\n                    .vloc-product-attribute-category-container {\n                        border-bottom: none;\n                    }\n                }\n            }\n\n            &.parent-product {\n                .vloc-ins-coverages-card-inner-wrapper {\n                    border: none;\n                    border-bottom: 1px solid rgba($royal-blue, 0.5);\n                    padding-bottom: 0.25rem;\n\n                    .vloc-ins-coverages-header {\n                        .vloc-ins-coverages-child-name {\n                            font-size: 1.5rem;\n                        }\n                        .vloc-ins-coverages-child-description {\n                            color: $attr-label;\n                        }\n                    }\n\n                    .vloc-product-attribute-category-container {\n                        border-bottom: none;\n                    }\n                }\n            }\n\n            &.only-root {\n                border-bottom: 1px solid $royal-blue;\n                border-radius: 0.25rem;\n                margin-bottom: 1rem;\n\n                &.parent-product {\n                    .vloc-ins-coverages-card-inner-wrapper {\n                        border-bottom: none;\n                    }\n                }\n            }\n\n            &:hover {\n                @include changeColor($dark-navy);\n            }\n        }\n\n        .vloc-ins-coverages-total {\n            span {\n                font-weight: 400;\n            }\n        }\n    }\n\n    @media screen and (max-width: 767px) {\n        .vloc-ins-coverages-container {\n            .vloc-ins-coverages-card {\n                .vloc-product-attribute-category, .vloc-product-attribute-category.category-accordion {\n                    margin: 0 4.5rem 0.75rem 5rem;\n\n                    .vloc-ins-coverages-coverage-row {\n                        margin: 0;\n                    }\n\n                    .vloc-ins-coverages-coverage-limit {\n                        .nds-select {\n                            font-size: 16px;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    @media screen and (max-width: 600px) {\n        .vloc-ins-coverages-container {\n            .vloc-ins-coverages-card {\n                padding: 0;\n                .vloc-product-attribute-category, .vloc-product-attribute-category.category-accordion {\n                    margin: 0 1rem 0.75rem 1.5rem;\n                }\n            }\n        }\n    }\n\n    @media screen and (max-width: 500px) {\n        .vloc-ins-coverages-container {\n            .vloc-ins-coverages-card {\n                .vloc-ins-coverage-main-heading {\n                    h2 {\n                        font-size: 24px;\n                    }\n                }\n                .vloc-ins-coverages-total {\n                    font-size: 20px;\n                }\n                .vloc-ins-coverages-card-inner-wrapper {\n                    margin-left: 0;\n                    margin-right: 0;\n                }\n            }\n        }\n    }\n\n    @media screen and (max-width: 450px) {\n        .vloc-ins-coverages-container {\n            .vloc-ins-coverages-card {\n                .vloc-ins-coverages-card-inner-wrapper {\n                    .vloc-ins-coverages-header-container {\n                        padding-left: 1rem;\n                        padding-right: 1rem;\n                        position: relative;\n                        padding-bottom: 0;\n\n                        .vloc-ins-coverages-header {\n                            .nds-media__figure {\n                                margin-right: 0.75rem;\n                            }\n                            .vloc-ins-coverage-custom-image {\n                                width: 1.5rem;\n                            }\n                            .vloc-ins-coverages-child-name {\n                                font-size: 16px;\n                            }\n                            .vloc-ins-coverages-child-description {\n                                font-size: 12px;\n                            }\n                            .vloc-ins-coverage-child-name-description-container {\n                                .nds-text-body--regular {\n                                    font-size: .7rem;\n                                }\n                            }\n                        }\n                    }\n\n                    .vloc-ins-coverages-total {\n                        font-size: 14px;\n                    }\n                }\n\n                .vloc-ins-coverages-coverage-limit {\n                    .nds-select {\n                        font-size: 14px;\n                    }\n                }\n            }\n        }\n    }\n\n    @media screen and (max-width: 350px) {\n        .vloc-ins-coverages-container {\n            .vloc-ins-coverages-card {\n                .vloc-ins-coverages-card-inner-wrapper {\n                    .vloc-ins-coverages-header-container {\n                        padding-left: 0.75rem;\n                        padding-right: 0.75rem;\n                    }\n                }\n            }\n        }\n    }\n}\n\n// Upgraded SLDS Styles for Slider not available in OS\n.via-slds {\n\n    .slds-spinner_container {\n        z-index: 9999;\n    }\n\n    .slds-slider {\n        display: -ms-flexbox;\n        display: flex;\n        position: relative;\n        font-size: 0.8125rem;\n    }\n\n    input[type=range].slds-slider__range {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        width: 100%;\n        margin: 0.5rem 0;\n        background: transparent;\n        border-radius: 0.125rem;\n        padding: 0;\n\n        &:focus {\n            outline: 0;\n        }\n\n        &::-webkit-slider-thumb {\n            -webkit-appearance: none;\n            appearance: none;\n            width: 1rem;\n            height: 1rem;\n            border-radius: 50%;\n            background: #1589ee;\n            border: 0;\n            box-shadow: rgba(0, 0, 0, 0.16) 0 2px 3px;\n            cursor: pointer;\n            transition: background 0.15s ease-in-out;\n            margin-top: 2px;\n\n            &:hover {\n                background-color: #0070d2;\n            }\n        }\n\n        &::-webkit-slider-runnable-track {\n            width: 100%;\n            height: 4px;\n            cursor: pointer;\n            background: #ecebea;\n            border-radius: 0.125rem;\n        }\n\n        &::-moz-range-thumb {\n            -moz-appearance: none;\n            appearance: none;\n            width: 1rem;\n            height: 1rem;\n            border-radius: 50%;\n            background: #1589ee;\n            border: 0;\n            box-shadow: rgba(0, 0, 0, 0.16) 0 2px 3px;\n            cursor: pointer;\n            transition: background 0.15s ease-in-out;\n\n            &:hover {\n                background-color: #0070d2;\n            }\n        }\n\n        &::-moz-range-track {\n            width: 100%;\n            height: 4px;\n            cursor: pointer;\n            background: #ecebea;\n            border-radius: 0.125rem;\n        }\n\n        &::-ms-track {\n            width: 100%;\n            height: 4px;\n            cursor: pointer;\n            background: #ecebea;\n            border-radius: 0.125rem;\n            width: 100%;\n            background: transparent;\n            border-color: transparent;\n            color: transparent;\n            cursor: pointer;\n        }\n\n        &::-ms-thumb {\n            appearance: none;\n            width: 1rem;\n            height: 1rem;\n            border-radius: 50%;\n            background: #1589ee;\n            border: 0;\n            box-shadow: rgba(0, 0, 0, 0.16) 0 2px 3px;\n            cursor: pointer;\n            transition: background 0.15s ease-in-out;\n\n            &:hover {\n                background-color: #0070d2;\n            }\n        }\n\n        &:focus {\n            &::-webkit-slider-thumb,\n            &::-moz-range-thumb {\n                background-color: #0070d2;\n                box-shadow: 0 0 3px #0070D2;\n            }\n        }\n\n        &:active {\n            &::-webkit-slider-thumb,\n            &::-moz-range-thumb {\n                background-color: #0070d2;\n            }\n        }\n\n        &[disabled] {\n            &::-webkit-slider-thumb {\n                background-color: #ecebea;\n                cursor: default;\n            }\n            &::-webkit-slider-runnable-track {\n                background-color: #ecebea;\n                cursor: default;\n            }\n            &::-moz-range-thumb {\n                background-color: #ecebea;\n                cursor: default;\n            }\n            &::-moz-range-track {\n                background-color: #ecebea;\n                cursor: default;\n            }\n            &::-ms-thumb {\n                background-color: #ecebea;\n                cursor: default;\n            }\n            &::-ms-track {\n                background-color: #ecebea;\n                cursor: default;\n            }\n        }\n    }\n\n    .slds-slider__value {\n        padding: 0 0.5rem;\n    }\n\n    .slds-slider-label__label {\n        display: block;\n    }\n\n    .slds-slider_vertical {\n        height: 13.875rem;\n\n        .slds-slider__range {\n            width: 12rem;\n            height: 1rem;\n            transform: rotate(-90deg);\n            transform-origin: 6rem 6rem;\n        }\n\n        .slds-slider__value {\n            position: absolute;\n            left: 0;\n            bottom: 0;\n            padding: 0;\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-coverage-component","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-coverage-component/%vlocity_namespace%__VlocityUITemplate__c/ins-os-coverage-component"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-coverage-component","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-coverage-component","VlocityDataPackName":"ins-os-coverage-component","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".via-slds .vloc-ins-enr-sum-mobile-show {\n  display: none; }\n\n.via-slds .vloc-ins-enr-sum-outer-container {\n  width: 100%;\n  color: #16325C; }\n\n.via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container {\n  background-color: #f8fbfe;\n  border: 1px solid #d7dde6;\n  border-radius: 0.25rem;\n  width: 90%;\n  padding: 1.5rem 1.5rem 1.5rem 1rem;\n  margin: 0 auto 1rem auto; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container:last-child {\n    margin-bottom: 0; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container.more-than-three-attributes {\n    padding-bottom: 0;\n    max-height: 20rem;\n    overflow: hidden; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container.vloc-ins-enr-sum-product-data-expanded {\n    padding-bottom: 1.5rem;\n    max-height: none; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container .vloc-ins-enr-sum-product-left {\n    width: 4rem;\n    min-width: 4rem;\n    max-width: 4rem;\n    float: left; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container .vloc-ins-enr-sum-product-right {\n    width: calc(100% - 5rem);\n    float: right;\n    position: relative; }\n\n.via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-image {\n  min-height: 2.5rem;\n  margin-top: 0.25rem; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-image.is-custom-image {\n    min-height: 3.25rem;\n    padding-top: 0.25rem;\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-image .vloc-ins-enr-sum-product-custom-image {\n    max-width: 3.125rem;\n    max-height: 2.375rem;\n    display: block;\n    margin: 0 auto; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-image .vloc-ins-enr-sum-product-image-fallback {\n    background: transparent; }\n    .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-image .vloc-ins-enr-sum-product-image-fallback .slds-icon {\n      fill: #f06e2f;\n      width: 4rem;\n      height: 4rem; }\n\n.via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-top .vloc-ins-enr-sum-product-type {\n  text-transform: uppercase;\n  color: #4F6A92;\n  letter-spacing: 1px;\n  font-size: 0.875rem;\n  font-weight: 400; }\n\n.via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-top .vloc-ins-enr-sum-product-name {\n  font-size: 1.4rem;\n  font-weight: 400; }\n\n.via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-top .vloc-ins-enr-sum-product-description {\n  font-size: 0.8125rem; }\n\n.via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-top .vloc-ins-enr-sum-product-show-more-details {\n  font-size: 0.875rem;\n  display: inline-block;\n  margin-top: 0.75rem; }\n\n.via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container {\n  width: 100%;\n  margin-top: 1rem;\n  font-size: 0.875rem;\n  max-height: 9rem;\n  overflow: hidden; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container.vloc-ins-enr-sum-product-bottom {\n    margin-top: 0;\n    max-height: none;\n    overflow: visible; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container .vloc-ins-enr-sum-product-attr-value {\n    font-weight: 400;\n    padding-right: 6rem;\n    display: inline-block; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container .vloc-ins-enr-sum-product-data {\n    margin-bottom: 0.5rem; }\n    .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container .vloc-ins-enr-sum-product-data:nth-child(5) {\n      margin-bottom: 2rem; }\n    .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container .vloc-ins-enr-sum-product-data.vloc-ins-enr-sum-product-data-whos-covered .vloc-ins-enr-sum-product-attr-value {\n      padding-right: 0; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container.vloc-ins-enr-sum-product-data-expanded {\n    overflow: visible;\n    max-height: none !important; }\n    .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container.vloc-ins-enr-sum-product-data-expanded .vloc-ins-enr-sum-product-data:nth-child(5) {\n      margin-bottom: 0.5rem; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container .vloc-ins-enr-sum-view-change-link {\n    position: absolute;\n    right: 0;\n    bottom: 0.5rem; }\n\n@media screen and (max-width: 1310px) {\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container.more-than-three-attributes {\n    padding-bottom: 1rem; } }\n\n@media screen and (max-width: 1023px) {\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container {\n    width: 100%; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container {\n    width: 100%; }\n    .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container .vloc-ins-enr-sum-view-change-link {\n      position: static;\n      margin-top: 0.5rem;\n      display: inline-block; } }\n\n@media screen and (max-width: 767px) {\n  .via-slds .vloc-ins-enr-sum-mobile-show {\n    display: block; }\n  .via-slds .vloc-ins-enr-sum-mobile-hide {\n    display: none; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-image {\n    margin-top: 0;\n    float: left; }\n    .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-image.is-custom-image {\n      margin: 0 0.75rem 0.75rem 0;\n      padding: 0;\n      min-height: 2.75rem;\n      max-height: 2.75rem; }\n      .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-image.is-custom-image .vloc-ins-enr-sum-product-custom-image {\n        height: 2.75rem; }\n    .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-image .vloc-ins-enr-sum-product-image-fallback {\n      margin-top: -0.5rem;\n      margin-left: -0.75rem; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-type {\n    float: left;\n    line-height: 2.75rem;\n    text-transform: uppercase;\n    color: #4F6A92;\n    letter-spacing: 1px;\n    font-size: 0.875rem;\n    font-weight: 400;\n    margin-left: 1rem; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container {\n    padding: 1rem 1.5rem 1.5rem 1.5rem; }\n    .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container .vloc-ins-enr-sum-product-left {\n      float: none;\n      width: 100%;\n      min-width: auto;\n      max-width: none; }\n    .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container .vloc-ins-enr-sum-product-right {\n      width: 100%; } }\n\n@media screen and (max-width: 549px) {\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-container {\n    width: 100%; } }\n\n@media screen and (max-width: 479px) {\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container .vloc-ins-enr-sum-product-attr-label {\n    padding: 0; }\n  .via-slds .vloc-ins-enr-sum-container .vloc-ins-enr-sum-product-data-container .vloc-ins-enr-sum-product-attr-value {\n    padding-left: 1.5rem; } }\n","%vlocity_namespace%__CustomJavascript__c":"baseCtrl.prototype.setInsEnrSumData = function(control) {\n    var event = new CustomEvent('vloc-ins-enr-sum-data-change', { 'detail': control.vlcSI[control.itemsKey] });\n    baseCtrl.prototype.$scope.insEnrSumControlRef = control;\n    document.dispatchEvent(event);\n};\nvlocity.cardframework.registerModule.controller('insOsEnrolleeSummaryCtrl', ['$scope', '$rootScope', '$timeout', '$injector', function($scope, $rootScope, $timeout, $injector) {\n    'use strict';\n    var InsRulesEvaluationService;\n    if (angular.element('script[src*=\"InsRules\"]').length) {\n        InsRulesEvaluationService = $injector.get('InsRulesEvaluationService');\n    }\n\n    //*** instantiate $scope variables ***//\n    $scope.currencyCode = '$';\n    if (baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol) {\n        $scope.currencyCode = baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol;\n    }\n\n    //*** START LOGIC ***//\n    $rootScope.$watch('attributeUserValues', function(newValue, oldValue) {\n        var keysLength = 0;\n        if (newValue) {\n            delete newValue.undefined;\n            keysLength = Object.keys(newValue).length;\n            if (keysLength >= $scope.rootAndChildrenProductsKeys.length) {\n                // Have to do evaluation in JS because the data is manipulated here:\n                if ($rootScope.evalProductsArray && $rootScope.evalProductsArray.length) {\n                    InsRulesEvaluationService.doProductLoop($rootScope.evalProductsArray, true, false, true, true, null, function() {\n                        doSelectionProductLoop($scope.enrolledProducts);\n                    });\n                }\n                $timeout(function() {\n                    getParentAttributes($scope.enrolledProducts);\n                });\n            }\n        }\n    });\n\n    //*** START LOGIC ***//\n    document.addEventListener('vloc-ins-enr-sum-data-change', function(e) {\n        $scope.init(e.detail);\n    });\n\n    function doSelectionProductLoop(products, initLoop) {\n        console.log('products', products);\n        angular.forEach(products, function(product, i) {\n            if (initLoop) {\n                product.vlcSelected = true;\n                if (product.ProductCode && $scope.rootAndChildrenProductsKeys.indexOf(product.ProductCode) < 0) {\n                    $scope.rootAndChildrenProductsKeys.push(product.ProductCode);\n                }\n            }\n            if (product.childProducts && product.childProducts.records && product.childProducts.records.length) {\n                angular.forEach(product.childProducts.records, function(childProduct, j) {\n                    if (initLoop && (childProduct.RecordTypeName__c === 'CoverageSpec' || childProduct[baseCtrl.prototype.$scope.nsPrefix + 'RecordTypeName__c'] === 'CoverageSpec') && childProduct.ProductCode && $scope.rootAndChildrenProductsKeys.indexOf(childProduct.ProductCode) < 0) {\n                        $scope.rootAndChildrenProductsKeys.push(childProduct.ProductCode);\n                    }\n                    if (initLoop && ($scope.initProducts && i === $scope.initProducts.length - 1) && (j === product.childProducts.records.length - 1)) {\n                        $scope.completedProductAnalysis = true;\n                    }\n                });\n            }\n        });\n    }\n\n    function formatDate(date, isDatetime) {\n        var dateObj, formattedDate;\n        if (date) {\n            dateObj = new Date(date);\n            if (isDatetime) {\n                formattedDate = dateObj.toLocaleString();\n            } else {\n                formattedDate = dateObj.toLocaleDateString();\n            }\n        }\n        return formattedDate;\n    }\n\n    // Grabs the rest of the attributes if there are more than just the limit.\n    function getAttributeData(attribute) {\n        var attrData = {};\n        var i, j, key;\n        if (attribute.values && attribute.values[0].label && attribute.userValues && attribute.userValues.constructor !== Array) {\n            for (i = 0; i < attribute.values.length; i++) {\n                if (attribute.values[i].value === attribute.userValues) {\n                    attrData.label = attribute.label;\n                    attrData.valueLabel = attribute.values[i].label;\n                }\n            }\n        } else if (attribute.values && attribute.values[0].label && attribute.userValues && attribute.userValues.constructor === Array) {\n            for (j = 0; j < attribute.userValues.length; j++) {\n                if (attribute.userValues[j].constructor === Object && !angular.equals(attribute.userValues[j], {})) {\n                    for (key in attribute.userValues[j]) {\n                        if (attribute.userValues[j][key]) {\n                            attrData.label = attribute.label;\n                            if (!attrData.valueLabel) {\n                                attrData.valueLabel = key;\n                            } else {\n                                attrData.valueLabel = attrData.valueLabel + ', ' + key;\n                            }\n                        }\n                    }\n                } else {\n                    attrData.label = attribute.label;\n                    if (!attrData.valueLabel) {\n                        attrData.valueLabel = attribute.userValues[j];\n                    } else {\n                        attrData.valueLabel = attrData.valueLabel + ', ' + attribute.userValues[j];\n                    }\n                }\n            }\n        } else {\n            attrData.label = attribute.label;\n            attrData.valueLabel = attribute.userValues;\n            if (attribute.dataType === 'date') {\n                attrData.valueLabel = formatDate(attribute.userValues);\n            } else if (attribute.dataType === 'datetime') {\n                attrData.valueLabel = formatDate(attribute.userValues, true);\n            }\n        }\n        // console.log('attrData', attrData);\n        return attrData;\n    }\n\n    // Gets the attributes from the parent product to print below the name and above the coverages:\n    function getParentAttributes(products) {\n        var i, j, k, l, product, attrCats, prodAttrs, dummyObj, values, labelAndValue;\n        $scope.summaryParentAttrs = {};\n        for (i = 0; i < products.length; i++) {\n            product = products[i];\n            if (!product.dummyProduct) {\n                attrCats = product.attributeCategories.records;\n                for (j = 0; j < attrCats.length; j++) {\n                    prodAttrs = attrCats[j].productAttributes.records;\n                    if (prodAttrs && prodAttrs.length) {\n                        for (k = 0; k < prodAttrs.length; k++) {\n                            if (!$scope.summaryParentAttrs[product.ProductCode]) {\n                                $scope.summaryParentAttrs[product.ProductCode] = [];\n                            }\n                            labelAndValue = getAttributeData(prodAttrs[k]);\n                            dummyObj = {};\n                            dummyObj.label = labelAndValue.label;\n                            dummyObj.dataType = prodAttrs[k].dataType;\n                            dummyObj.inputType = prodAttrs[k].inputType;\n                            dummyObj.valueLabel = labelAndValue.valueLabel;\n                            dummyObj.attributeDisplaySequence = prodAttrs[k].displaySequence;\n                            dummyObj.categoryDisplaySequence = attrCats[j].displaySequence;\n                            dummyObj.categoryCode = attrCats[j].Code__c || attrCats[j][$scope.$scope.nsPrefix + 'Code__c'];\n                            dummyObj.hiddenByRule = prodAttrs[k].hiddenByRule;\n                            dummyObj.hidden = prodAttrs[k].hidden;\n                            // If the attribute is customizable and there are values defined,\n                            // we need to grab the label from the values that has a value equal\n                            // to the userValues and use that.\n                            values = prodAttrs[k].values;\n                            if (values && values.length && !prodAttrs[k].readonly) {\n                                for (l = 0; l < values.length; l++) {\n                                    if (values[l].value === prodAttrs[k].userValues) {\n                                        dummyObj.valueLabel = values[l].label;\n                                    }\n                                }\n                            }\n                            $scope.summaryParentAttrs[product.ProductCode].push(dummyObj);\n                        }\n                    }\n                }\n                // Sort by category displaySequence first, then by attribute displaySequence, then by label\n                $scope.summaryParentAttrs[product.ProductCode] = $scope.summaryParentAttrs[product.ProductCode].sort(function(x, y) {\n                    if (x.categoryDisplaySequence === y.categoryDisplaySequence) {\n                        if (x.attributeDisplaySequence < y.attributeDisplaySequence) {\n                            return -1;\n                        } else {\n                            return 1;\n                        }\n                    } else if (x.categoryDisplaySequence < y.categoryDisplaySequence) {\n                        return -1;\n                    } else if (x.categoryDisplaySequence > y.categoryDisplaySequence) {\n                        return 1;\n                    } else {\n                        if (x.label < y.label) {\n                            return -1;\n                        } else {\n                            return 1;\n                        }\n                    }\n                });\n                if ($scope.enrollmentFlow) {\n                    $scope.summaryParentAttrs[product.ProductCode].splice(3, $scope.summaryParentAttrs[product.ProductCode].length - 3);\n                }\n            }\n        }\n        console.log('$scope.summaryParentAttrs', $scope.summaryParentAttrs);\n    }\n\n    $scope.init = function(products) {\n        $scope.summaryParentAttrs = {};\n        $scope.rootAndChildrenProductsKeys = [];\n        $scope.enrolledProducts = products;\n        console.log('products', $scope.enrolledProducts);\n        doSelectionProductLoop($scope.enrolledProducts, true);\n        if (!InsRulesEvaluationService) {\n            getParentAttributes($scope.enrolledProducts);\n        }\n    };\n\n    $scope.getImageNameFromType = function(type) {\n        if (!type) return;\n        return type.toLowerCase().replace(/[_ ]/, '-');\n    };\n\n    $scope.getWhosCovered = function(product) {\n        var whosCovered = 'You';\n        if (product && product.dependents) {\n            if (product.dependents.length) {\n                angular.forEach(product.dependents, function(dependent, depIterator) {\n                    if (dependent.FirstName && dependent.LastName) {\n                        if (depIterator !== product.dependents.length - 1) {\n                            whosCovered += ', ' + dependent.FirstName + ' ' + dependent.LastName;\n                        } else {\n                            whosCovered += ', & ' + dependent.FirstName + ' ' + dependent.LastName;\n                        }\n                    }\n                });\n            } else if (product.dependents.FirstName && product.dependents.LastName) {\n                whosCovered += ' & ' + product.dependents.FirstName + ' ' + product.dependents.LastName;\n            }\n        }\n        return whosCovered;\n    };\n}]);\n\nvlocity.cardframework.registerModule.directive('insSummaryCalcHeight', ['$timeout', function($timeout) {\n    'use strict';\n    return {\n        restrict: 'A',\n        link: function(scope, element, attrs) {\n            var watchElementsClassNames = [\n                '.vloc-ins-enr-sum-product-data'\n            ];\n            scope.$watch(\n                // This function is returns the value that is watched in the next function.\n                // Collecting the length of child elements that would affect the height of this container.\n                function() {\n                    var watchElementsLength = 0;\n                    angular.forEach(watchElementsClassNames, function(watchElementsClassName) {\n                        if ($(element[0]).find(watchElementsClassName) && $(element[0]).find(watchElementsClassName).length) {\n                            if ($(element[0]).find(watchElementsClassName).length < 5) {\n                                watchElementsLength = watchElementsLength + $(element[0]).find(watchElementsClassName).length;\n                            } else {\n                                watchElementsLength = watchElementsLength + 5;\n                            }\n                        }\n                    });\n                    return watchElementsLength;\n                },\n                function(newValue, oldValue) {\n                    var containerHeight = 0;\n                    $timeout(function() {\n                        if (newValue && newValue !== oldValue && !attrs.style) {\n                            angular.forEach(element[0].children, function(child, i) {\n                                if (i < newValue) {\n                                    containerHeight += $(child).outerHeight(true);\n                                } else {\n                                    i = element[0].children.length;\n                                }\n                            });\n                            containerHeight = containerHeight + 'px';\n                            console.log('applied max-height: ' + containerHeight + ' to ', element[0]);\n                            $(element[0]).css({'max-height': containerHeight});\n                        }\n                    }, 100);\n                }\n            );\n        }\n    };\n}]);","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-enrollee-benefits-summary/1/Vlocity/1521570452624","%vlocity_namespace%__HTML__c":"<div class=\"vloc-ins-enr-sum-outer-container\" ng-if=\"control.vlcSI[control.itemsKey]\">\n    <div ng-if=\"!control.vlcSI[control.itemsKey][0].$$hashKey\" ng-init=\"baseCtrl.setInsEnrSumData(control)\"></div>\n    <div class=\"vloc-ins-enr-sum-container\" ng-controller=\"insOsEnrolleeSummaryCtrl\">\n        <div class=\"slds-clearfix nds-clearfix vloc-ins-enr-sum-product-container\" ng-repeat=\"product in enrolledProducts\" ng-init=\"onSelectItem(control, product, $index, this)\" ng-class=\"{'vloc-ins-enr-sum-product-data-expanded': product.expandAttrs, 'more-than-three-attributes': summaryParentAttrs[product.ProductCode].length > 3}\">\n            <div class=\"slds-clearfix nds-clearfix vloc-ins-enr-sum-product-left\">\n                <div class=\"vloc-ins-enr-sum-product-image\" ng-class=\"{'is-custom-image': product.ImageId}\">\n                    <img ng-src=\"../resource/{{baseCtrl.$scope.nsPrefix}}InsResource/{{getImageNameFromType(product.Type__c)}}.svg\" class=\"vloc-ins-enr-sum-product-custom-image\" />\n                </div>\n                <h3 class=\"vloc-ins-enr-sum-mobile-show vloc-ins-enr-sum-product-type\">{{product.Type__c}}</h3>\n            </div>\n            <div class=\"vloc-ins-enr-sum-product-right\">\n                <div class=\"vloc-ins-enr-sum-product-top\">\n                    <h3 class=\"vloc-ins-enr-sum-mobile-hide vloc-ins-enr-sum-product-type\">{{product.Type__c}}</h3>\n                    <h2 class=\"vloc-ins-enr-sum-product-name\">{{product.Name}}</h2>\n                    <h2 class=\"slds-truncate nds-truncate vloc-ins-enr-sum-product-description\">{{product.Description}}</h2>\n                    <a href=\"javascript:void(0)\" class=\"vloc-ins-enr-sum-product-show-more-details\" ng-click=\"product.expandAttrs = !product.expandAttrs\" ng-if=\"summaryParentAttrs[product.ProductCode].length >= 5\">\n                        <span ng-if=\"!product.expandAttrs\">Show all plan details</span>\n                        <span ng-if=\"product.expandAttrs\">Show less plan details</span>\n                    </a>\n                </div>\n                <div class=\"vloc-ins-enr-sum-product-data-container\" ng-class=\"{'vloc-ins-enr-sum-product-data-expanded': product.expandAttrs}\" ins-summary-calc-height>\n                    <div class=\"slds-grid nds-grid vloc-ins-enr-sum-product-data vloc-ins-enr-sum-product-data-whos-covered\">\n                        <div class=\"slds-size--2-of-5 slds-truncate slds-p-right--x-small nds-size--2-of-5 nds-truncate nds-p-right--x-small vloc-ins-enr-sum-product-attr-label\">\n                            <span class=\"vloc-ins-enr-sum-premium-label\">Who's Covered</span>\n                        </div>\n                        <div class=\"slds-size--3-of-5 nds-size--3-of-5 vloc-ins-enr-sum-product-attr-value\">\n                            <span class=\"vloc-ins-enr-sum-premium-value\">{{getWhosCovered(product)}}</span>\n                        </div>\n                    </div>\n                    <div class=\"slds-grid nds-grid vloc-ins-enr-sum-product-data\">\n                        <div class=\"slds-size--2-of-5 slds-truncate slds-p-right--x-small nds-size--2-of-5 nds-truncate nds-p-right--x-small vloc-ins-enr-sum-product-attr-label\">\n                            <span class=\"vloc-ins-enr-sum-premium-label\">Monthly Premium</span>\n                        </div>\n                        <div class=\"slds-size--3-of-5 nds-size--3-of-5 vloc-ins-enr-sum-product-attr-value\">\n                            <span class=\"vloc-ins-enr-sum-premium-value\">{{product.Price | currency: currencyCode: 0}}</span>\n                        </div>\n                    </div>\n                    <div class=\"slds-grid nds-grid vloc-ins-enr-sum-product-data\" ng-repeat=\"attribute in summaryParentAttrs[product.ProductCode]\" ng-if=\"attribute.label && !attribute.hiddenByRule && attribute.inputType !== 'equalizer'\" ng-hide=\"attribute.hidden\">\n                        <div class=\"slds-size--2-of-5 slds-truncate slds-p-right--x-small nds-size--2-of-5 nds-truncate nds-p-right--x-small vloc-ins-enr-sum-product-attr-label\">\n                            <span title=\"{{attribute.label}}\">{{attribute.label}}</span>\n                        </div>\n                        <div class=\"slds-size--3-of-5 nds-size--3-of-5 vloc-ins-enr-sum-product-attr-value\">\n                            <span ng-if=\"attribute.dataType === 'currency'\">{{attribute.valueLabel | currency: currencyCode: 0}}</span>\n                            <span ng-if=\"attribute.dataType === 'percentage'\">{{attribute.valueLabel}}%</span>\n                            <span ng-if=\"attribute.dataType !== 'currency' && attribute.dataType !== 'percentage'\">{{attribute.valueLabel}}</span>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"vloc-ins-enr-sum-product-bottom vloc-ins-enr-sum-product-data-container\">\n                    <a href=\"javascript:void(0)\" class=\"vloc-ins-enr-sum-view-change-link ng-hide\" ng-click=\"\">View/change</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"// Color Variables\n$enrollment-text: #16325C;\n$enrollment-type: #4F6A92;\n$enrollment-cards-border: #d7dde6;\n$enrollment-cards-bg: #f8fbfe;\n\n.via-slds {\n    .vloc-ins-enr-sum-mobile-show {\n        display: none;\n    }\n    .vloc-ins-enr-sum-outer-container {\n        width: 100%;\n        color: $enrollment-text;\n    }\n\n    .vloc-ins-enr-sum-container {\n        .vloc-ins-enr-sum-product-container {\n            background-color: $enrollment-cards-bg;\n            border: 1px solid $enrollment-cards-border;\n            border-radius: 0.25rem;\n            width: 90%;\n            padding: 1.5rem 1.5rem 1.5rem 1rem;\n            margin: 0 auto 1rem auto;\n\n            &:last-child {\n                margin-bottom: 0;\n            }\n\n            &.more-than-three-attributes {\n                padding-bottom: 0;\n                max-height: 20rem;\n                overflow: hidden;\n            }\n\n            &.vloc-ins-enr-sum-product-data-expanded {\n                padding-bottom: 1.5rem;\n                max-height: none;\n            }\n\n            .vloc-ins-enr-sum-product-left {\n                width: 4rem;\n                min-width: 4rem;\n                max-width: 4rem;\n                float: left;\n            }\n            .vloc-ins-enr-sum-product-right {\n                width: calc(100% - 5rem);\n                float: right;\n                position: relative;\n            }\n        }\n\n        .vloc-ins-enr-sum-product-image {\n            min-height: 2.5rem;\n            margin-top: 0.25rem;\n\n            &.is-custom-image {\n                min-height: 3.25rem;\n                padding-top: 0.25rem;\n                margin-top: 0.5rem;\n                margin-bottom: 0.5rem;\n            }\n\n            .vloc-ins-enr-sum-product-custom-image {\n                max-width: 3.125rem;\n                max-height: 2.375rem;\n                display: block;\n                margin: 0 auto;\n            }\n\n            .vloc-ins-enr-sum-product-image-fallback {\n                background: transparent;\n\n                .slds-icon {\n                    fill: #f06e2f;\n                    width: 4rem;\n                    height: 4rem;\n                }\n            }\n        }\n\n        .vloc-ins-enr-sum-product-top {\n            .vloc-ins-enr-sum-product-type {\n                text-transform: uppercase;\n                color: $enrollment-type;\n                letter-spacing: 1px;\n                font-size: 0.875rem;\n                font-weight: 400;\n            }\n            .vloc-ins-enr-sum-product-name {\n                font-size: 1.4rem;\n                font-weight: 400;\n            }\n            .vloc-ins-enr-sum-product-description {\n                font-size: 0.8125rem;\n            }\n            .vloc-ins-enr-sum-product-show-more-details {\n                font-size: 0.875rem;\n                display: inline-block;\n                margin-top: 0.75rem;\n            }\n        }\n\n        .vloc-ins-enr-sum-product-data-container {\n            width: 100%;\n            margin-top: 1rem;\n            font-size: 0.875rem;\n            max-height: 9rem;\n            overflow: hidden;\n\n            &.vloc-ins-enr-sum-product-bottom {\n                margin-top: 0;\n                max-height: none;\n                overflow: visible;\n            }\n\n            .vloc-ins-enr-sum-product-attr-value {\n                font-weight: 400;\n                padding-right: 6rem;\n                display: inline-block;\n            }\n\n            .vloc-ins-enr-sum-product-data {\n                margin-bottom: 0.5rem;\n\n                &:nth-child(5) {\n                    margin-bottom: 2rem;\n                }\n\n                &.vloc-ins-enr-sum-product-data-whos-covered {\n                    .vloc-ins-enr-sum-product-attr-value {\n                        padding-right: 0;\n                    }\n                }\n            }\n\n            &.vloc-ins-enr-sum-product-data-expanded {\n                overflow: visible;\n                max-height: none !important; // overriding an inline style added by directive\n\n                .vloc-ins-enr-sum-product-data {\n                    &:nth-child(5) {\n                        margin-bottom: 0.5rem;\n                    }\n                }\n            }\n\n            .vloc-ins-enr-sum-view-change-link {\n                position: absolute;\n                right: 0;\n                bottom: 0.5rem;\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 1310px) {\n    .via-slds {\n        .vloc-ins-enr-sum-container {\n            .vloc-ins-enr-sum-product-container {\n                &.more-than-three-attributes {\n                    padding-bottom: 1rem;\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 1023px) {\n    .via-slds {\n        .vloc-ins-enr-sum-container {\n            .vloc-ins-enr-sum-product-container {\n                width: 100%;\n            }\n            .vloc-ins-enr-sum-product-data-container {\n                width: 100%;\n\n                .vloc-ins-enr-sum-view-change-link {\n                    position: static;\n                    margin-top: 0.5rem;\n                    display: inline-block;\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 767px) {\n    .via-slds {\n        .vloc-ins-enr-sum-mobile-show {\n            display: block;\n        }\n        .vloc-ins-enr-sum-mobile-hide {\n            display: none;\n        }\n        .vloc-ins-enr-sum-container {\n            .vloc-ins-enr-sum-product-image {\n                margin-top: 0;\n                float: left;\n\n                &.is-custom-image {\n                    margin: 0 0.75rem 0.75rem 0;\n                    padding: 0;\n                    min-height: 2.75rem;\n                    max-height: 2.75rem;\n\n                    .vloc-ins-enr-sum-product-custom-image {\n                        height: 2.75rem;\n                    }\n                }\n\n                .vloc-ins-enr-sum-product-image-fallback {\n                    margin-top: -0.5rem;\n                    margin-left: -0.75rem;\n                }\n            }\n\n            .vloc-ins-enr-sum-product-type {\n                float: left;\n                line-height: 2.75rem;\n                text-transform: uppercase;\n                color: $enrollment-type;\n                letter-spacing: 1px;\n                font-size: 0.875rem;\n                font-weight: 400;\n                margin-left: 1rem;\n            }\n            .vloc-ins-enr-sum-product-container {\n                padding: 1rem 1.5rem 1.5rem 1.5rem;\n\n                .vloc-ins-enr-sum-product-left {\n                    float: none;\n                    width: 100%;\n                    min-width: auto;\n                    max-width: none;\n                }\n                .vloc-ins-enr-sum-product-right {\n                    width: 100%;\n                }\n            }\n            .vloc-ins-enr-sum-product-data-container {\n                .vloc-ins-enr-sum-product-data {\n\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 549px) {\n    .via-slds {\n        .vloc-ins-enr-sum-container {\n            .vloc-ins-enr-sum-product-container {\n                width: 100%;\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 479px) {\n    .via-slds {\n        .vloc-ins-enr-sum-container {\n            .vloc-ins-enr-sum-product-data-container {\n                .vloc-ins-enr-sum-product-attr-label {\n                    padding: 0;\n                }\n                .vloc-ins-enr-sum-product-attr-value {\n                    padding-left: 1.5rem;\n                }\n            }\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-enrollee-benefits-summary","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-enrollee-benefits-summary/%vlocity_namespace%__VlocityUITemplate__c/ins-os-enrollee-benefits-summary"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-enrollee-benefits-summary","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-enrollee-benefits-summary","VlocityDataPackName":"ins-os-enrollee-benefits-summary","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".via-nds .nds-select {\n  background-color: transparent;\n  padding-right: 1.7rem; }\n\n.via-nds .vloc-ins-multi-item-child {\n  border: 1px solid #d7dde6;\n  border-radius: 0.25rem;\n  margin-bottom: 1rem; }\n\n.via-nds .vloc-ins-multi-item-child-top {\n  padding: 2rem 2rem 2rem 0; }\n  .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-left {\n    border-right: 1px solid #d7dde6;\n    padding: 0.5rem 1rem; }\n    .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-left .vloc-ins-multi-item-child-name {\n      font-weight: 400;\n      font-size: 1.25rem;\n      color: #516a8c; }\n  .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-multi-item-form-element-select {\n    padding: 0.625rem 0 0.5625rem 0; }\n  .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-multi-item-dropdown-label {\n    font-size: 1rem;\n    margin: 0;\n    text-align: right;\n    line-height: 1.8125rem;\n    width: 42%; }\n  .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-multi-item-dropdown {\n    width: 55%; }\n    .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-multi-item-dropdown .vloc-ins-multi-item-dropdown-container {\n      width: auto;\n      padding-right: 2rem; }\n      .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-multi-item-dropdown .vloc-ins-multi-item-dropdown-container:before, .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-multi-item-dropdown .vloc-ins-multi-item-dropdown-container:after {\n        border: none;\n        position: static;\n        right: auto;\n        bottom: auto; }\n    .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-multi-item-dropdown .vloc-ins-multi-item-dropdown-select {\n      font-size: 1rem;\n      width: 80%; }\n    .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-multi-item-dropdown .vloc-ins-multi-item-child-dropdown-select-chevrondown {\n      fill: #0072cf;\n      margin: 0.6rem 0 0 0.25rem;\n      width: 15%; }\n  .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-multi-item-child-edit-drivers {\n    margin-top: 1.35rem; }\n    .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-multi-item-child-edit-drivers .vloc-ins-multi-item-edit-drivers-btn {\n      font-size: 1rem; }\n  .via-nds .vloc-ins-multi-item-child-top .vloc-ins-multi-item-child-top-right .vloc-ins-child-level-first-attribute-container .vloc-ins-multi-item-child-attribute-container .vloc-ins-attribute-component-container {\n    margin: 0 0 0 1.5rem; }\n\n.via-nds .vloc-ins-multi-item-child-bottom {\n  position: relative;\n  background-color: #f8fbfe;\n  padding: 1.15rem 0 0.5rem 0;\n  border-bottom-left-radius: 0.25rem;\n  border-bottom-right-radius: 0.25rem; }\n  .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area {\n    padding: 0 1.5rem;\n    position: relative;\n    z-index: 5; }\n    .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area .vloc-ins-multi-item-child-selected-coverage-icon {\n      margin: 0.75rem 0.75rem 0 0; }\n    .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area .vloc-ins-multi-item-child-coverage-selector-container {\n      position: relative;\n      z-index: 1; }\n    .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area .vloc-ins-multi-item-child-coverage-selector {\n      font-size: 1rem;\n      line-height: 1.8;\n      cursor: pointer; }\n      .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area .vloc-ins-multi-item-child-coverage-selector .vloc-ins-multi-item-child-switch-icon {\n        fill: #0072cf;\n        position: relative;\n        top: -1px; }\n    .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area .vloc-ins-multi-item-child-price-container {\n      position: relative; }\n      .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area .vloc-ins-multi-item-child-price-container .vloc-ins-multi-item-child-price-inner-container {\n        position: absolute;\n        bottom: 0;\n        right: 1rem; }\n        .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area .vloc-ins-multi-item-child-price-container .vloc-ins-multi-item-child-price-inner-container span {\n          line-height: 1.3; }\n      .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area .vloc-ins-multi-item-child-price-container .vloc-ins-multi-item-child-price-you-pay {\n        font-size: 1rem;\n        margin-right: 0.25rem; }\n      .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area .vloc-ins-multi-item-child-price-container .vloc-ins-multi-item-child-price-price {\n        font-size: 1.75rem; }\n      .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-toggle-area .vloc-ins-multi-item-child-price-container .vloc-ins-multi-item-child-price-term {\n        font-size: 1rem;\n        margin-left: -3px; }\n  .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu {\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: -3.5rem;\n    min-width: 14rem; }\n    .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-dropdown {\n      font-size: 1rem;\n      padding: 0;\n      margin: 0;\n      width: 100%;\n      position: static;\n      left: auto;\n      right: auto;\n      top: auto;\n      bottom: auto;\n      float: none;\n      transform: none;\n      display: none;\n      visibility: hidden;\n      opacity: 0; }\n      .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-dropdown .vloc-ins-multi-item-child-coverage-menu-item span,\n.via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-dropdown .vloc-ins-multi-item-child-coverage-sub-menu-item span {\n        width: 100%;\n        line-height: 1.875rem;\n        margin-left: 0.5rem; }\n      .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-dropdown .vloc-ins-multi-item-child-coverage-menu-item > a,\n.via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-dropdown .vloc-ins-multi-item-child-coverage-sub-menu-item > a {\n        padding: 0.75rem 1.25rem; }\n        .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-dropdown .vloc-ins-multi-item-child-coverage-menu-item > a:hover,\n.via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-dropdown .vloc-ins-multi-item-child-coverage-sub-menu-item > a:hover {\n          background-color: #fff7f2; }\n      .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-dropdown .vloc-ins-multi-item-child-coverage-menu-item .vloc-ins-multi-item-child-coverage-menu-item-right-icon,\n.via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-dropdown .vloc-ins-multi-item-child-coverage-sub-menu-item .vloc-ins-multi-item-child-coverage-menu-item-right-icon {\n        fill: #0f335b;\n        margin-top: 0.45rem; }\n    .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu.nds-dropdown-trigger--click.nds-is-open > .nds-dropdown.vloc-ins-multi-item-child-coverage-selector-dropdown {\n      display: block;\n      visibility: visible;\n      opacity: 1; }\n    .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-templates-menu {\n      position: absolute;\n      left: 100%;\n      top: 0; }\n      .via-nds .vloc-ins-multi-item-child-bottom .vloc-ins-multi-item-child-coverage-selector-menu .vloc-ins-multi-item-child-coverage-selector-templates-menu .vloc-ins-multi-item-child-manage-templates {\n        color: #0072cf; }\n\n.via-nds .vloc-ins-os-amount-container {\n  margin-top: 2rem;\n  font-size: 1.5rem; }\n  .via-nds .vloc-ins-os-amount-container .vloc-ins-multi-item-price {\n    font-weight: 400; }\n  .via-nds .vloc-ins-os-amount-container .ins-coverages-os-amount-item-container {\n    display: flex;\n    justify-content: space-between;\n    max-width: 30%;\n    margin: 0 auto; }\n\n.via-nds .nds-checkbox .nds-checkbox--faux {\n  border: 1px solid #d8dde6;\n  position: relative;\n  top: -1px; }\n\n.via-nds .vloc-ins-coverages-container-wrapper {\n  width: 100%; }\n\n.via-nds .vloc-ins-attribute-component-dropdown-items {\n  position: relative; }\n","%vlocity_namespace%__CustomJavascript__c":"/* jshint esversion: 6 */\nvlocity.cardframework.registerModule.controller('insMultiItemCtrl', ['$scope', '$rootScope', '$q', '$controller', '$timeout', function($scope, $rootScope, $q, $controller, $timeout) {\n    'use strict';\n    // insCoveragesCtrl is the JS Angular controller in ins-os-coverages-component which\n    // is the component for coverages\n    angular.extend(this, $controller('insCoveragesCtrl', {$scope: $scope}));\n    $scope.vehicleTypes = {\n        'PASSENGER CAR': {\n            'fileName': 'passenger-car.svg'\n        },\n        'PASSENGER CAR CONVERTIBLE': {\n            'fileName': 'convertible.svg'\n        },\n        'PASSENGER CAR COUPE': {\n            'fileName': 'coupe.svg'\n        },\n        'MULTIPURPOSE PASSENGER VEHICLE': {\n            'fileName': 'multipurpose-passenger-vehicle.svg'\n        },\n        'MULTIPURPOSE PASSENGER VEHICLE (MPV)': {\n            'fileName': 'multipurpose-passenger-vehicle.svg'\n        },\n        'TRUCK': {\n            'fileName': 'truck.svg'\n        },\n        'BUS': {\n            'fileName': 'bus.svg'\n        },\n        'MOTORCYCLE': {\n            'fileName': 'motorcycle.svg'\n        },\n        'MOTOR DRIVEN CYCLE': {\n            'fileName': 'motor-driven-cycle.svg'\n        },\n        'TRAILER': {\n            'fileName': 'trailer.svg'\n        },\n        'LOW-SPEED VEHICLE': {\n            'fileName': 'low-speed-vehicle.svg'\n        },\n        'LOW-SPEED VEHICLE (LSV)': {\n            'fileName': 'low-speed-vehicle.svg'\n        }\n    };\n    baseCtrl.prototype.insuredItemNames = {};\n    $scope.initMultiAuto = function() {\n        // We're assuming there will only be two keys returned:\n        const insuredItems = baseCtrl.prototype.$scope.bpTree.response.insuredItems;\n        const insuredItemKeys = Object.keys(insuredItems);\n        if (insuredItemKeys.length === 2) {\n            // isParent is true for child items (autos) and false for grandchild items (drivers)\n            if (insuredItems[insuredItemKeys[0]][0].isParent || insuredItems[insuredItemKeys[0]][0].isPrimary) {\n                baseCtrl.prototype.insuredItemNames.childInsuredItemName = insuredItemKeys[0];\n                baseCtrl.prototype.insuredItemNames.grandChildInsuredItemName = insuredItemKeys[1];\n            } else {\n                baseCtrl.prototype.insuredItemNames.childInsuredItemName = insuredItemKeys[1];\n                baseCtrl.prototype.insuredItemNames.grandChildInsuredItemName = insuredItemKeys[0];\n            }\n        // Just in case the script needs to return more than 2 keys, the child and grandChild can\n        // be defined in the OmniScript seed data JSON:\n        } else if (insuredItemKeys.length > 2) {\n            baseCtrl.prototype.insuredItemNames = {\n                childInsuredItemName: baseCtrl.prototype.$scope.bpTree.propSetMap.seedDataJSON.childInsuredItemName,\n                grandChildInsuredItemName: baseCtrl.prototype.$scope.bpTree.propSetMap.seedDataJSON.grandChildInsuredItemName\n            };\n        }\n        // Reformat vehicle data for vehicle images\n        $scope.insuredItemsFormatted = {};\n        const childInsuredItems = insuredItems[baseCtrl.prototype.insuredItemNames.childInsuredItemName];\n        for (let i = 0; i < childInsuredItems.length; i++) {\n            const child = childInsuredItems[i];\n            childInsuredItemsHelper(child);\n        }\n    };\n    $scope.multiItemTemplate = true;\n    $scope.initMultiAuto();\n    $scope.customTemplates = baseCtrl.prototype.$scope.bpTree.propSetMap.elementTypeToHTMLTemplateMapping;\n    $scope.rootProducts = [];\n\n    // Listen for event from the Drivers modal\n    document.addEventListener('ins-os-multi-item-modal-send-data', function(e) {\n        const driverData = e.detail.driverData;\n        if (driverData && driverData[driverData.productInstanceKey]) {\n            const product = _.get($scope.productsList, driverData[driverData.productInstanceKey].productPathFromRoot);\n            product.primaryParty = driverData[driverData.productInstanceKey].primaryParty;\n            product.otherParties = driverData[driverData.productInstanceKey].otherParties;\n            $scope.changeDrivers(product, driverData[driverData.productInstanceKey], $scope, $scope.controlRef);\n        }\n    });\n\n    // Update vehicle type and add to insuredItemsFormatted for vehicle images\n    /**\n     * @param {Object} child Vehicle\n     */\n    function childInsuredItemsHelper(child) {\n        if (child.BodyClass) {\n            if (child.BodyClass.toLowerCase().indexOf('convertible') > -1) {\n                child.VehicleType += ' CONVERTIBLE';\n            }\n            if (child.BodyClass.toLowerCase().indexOf('coupe') > -1) {\n                child.VehicleType += ' COUPE';\n            }\n        }\n        $scope.insuredItemsFormatted[child.instanceKey] = child;\n    }\n\n    // Update pathFromRoot with new index\n    /**\n     * @param {Object} item Attribute or child product\n     * @param {Number} idx New index\n     * @param {Boolean} [isChildProduct] Update child product path\n     */\n    function updatePathFromRoot(item, idx, isChildProduct) {\n        const parts = item.pathFromRoot.split('records');\n        if (isChildProduct) {\n            // pathFromRoot === \"[*].childProducts.records[*].childProducts.records[*]\"\n            parts[2] = '[' + idx + ']';\n        } else {\n            // pathFromRoot === \"childProducts.records[*].attributeCategories.records[*].productAttributes.records[*]\"\n            const pieces = parts[1].split('.');\n            parts[1] = '[' + idx + '].' + pieces[1] + '.';\n        }\n        item.pathFromRoot = parts.join('records');\n    }\n\n    // Update product with new driver attributes\n    /**\n     * @param {Object} vehicleProduct Child of root product\n     * @param {Object} driverProduct Newly created driver product\n     * @param {Object} driverData Data from insuredItems\n     */\n    function setDriverAttributes(vehicleProduct, driverProduct, driverData) {\n        driverProduct.instanceKey = driverData.instanceKey;\n        driverProduct.Name = driverData.instanceKey;\n        const driverAttributes = driverProduct.attributeCategories.records[0].productAttributes.records;\n        angular.forEach(driverAttributes, function(attr) {\n            updatePathFromRoot(attr, vehicleProduct.childProducts.records.length - 1);\n            // Sync new userValue\n            if (driverData[attr.code]) {\n                attr.userValues = driverData[attr.code];\n            }\n        });\n    }\n\n    // Set driver data for vehicle\n    /**\n     * @param {Object} product Vehicle\n     * @param {Object} driverData Primary and other drivers\n     */\n    function populateDriverData(product, driverData) {\n        const deferred = $q.defer();\n        // Separate out all driver products\n        let genericDriverProduct;\n        const filteredChildProducts = [];\n        for (let i = 0; i < product.childProducts.records.length; i++) {\n            const childProduct = product.childProducts.records[i];\n            if (childProduct.ProductCode === 'DRIVER') {\n                if (!genericDriverProduct) {\n                    // Repurpose single driver product as generic\n                    childProduct.Name = '';\n                    if (childProduct.hasOwnProperty('isPrimaryChild')) {\n                        delete childProduct.isPrimaryChild;\n                    }\n                    genericDriverProduct = childProduct;\n                }\n            } else {\n                filteredChildProducts.push(childProduct);\n            }\n        }\n        product.childProducts.records = filteredChildProducts;\n        // Add product for primary driver\n        const primaryDriverData = driverData.primaryParty;\n        const primaryDriverProduct = angular.copy(genericDriverProduct);\n        primaryDriverProduct.isPrimaryChild = true;\n        product.childProducts.records.push(primaryDriverProduct);\n        // Repopulate vehicle with primary driver data\n        setDriverAttributes(product, primaryDriverProduct, primaryDriverData);\n        // Add secondary drivers\n        for (let i = 0; i < driverData.otherParties.length; i++) {\n            const secondaryDriverData = driverData.otherParties[i];\n            const secondaryDriverProduct = angular.copy(genericDriverProduct);\n            product.childProducts.records.push(secondaryDriverProduct);\n            setDriverAttributes(product, secondaryDriverProduct, secondaryDriverData);\n        }\n        // Update paths to sync with new childProducts order\n        angular.forEach(product.childProducts.records, function(childProduct, idx) {\n            updatePathFromRoot(childProduct, idx, true);\n        });\n\n        deferred.resolve(product);\n        return deferred.promise;\n    }\n\n    $scope.openDriversModal = function(scp, control, childProduct) {\n        control.vlcSI[control.itemsKey][0].vlcCompSelected = true;\n        control.vlcSI[control.itemsKey][0].editDrivers = {\n            instanceKey: childProduct.instanceKey,\n            pathFromRoot: childProduct.pathFromRoot\n        };\n        baseCtrl.prototype.$scope.currentElementName = control.name;\n        baseCtrl.prototype.$scope.openModal(scp, control);\n    };\n\n    // Handle updated driver selections from modal\n    /**\n     * @param {Object} product Vehicle\n     * @param {Object} driverData Primary and other drivers\n     */\n    $scope.changeDrivers = function(product, driverData, scp, control) {\n        if (!product || !driverData || !product.childProducts || !product.childProducts.records.length) {\n            return;\n        }\n        populateDriverData(product, driverData).then(function() {\n            $scope.changeCoverage(baseCtrl.prototype.$scope.bpTree.response, control, scp, product);\n        });\n    };\n\n    $scope.copyCoverageValues = function(product, siblingProduct, response, control, scp) {\n        console.log('current product in copyCoverageValues', product);\n        console.log('siblingProduct', siblingProduct);\n        $rootScope.attributeUserValues = {};\n        let setOptionalCoverageCopied = null;\n        if ($scope.sortedCoverages[siblingProduct.name] && $scope.sortedCoverages[product.instanceKey]) {\n            for (let i = 0; i < $scope.sortedCoverages[siblingProduct.name].length; i++) {\n                const siblingCoverage = $scope.sortedCoverages[siblingProduct.name][i];\n                for (let j = 0; j < $scope.sortedCoverages[product.instanceKey].length; j++) {\n                    let currentCoverage = $scope.sortedCoverages[product.instanceKey][j];\n                    if (currentCoverage.ProductCode === siblingCoverage.ProductCode) {\n                        // Check isOptional and isSelected\n                        if (siblingCoverage.isOptional && currentCoverage.isOptional) {\n                            currentCoverage.isSelected = siblingCoverage.isSelected;\n                            setOptionalCoverageCopied = currentCoverage.parentInstanceKey;\n                        }\n                        if ($scope.consolidatedData.grandChildInsuredItems[currentCoverage.parentInstanceKey][currentCoverage.ProductCode]) {\n                            for (let k = 0; k < $scope.consolidatedData.grandChildInsuredItems[currentCoverage.parentInstanceKey][currentCoverage.ProductCode].length; k++) {\n                                let currentAttribute = _.get(currentCoverage, $scope.consolidatedData.grandChildInsuredItems[currentCoverage.parentInstanceKey][currentCoverage.ProductCode][k].pathFromChild);\n                                const siblingAttribute = _.get(siblingCoverage, $scope.consolidatedData.grandChildInsuredItems[siblingCoverage.parentInstanceKey][siblingCoverage.ProductCode][k].pathFromChild);\n                                console.log(currentAttribute.label + '/' + currentCoverage.Name + ' in copyCoverageValues loop', currentAttribute, currentCoverage);\n                                currentAttribute.values = siblingAttribute.values;\n                                currentAttribute.userValues = siblingAttribute.userValues;\n                                if (siblingAttribute.rules) {\n                                    currentAttribute.rules = siblingAttribute.rules;\n                                }\n                                if (siblingAttribute.hiddenByRule) {\n                                    currentAttribute.hiddenByRule = siblingAttribute.hiddenByRule;\n                                }\n                                if (siblingAttribute.ruleSetValue) {\n                                    currentAttribute.ruleSetValue = siblingAttribute.ruleSetValue;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            product.currentCoverageConfiguration = 'Same as ' + siblingProduct.name;\n            product.customizeIcon = '../resource/' + baseCtrl.prototype.$scope.nsPrefix + 'InsMultiItemImages/same-as-icon.svg';\n        }\n        if ($scope.changeCoverage) {\n            // This is located in ins-os-coverage-component\n            $timeout(function() {\n                $scope.changeCoverage(response, control, scp, null, null, null, setOptionalCoverageCopied);\n            });\n        }\n    };\n}]);\n\nvlocity.cardframework.registerModule.directive('insOnError', function() {\n    return {\n        link: function(scope, element, attrs) {\n            element.bind('error', function() {\n                if (attrs.src !== attrs.insOnError) {\n                    attrs.$set('src', attrs.insOnError);\n                }\n            });\n        }\n    }\n});\n\nvlocity.cardframework.registerModule.filter('formatCurrency', function($filter, $rootScope) {\n    return function (amount, currencyCode) {\n        if(amount && typeof amount === 'number') {\n            if (!currencyCode) {\n                currencyCode = 'USD';\n            }\n            return new Intl.NumberFormat( $rootScope.vlocity.userSfLocale, { style: 'currency', currency: currencyCode }).format(amount);\n        }\n    }\n});\n","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-multi-item/1/Vlocity/1528238850225","%vlocity_namespace%__HTML__c":"<div class=\"vloc-ins-multi-item-container vloc-ins-coverages-container-wrapper\" ng-if=\"control.vlcSI[control.itemsKey]\">\n    <div ng-if=\"baseCtrl.vlocOSInsConfigProductSet && baseCtrl.vlocOSInsConfigProductSet.timestamp !== control.vlcSI[control.itemsKey][0].timestamp\" ng-init=\"baseCtrl.setSelectedProducts(control)\"></div>\n    <div class=\"vloc-ins-multi-item-product-container\" ng-controller=\"insMultiItemCtrl\" ng-init=\"createData(control.vlcSI[control.itemsKey], baseCtrl.$scope.bpTree.response)\">\n        <div class=\"vloc-ins-multi-item-product\" ng-repeat=\"product in productsList track by $index\" ng-if=\"$index === 0\" ng-init=\"setSelectedOption(control, product, option, this)\" ins-rules-evaluate ins-rules-product=\"product\">\n            <div class=\"vloc-ins-multi-item-child\" ng-repeat=\"(childProductIndex, childProduct) in product.childProducts.records\" ng-show=\"childProduct.instanceKey\" ins-rules-evaluate ins-rules-product=\"childProduct\">\n                <section class=\"nds-grid vloc-ins-multi-item-child-top\">\n                    <div class=\"nds-size--2-of-5 nds-p-horizontal--small nds-text-align--center vloc-ins-multi-item-child-top-left\">\n                        <img ng-src=\"../resource/{{baseCtrl.$scope.nsPrefix}}InsMultiItemImages/{{vehicleTypes[insuredItemsFormatted[childProduct.instanceKey].VehicleType].fileName}}\" ins-on-error=\"../resource/{{baseCtrl.$scope.nsPrefix}}InsMultiItemImages/default.svg\" class=\"nds-m-bottom--small\"/>\n                        <h2 class=\"nds-text-heading--large nds-truncate vloc-ins-multi-item-child-name\">{{childProduct.instanceKey}}</h2>\n                    </div>\n                    <div class=\"nds-size--3-of-5 vloc-ins-multi-item-child-top-right\">\n                        <div class=\"vloc-ins-multi-item-child-category-container vloc-ins-child-level-first-attribute-container vloc-ins-multi-item-child-edit-drivers\">\n                            <div class=\"vloc-ins-multi-item-child-attribute-container\">\n                                <div class=\"slds-grid nds-grid vloc-ins-attribute-component-container\">\n                                    <div class=\"slds-size--8-of-12 slds-max-small-size--7-of-12 slds-p-right--xx-small slds-truncate nds-size--8-of-12 nds-max-small-size--7-of-12 nds-p-right--xx-small nds-truncate vloc-ins-attribute-component\">\n                                        <label class=\"slds-text-heading--x-small nds-text-heading--x-small vloc-ins-attribute-component-name\" for=\"attribute-{{coverage.ProductCode}}-{{attribute.code}}\">Primary Driver</label>\n                                        <div> {{childProduct.primaryParty.FN}} {{childProduct.primaryParty.LN}}</div>\n                                    </div>\n                                    <div class=\"slds-size--4-of-12 slds-max-small-size--5-of-12 slds-is-relative nds-size--5-of-12 nds-p-right_x-small nds-max-small-size--5-of-12 nds-is-relative vloc-ins-attribute-component-limit\">\n                                        <a href=\"javascript:void(0)\" class=\"nds-button vloc-ins-multi-item-edit-drivers-btn\" ng-click=\"openDriversModal(this, control, childProduct)\">Edit Drivers</a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"vloc-ins-multi-item-child-category-container vloc-ins-child-level-first-attribute-container\" ng-repeat=\"category in childProduct.attributeCategories.records | orderBy: 'displaySequence' | limitTo: 1\">\n                            <div class=\"vloc-ins-multi-item-child-attribute-container\" ng-repeat=\"attribute in category.productAttributes.records | orderBy: 'displaySequence' | limitTo: 1\" ng-if=\"!attribute.hiddenByRule && attribute.inputType !== 'equalizer'\" ng-hide=\"attribute.hidden\">\n                                <div ins-os-include-template=\"{{customTemplates.AttributesDisplayTemplate}}\"></div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                <section class=\"vloc-ins-multi-item-child-bottom\">\n                    <div class=\"nds-grid vloc-ins-multi-item-child-toggle-area\">\n                        <div class=\"nds-size--3-of-5 nds-clearfix nds-is-relative\">\n                            <div class=\"nds-float--left vloc-ins-multi-item-child-selected-coverage-icon\">\n                                <img ng-src=\"{{childProduct.customizeIcon || '../resource/' + baseCtrl.$scope.nsPrefix + 'InsMultiItemImages/orange-customize-icon.svg'}}\" alt=\"Selected Coverage Icon\" />\n                            </div>\n                        </div>\n                        <div class=\"nds-size--2-of-5 nds-text-align--right vloc-ins-multi-item-child-price-container\" ng-show=\"childProduct.Price\">\n                            <div class=\"vloc-ins-multi-item-child-price-inner-container\">\n                                <span class=\"vloc-ins-multi-item-child-price-you-pay\">You pay:</span>\n                                <span class=\"vloc-ins-multi-item-child-price-price\">{{childProduct.Price | formatCurrency: product.currencyCode}}</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"nds-m-top--large vloc-ins-multi-item-child-customize-container vloc-ins-coverages-container-inner-wrapper\" ng-model=\"childProduct.customizeSectionsOpen\" bs-collapse>\n                        <a href=\"javascript:void(0)\" bs-collapse-toggle class=\"nds-button vloc-ins-multi-item-toggle-plan-details\" ng-class=\"{'menu-open': childProduct.showCoverageSelector}\"><span ng-show=\"(!childProduct.customizeSectionsOpen && childProduct.customizeSectionsOpen !== 0)  || childProduct.customizeSectionsOpen === -1\">Customize</span><span ng-show=\"childProduct.customizeSectionsOpen === 0\">Hide</span> plan details</a>\n                        <div class=\"vloc-ins-multi-item-child-customize vloc-ins-coverages-container\" bs-collapse-target>\n                            <div ins-os-include-template=\"{{customTemplates.CoveragesDisplayTemplate}}\"></div>\n                        </div>\n                    </div>\n                </section>\n            </div>\n            <div class=\"vloc-ins-os-amount-container slds-size--1-of-1 slds-p-horizontal--medium slds-text-heading--medium slds-text-align--center nds-size--1-of-1 nds-p-horizontal--medium nds-text-heading--medium nds-text-align--center\">\n                <div ng-if=\"product.Price && product.totalTaxFeeAmount\" class=\"vloc-ins-coverages-premium ins-coverages-os-amount-item-container\">\n                    Premium<span class=\"slds-m-left--large nds-m-left--large\">{{product.Price | formatCurrency: product.currencyCode}}</span>\n                </div>\n                <div ng-if=\"product.totalTaxFeeAmount\" class=\"vloc-ins-coverages-tax-and-fee ins-coverages-os-amount-item-container\">\n                    Tax &amp; Fee<span class=\"amount slds-m-left--large nds-m-left--large\">{{product.totalTaxFeeAmount | formatCurrency: product.currencyCode}}</span>\n                </div>\n                <div ng-if=\"product.Price || product.totalTaxFeeAmount\" class=\"vloc-ins-coverages-total ins-coverages-os-amount-item-container\">\n                    Total <span class=\"slds-m-left--large nds-m-left--large vloc-ins-multi-item-price\">{{product.Price + product.totalTaxFeeAmount | formatCurrency: product.currencyCode}}</span>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"// Variables:\n$royal-blue: #0070D2;\n$light-blue-bg: #F8FBFE;\n$text-navy: #00396b;\n$dark-navy: #19355E;\n$attr-label: #16325C;\n$border-color: #d8dde6;\n\n.via-nds {\n    .nds-select {\n        background-color: transparent;\n        padding-right: 1.7rem;\n    }\n    .vloc-ins-multi-item-child {\n        border: 1px solid #d7dde6;\n        border-radius: 0.25rem;\n        margin-bottom: 1rem;\n    }\n    .vloc-ins-multi-item-child-top {\n        padding: 2rem 2rem 2rem 0;\n\n        .vloc-ins-multi-item-child-top-left {\n            border-right: 1px solid #d7dde6;\n            padding: 0.5rem 1rem;\n\n            .vloc-ins-multi-item-child-name {\n                font-weight: 400;\n                font-size: 1.25rem;\n                color: #516a8c;\n            }\n        }\n        .vloc-ins-multi-item-child-top-right {\n            .vloc-ins-multi-item-form-element-select {\n                padding: 0.625rem 0 0.5625rem 0;\n            }\n            .vloc-ins-multi-item-dropdown-label {\n                font-size: 1rem;\n                margin: 0;\n                text-align: right;\n                line-height: 1.8125rem;\n                width: 42%;\n            }\n            .vloc-ins-multi-item-dropdown {\n                width: 55%;\n\n                .vloc-ins-multi-item-dropdown-container {\n                    width: auto;\n                    padding-right: 2rem;\n\n                    &:before, &:after {\n                        border: none;\n                        position: static;\n                        right: auto;\n                        bottom: auto;\n                    }\n                }\n                .vloc-ins-multi-item-dropdown-select {\n                    font-size: 1rem;\n                    width: 80%;\n                }\n                .vloc-ins-multi-item-child-dropdown-select-chevrondown {\n                    fill: #0072cf;\n                    margin: 0.6rem 0 0 0.25rem;\n                    width: 15%;\n                }\n            }\n            .vloc-ins-multi-item-child-edit-drivers {\n                margin-top: 1.35rem;\n\n                .vloc-ins-multi-item-edit-drivers-btn {\n                    font-size: 1rem;\n                }\n            }\n            .vloc-ins-child-level-first-attribute-container {\n                .vloc-ins-multi-item-child-attribute-container {\n                    .vloc-ins-attribute-component-container {\n                        margin: 0 0 0 1.5rem;\n                    }\n                }\n            }\n        }\n    }\n    .vloc-ins-multi-item-child-bottom {\n        position: relative;\n        background-color: #f8fbfe;\n        padding: 1.15rem 0 0.5rem 0;\n        border-bottom-left-radius: 0.25rem;\n        border-bottom-right-radius: 0.25rem;\n\n        .vloc-ins-multi-item-child-toggle-area {\n            padding: 0 1.5rem;\n            position: relative;\n            z-index: 5;\n\n            .vloc-ins-multi-item-child-selected-coverage-icon {\n                margin: 0.75rem 0.75rem 0 0;\n            }\n\n            .vloc-ins-multi-item-child-coverage-selector-container {\n                position: relative;\n                z-index: 1;\n            }\n\n            .vloc-ins-multi-item-child-coverage-selector {\n                font-size: 1rem;\n                line-height: 1.8;\n                cursor: pointer;\n\n                .vloc-ins-multi-item-child-switch-icon {\n                    fill: #0072cf;\n                    position: relative;\n                    top: -1px;\n                }\n            }\n\n            .vloc-ins-multi-item-child-price-container {\n                position: relative;\n\n                .vloc-ins-multi-item-child-price-inner-container {\n                    position: absolute;\n                    bottom: 0;\n                    right: 1rem;\n\n                    span {\n                        line-height: 1.3;\n                    }\n                }\n                .vloc-ins-multi-item-child-price-you-pay {\n                    font-size: 1rem;\n                    margin-right: 0.25rem;\n                }\n                .vloc-ins-multi-item-child-price-price {\n                    font-size: 1.75rem;\n                }\n                .vloc-ins-multi-item-child-price-term {\n                    font-size: 1rem;\n                    margin-left: -3px; // using px here because I want an exact measurement not based on font size\n                }\n            }\n        }\n\n        .vloc-ins-multi-item-child-coverage-selector-menu {\n            width: 100%;\n            position: absolute;\n            top: 0;\n            left: -3.5rem;\n            min-width: 14rem;\n\n            .vloc-ins-multi-item-child-coverage-selector-dropdown {\n                font-size: 1rem;\n                padding: 0;\n                margin: 0;\n                width: 100%;\n                position: static;\n                left: auto;\n                right: auto;\n                top: auto;\n                bottom: auto;\n                float: none;\n                transform: none;\n                display: none;\n                visibility: hidden;\n                opacity: 0;\n\n                .vloc-ins-multi-item-child-coverage-menu-item,\n                .vloc-ins-multi-item-child-coverage-sub-menu-item {\n                    span {\n                        width: 100%;\n                        line-height: 1.875rem;\n                        margin-left: 0.5rem;\n                    }\n                    > a {\n                        padding: 0.75rem 1.25rem;\n\n                        &:hover {\n                            background-color: #fff7f2;\n                        }\n                    }\n\n                    .vloc-ins-multi-item-child-coverage-menu-item-right-icon {\n                        fill: #0f335b;\n                        margin-top: 0.45rem;\n                    }\n                }\n            }\n\n            &.nds-dropdown-trigger--click.nds-is-open {\n                > .nds-dropdown.vloc-ins-multi-item-child-coverage-selector-dropdown {\n                    display: block;\n                    visibility: visible;\n                    opacity: 1;\n                }\n            }\n\n            .vloc-ins-multi-item-child-coverage-selector-templates-menu {\n                position: absolute;\n                left: 100%;\n                top: 0;\n\n                .vloc-ins-multi-item-child-manage-templates {\n                    color: #0072cf;\n                }\n            }\n        }\n    }\n    .vloc-ins-os-amount-container {\n        margin-top: 2rem;\n        font-size: 1.5rem;\n\n        .vloc-ins-multi-item-price {\n            font-weight: 400;\n        }\n\n        .ins-coverages-os-amount-item-container {\n            display: flex;\n            justify-content: space-between;\n            max-width: 30%;\n            margin: 0 auto;\n        }\n    }\n\n\n    // Styles for coverages:\n    .nds-checkbox .nds-checkbox--faux {\n        border: 1px solid $border-color;\n        position: relative;\n        top: -1px;\n    }\n    .vloc-ins-coverages-container-wrapper {\n        width: 100%;\n    }\n    .vloc-ins-attribute-component-dropdown-items {\n        position: relative;\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-multi-item","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-multi-item/%vlocity_namespace%__VlocityUITemplate__c/ins-os-multi-item"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-multi-item","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-multi-item","VlocityDataPackName":"ins-os-multi-item","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":"/* iframeresizer fixes for nds */\n.iframeresizer--child .via-nds .nds-knowledge-block {\n  position: absolute; }\n  .iframeresizer--child .via-nds .nds-knowledge-block .nds-right_panel {\n    height: auto; }\n\n.via-nds .vloc-ins-multi-item-modal ~ .nds-backdrop {\n  opacity: 0;\n  visibility: hidden;\n  transition-duration: .4s;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 9000; }\n  .via-nds .vloc-ins-multi-item-modal ~ .nds-backdrop.nds-backdrop--open {\n    visibility: visible;\n    opacity: 1;\n    transition: opacity .4s linear; }\n\n.via-nds .vloc-ins-multi-item-modal ~ .nds-backdrop {\n  opacity: 1;\n  visibility: visible; }\n\n.via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container {\n  width: 60%;\n  max-width: 50rem;\n  border-radius: 0;\n  justify-content: initial;\n  top: 5rem; }\n  .via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container.single-product {\n    width: 50%; }\n  .via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-header {\n    border: none;\n    text-align: left;\n    padding: 1.25rem 1.5rem;\n    background-color: #F8FBFE;\n    border-radius: 0; }\n    .via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-header .vloc-ins-multi-item-modal-close-btn {\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n      right: 1rem; }\n    .via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-header h2 {\n      font-size: 1.75rem;\n      font-weight: 400; }\n  .via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container {\n    padding: 1.25rem 1.5rem;\n    font-size: 1rem;\n    overflow: scroll;\n    max-height: 42vh; }\n    .via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container .vloc-ins-multi-item-modal-fieldset {\n      padding-left: 2.75rem; }\n    .via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container:last-child {\n      border-radius: 0; }\n    .via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container .vloc-ins-multi-item-modal-drivers-container > li {\n      margin-bottom: 0.5rem; }\n    .via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container .vloc-ins-multi-item-modal-drivers-container .vloc-ins-multi-item-modal-driver-icon {\n      width: 1.5rem; }\n  .via-nds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-footer {\n    border: none;\n    padding: 1.25rem 1.5rem;\n    background-color: #F8FBFE;\n    border-radius: 0; }\n\n@media screen and (max-width: 1023px) {\n  .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container .vloc-ins-multi-item-modal-attr-rows-container .vloc-ins-multi-item-modal-attr-row {\n    padding: 0;\n    border: none; }\n    .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container .vloc-ins-multi-item-modal-attr-rows-container .vloc-ins-multi-item-modal-attr-row .vloc-ins-multi-item-modal-attribute-label {\n      background-color: #F8FBFE;\n      text-align: center;\n      padding: 0.5rem 0; }\n    .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container .vloc-ins-multi-item-modal-attr-rows-container .vloc-ins-multi-item-modal-attr-row .vloc-ins-multi-item-modal-attribute-value {\n      padding: 0.5rem 0;\n      border-right: 1px solid #EAEAEA; }\n      .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container .vloc-ins-multi-item-modal-attr-rows-container .vloc-ins-multi-item-modal-attr-row .vloc-ins-multi-item-modal-attribute-value:last-child {\n        border-right: none; } }\n\n@media screen and (max-width: 767px) {\n  .via-slds .vloc-ins-multi-item-modal {\n    max-height: 30rem; }\n    .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container {\n      width: 100%;\n      max-width: none;\n      padding: 0;\n      margin: 0;\n      top: 0; }\n      .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-header {\n        padding: 0;\n        height: 2.5rem; }\n        .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-header h2 {\n          display: none; }\n      .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container {\n        height: 100%;\n        padding: 1rem 0;\n        font-size: 0.875rem; }\n      .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container.single-product {\n        width: 100%; } }\n\n@media screen and (max-width: 480px) {\n  .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container .vloc-ins-multi-item-modal-top {\n    -ms-flex-wrap: wrap;\n    flex-wrap: wrap;\n    -ms-flex-align: start;\n    align-items: flex-start;\n    max-height: 8rem;\n    overflow: hidden; }\n    .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container .vloc-ins-multi-item-modal-top .vloc-ins-multi-item-modal-product-container {\n      margin-bottom: 1rem; }\n  .via-slds .vloc-ins-multi-item-modal .vloc-ins-multi-item-modal-container .vloc-ins-multi-item-modal-content-container .vloc-ins-multi-item-modal-attr-rows-container .vloc-ins-multi-item-modal-attr-row {\n    max-height: 4.625rem;\n    overflow: hidden; } }\n","%vlocity_namespace%__CustomJavascript__c":"/* jshint esversion: 6 */\nvlocity.cardframework.registerModule.controller('insMultiItemModalCtrl', ['$scope', function($scope) {\n    'use strict';\n    $scope.drivers = baseCtrl.prototype.$scope.bpTree.response.insuredItems[baseCtrl.prototype.insuredItemNames.grandChildInsuredItemName];\n\n    // Initialize drivers data for modal\n    /**\n     * @param {Object} content control.vlcSI[control.itemsKey]\n     */\n    $scope.initMultiItemModal = function(content) {\n        // This will be child vehicle product\n        $scope.childProduct = _.get(content.recSet, content.recSet[0].editDrivers.pathFromRoot);\n        // driverData controls the modal UI\n        $scope.driverData = {\n            productInstanceKey: $scope.childProduct.instanceKey,\n            [$scope.childProduct.instanceKey]: {\n                primaryParty: {},\n                otherParties: $scope.childProduct.otherParties || [],\n                productPathFromRoot: $scope.childProduct.pathFromRoot\n            }\n        };\n        // The radio input model comes from $scope.drivers so we need to match that when a primary driver exists\n        if ($scope.childProduct.primaryParty) {\n            for (let i = 0; i < $scope.drivers.length; i++) {\n                const driver = $scope.drivers[i];\n                if (driver.instanceKey === $scope.childProduct.primaryParty.instanceKey) {\n                    $scope.driverData[$scope.childProduct.instanceKey].primaryParty = driver;\n                    break;\n                }\n            }\n        }\n    };\n\n    // Add or remove non primary driver\n    /**\n     * @param {Object} driver\n     */\n    $scope.toggleRegularDriver = function(driver) {\n        const vehicleDriverData = $scope.driverData[$scope.childProduct.instanceKey];\n        const otherDriverInstanceKeys = vehicleDriverData.otherParties.map(function(obj) {\n            return obj.instanceKey;\n        });\n        const driverIndex = otherDriverInstanceKeys.indexOf(driver.instanceKey);\n        if (driverIndex > -1) {\n            vehicleDriverData.otherParties.splice(driverIndex, 1);\n        } else if (vehicleDriverData.primaryParty.instanceKey !== driver.instanceKey) {\n            vehicleDriverData.otherParties.push(driver);\n        }\n    };\n\n    // Determine whether to show checkbox as checked\n    /**\n     * @param {Object} driver\n     */\n    $scope.isDriverSelected = function(driver) {\n        if ($scope.driverData[$scope.childProduct.instanceKey].primaryParty.instanceKey === driver.instanceKey) {\n            return true;\n        }\n        const driverInstanceKeys = $scope.driverData[$scope.childProduct.instanceKey].otherParties.map(function(obj) {\n            return obj.instanceKey;\n        });\n        return driverInstanceKeys.indexOf(driver.instanceKey) > -1;\n    };\n\n    // Use a custom event to send the configured data back to the multi-item template to process:\n    $scope.saveDataToMainJson = function() {\n        let event = new CustomEvent('ins-os-multi-item-modal-send-data', {\n            detail: {\n                driverData: $scope.driverData\n            }\n        });\n        document.dispatchEvent(event);\n        $scope.cancel(); // closes modal\n    };\n}]);","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-multi-item-modal/1/Vlocity/1529518971007","%vlocity_namespace%__HTML__c":"<div role=\"dialog\" tabindex=\"-1\" aria-labelledby=\"ins-os-multi-item-modal\" class=\"nds-modal nds-fade-in-open nds-modal nds-fade-in-open vloc-ins-multi-item-modal\" ng-controller=\"insMultiItemModalCtrl\">\n    <div class=\"nds-modal__container nds-modal__container vloc-ins-multi-item-modal-container\" ng-init=\"initMultiItemModal(content)\" ng-class=\"{'single-product': formattedContent.topRow.length === 1}\">\n        <div class=\"nds-modal__header vloc-ins-multi-item-modal-header\">\n            <button class=\"nds-button nds-button vloc-ins-multi-item-modal-close-btn\" title=\"Close\" ng-click=\"cancel()\">\n                <slds-button-svg-icon sprite=\"'utility'\" icon=\"'close'\" size=\"'large'\"></slds-button-svg-icon>\n                <span class=\"nds-assistive-text nds-assistive-text\">Close</span>\n            </button>\n            <h2 id=\"ins-os-multi-item-modal\" class=\"nds-text-heading--medium nds-text-heading--medium\">Select Drivers</h2>\n        </div>\n        <div class=\"nds-modal__content vloc-ins-multi-item-modal-content-container\">\n            <fieldset class=\"nds-form-element vloc-ins-multi-item-modal-fieldset\">\n                <div class=\"slds-form-element__control\">\n                    <ul class=\"vloc-ins-multi-item-modal-drivers-container\">\n                        <li class=\"vloc-ins-multi-item-modal-driver-header\">\n                            <div class=\"nds-grid\">\n                                <div class=\"nds-size--1-of-8\"></div>\n                                <div class=\"nds-size--3-of-8\"></div>\n                                <div class=\"nds-size--2-of-8 nds-text-align--center\">Primary</div>\n                                <div class=\"nds-size--2-of-8 nds-text-align--center\">Driver</div>\n                            </div>\n                        </li>\n                        <li class=\"vloc-ins-multi-item-modal-driver\" ng-repeat=\"driver in drivers track by $index\">\n                            <div class=\"nds-grid\">\n                                <div class=\"nds-size--1-of-8\">\n                                    <img class=\"vloc-ins-multi-item-modal-driver-icon\" ng-src=\"../resource/{{baseCtrl.$scope.nsPrefix}}InsMultiItemImages/your-templates-icon.svg\" alt=\"Driver Icon\" />\n                                </div>\n                                <div class=\"nds-size--3-of-8\">{{driver.instanceKey}}</div>\n                                <div class=\"nds-size--2-of-8 nds-text-align--center\">\n                                    <span class=\"nds-radio\">\n                                        <input type=\"radio\" name=\"options\" id=\"primary-radio-{{$index}}\" ng-model=\"driverData[childProduct.instanceKey].primaryParty\" ng-change=\"toggleRegularDriver(driver)\" ng-value=\"driver\" />\n                                        <label class=\"nds-radio__label\" for=\"primary-radio-{{$index}}\">\n                                            <span class=\"nds-radio--faux nds-m-right--none\"></span>\n                                        </label>\n                                    </span>\n                                </div>\n                                <div class=\"nds-size--2-of-8 nds-text-align--center\">\n                                    <div class=\"nds-form-element\">\n                                        <div class=\"nds-form-element__control\">\n                                            <span class=\"nds-checkbox\">\n                                                <input type=\"checkbox\" name=\"options\" id=\"driver-checkbox-{{$index}}\" ng-click=\"toggleRegularDriver(driver)\" ng-checked=\"isDriverSelected(driver)\" ng-disabled=\"driverData[childProduct.instanceKey].primaryParty.instanceKey === driver.instanceKey\" />\n                                                <label class=\"nds-checkbox__label\" for=\"driver-checkbox-{{$index}}\">\n                                                    <span class=\"nds-checkbox--faux\"></span>\n                                                </label>\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </fieldset>\n        </div>\n        <div class=\"nds-modal__footer vloc-ins-multi-item-modal-footer\">\n            <button class=\"nds-button nds-button--neutral\" ng-click=\"cancel()\">Cancel</button>\n            <button class=\"nds-button nds-button--brand\" ng-click=\"saveDataToMainJson()\" ng-disabled=\"!driverData[childProduct.instanceKey].primaryParty.instanceKey\">Save</button>\n        </div>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"$header-bg: #F8FBFE;\n$border-color: #EAEAEA;\n\n /* iframeresizer fixes for nds */\n .iframeresizer--child .via-nds .nds-knowledge-block {\n    position: absolute;\n    .nds-right_panel {\n      height: auto;\n    }\n}\n\n.via-nds {\n    .vloc-ins-multi-item-modal {\n        ~ .nds-backdrop {\n            opacity: 0;\n            visibility: hidden;\n            transition-duration: .4s;\n            width: 100%;\n            height: 100%;\n            position: fixed;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            z-index: 9000;\n\n            &.nds-backdrop--open {\n                visibility: visible;\n                opacity: 1;\n                transition: opacity .4s linear;\n            }\n        }\n    }\n}\n.via-nds {\n    .vloc-ins-multi-item-modal {\n        ~ .nds-backdrop {\n            opacity: 1;\n            visibility: visible;\n        }\n        .vloc-ins-multi-item-modal-container {\n            width: 60%;\n            max-width: 50rem;\n            border-radius: 0;\n            justify-content: initial;\n            top: 5rem;\n\n            &.single-product {\n                width: 50%;\n            }\n\n            .vloc-ins-multi-item-modal-header {\n                border: none;\n                text-align: left;\n                padding: 1.25rem 1.5rem;\n                background-color: $header-bg;\n                border-radius: 0;\n\n                .vloc-ins-multi-item-modal-close-btn {\n                    position: absolute;\n                    top: 50%;\n                    transform: translateY(-50%);\n                    right: 1rem;\n                }\n\n                h2 {\n                    font-size: 1.75rem;\n                    font-weight: 400;\n                }\n            }\n            .vloc-ins-multi-item-modal-content-container {\n                padding: 1.25rem 1.5rem;\n                font-size: 1rem;\n                overflow: scroll;\n                max-height: 42vh;\n\n                .vloc-ins-multi-item-modal-fieldset {\n                    padding-left: 2.75rem;\n                }\n\n                &:last-child {\n                    border-radius: 0;\n                }\n\n                .vloc-ins-multi-item-modal-drivers-container {\n                    > li {\n                        margin-bottom: 0.5rem;\n                    }\n\n                    .vloc-ins-multi-item-modal-driver-icon {\n                        width: 1.5rem;\n                    }\n                }\n            }\n\n            .vloc-ins-multi-item-modal-footer {\n                border: none;\n                padding: 1.25rem 1.5rem;\n                background-color: $header-bg;\n                border-radius: 0;\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 1023px) {\n    .via-slds {\n        .vloc-ins-multi-item-modal {\n            .vloc-ins-multi-item-modal-container {\n                .vloc-ins-multi-item-modal-content-container {\n                    .vloc-ins-multi-item-modal-attr-rows-container {\n                        .vloc-ins-multi-item-modal-attr-row {\n                            padding: 0;\n                            border: none;\n\n                            .vloc-ins-multi-item-modal-attribute-label {\n                                background-color: $header-bg;\n                                text-align: center;\n                                padding: 0.5rem 0;\n                            }\n\n                            .vloc-ins-multi-item-modal-attribute-value {\n                                padding: 0.5rem 0;\n                                border-right: 1px solid $border-color;\n\n                                &:last-child {\n                                    border-right: none;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 767px) {\n    .via-slds {\n        .vloc-ins-multi-item-modal {\n            max-height: 30rem;\n            .vloc-ins-multi-item-modal-container {\n                width: 100%;\n                max-width: none;\n                padding: 0;\n                margin: 0;\n                top: 0;\n\n                .vloc-ins-multi-item-modal-header {\n                    padding: 0;\n                    height: 2.5rem;\n\n                    h2 {\n                        display: none;\n                    }\n                }\n\n                .vloc-ins-multi-item-modal-content-container {\n                    height: 100%;\n                    padding: 1rem 0;\n                    font-size: 0.875rem;\n                }\n\n                &.single-product {\n                    width: 100%;\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 480px) {\n    .via-slds {\n        .vloc-ins-multi-item-modal {\n            .vloc-ins-multi-item-modal-container {\n                .vloc-ins-multi-item-modal-content-container {\n                    .vloc-ins-multi-item-modal-top {\n                        -ms-flex-wrap: wrap;\n                        flex-wrap: wrap;\n                        -ms-flex-align: start;\n                        align-items: flex-start;\n                        max-height: 8rem;\n                        overflow: hidden;\n\n                        .vloc-ins-multi-item-modal-product-container {\n                            margin-bottom: 1rem;\n                        }\n                    }\n\n                    .vloc-ins-multi-item-modal-attr-rows-container {\n                        .vloc-ins-multi-item-modal-attr-row {\n                            max-height: 4.625rem;\n                            overflow: hidden;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-multi-item-modal","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-multi-item-modal/%vlocity_namespace%__VlocityUITemplate__c/ins-os-multi-item-modal"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-multi-item-modal","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-multi-item-modal","VlocityDataPackName":"ins-os-multi-item-modal","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".via-nds .vloc-ins-multi-person-container {\n  width: 100%; }\n\n.via-nds .vloc-ins-multi-person-total {\n  font-size: 1rem;\n  padding: 0.25rem 0 0;\n  margin-bottom: 2rem;\n  text-align: center; }\n  .via-nds .vloc-ins-multi-person-total .vloc-ins-multi-person-total-price {\n    font-size: 1.25rem;\n    font-weight: bold; }\n\n.via-nds .vloc-ins-multi-person-label-column-label {\n  font-size: 1rem;\n  padding: 1rem; }\n  .via-nds .vloc-ins-multi-person-label-column-label.vloc-ins-multi-person-label-column-label-blank {\n    max-height: 7rem;\n    height: 7rem; }\n  .via-nds .vloc-ins-multi-person-label-column-label.vloc-ins-multi-person-label-bold {\n    font-weight: bold; }\n  .via-nds .vloc-ins-multi-person-label-column-label.vloc-ins-multi-person-label-coverage-row {\n    padding-top: 0;\n    padding-bottom: 0.25rem;\n    padding-right: 0; }\n    .via-nds .vloc-ins-multi-person-label-column-label.vloc-ins-multi-person-label-coverage-row.vloc-ins-multi-person-label-first-coverage {\n      margin-top: 0.25rem; }\n    .via-nds .vloc-ins-multi-person-label-column-label.vloc-ins-multi-person-label-coverage-row .vloc-ins-multi-person-label-column-label-type {\n      padding: 1rem 0 0.75rem;\n      font-weight: bold;\n      max-height: 3.25rem;\n      height: 3.25rem; }\n    .via-nds .vloc-ins-multi-person-label-column-label.vloc-ins-multi-person-label-coverage-row .vloc-ins-multi-person-label-column-label-text {\n      background-color: #f7fafe;\n      padding: 0.9rem 0.5rem;\n      font-size: 0.875rem;\n      max-height: 3.25rem;\n      height: 3.25rem; }\n    .via-nds .vloc-ins-multi-person-label-column-label.vloc-ins-multi-person-label-coverage-row .vloc-ins-multi-person-label-column-label-description .description-icon {\n      fill: #0070D2;\n      cursor: help; }\n    .via-nds .vloc-ins-multi-person-label-column-label.vloc-ins-multi-person-label-coverage-row .vloc-ins-multi-person-label-column-label-description + .popover {\n      z-index: 5002; }\n      .via-nds .vloc-ins-multi-person-label-column-label.vloc-ins-multi-person-label-coverage-row .vloc-ins-multi-person-label-column-label-description + .popover:focus {\n        outline: none; }\n\n.via-nds .vloc-ins-coverages-coverage-row-container {\n  position: relative; }\n\n.via-nds .vloc-ins-coverages-bold {\n  font-weight: bold; }\n\n.via-nds .vloc-ins-coverages-coverage-row-outer-container {\n  display: none;\n  position: absolute;\n  z-index: 5001;\n  background-color: #fff;\n  border-radius: .25rem;\n  width: 20rem;\n  min-height: 2rem;\n  box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.16);\n  border: 1px solid #d8dde6;\n  padding: 1rem;\n  top: 50%;\n  left: 100%;\n  transform: translateX(-50%) translateY(-50%); }\n  .via-nds .vloc-ins-coverages-coverage-row-outer-container.popover-open {\n    display: block; }\n  .via-nds .vloc-ins-coverages-coverage-row-outer-container .vloc-ins-attribute-component .vloc-ins-attribute-component-name {\n    font-size: 0.75rem;\n    line-height: 1rem; }\n    .via-nds .vloc-ins-coverages-coverage-row-outer-container .vloc-ins-attribute-component .vloc-ins-attribute-component-name button {\n      min-width: 5rem; }\n\n.via-nds .vloc-ins-coverages-coverage-row-flex-container {\n  display: flex;\n  flex-direction: column;\n  align-items: start;\n  cursor: auto; }\n  .via-nds .vloc-ins-coverages-coverage-row-flex-container .vloc-coverage-edit {\n    border: none;\n    line-height: 1.2; }\n\n.via-nds .vloc-ins-multi-person-child-outer-container {\n  overflow-x: auto;\n  padding-top: 15rem;\n  padding-bottom: 15rem;\n  margin-top: -15rem;\n  margin-bottom: -15rem; }\n\n.via-nds .vloc-ins-multi-person-child-inner-container:before, .via-nds .vloc-ins-multi-person-child-inner-container:after {\n  content: '';\n  margin: auto; }\n\n.via-nds .vloc-ins-multi-person-column {\n  flex: 0 0 auto;\n  min-width: 10rem; }\n\n.via-nds .vloc-ins-multi-person-child-column-header {\n  max-height: 7rem;\n  height: 7rem;\n  font-size: 1rem;\n  padding: 0.75rem 1rem; }\n  .via-nds .vloc-ins-multi-person-child-column-header .vloc-ins-multi-person-child-name {\n    font-size: 1rem;\n    font-weight: bold; }\n  .via-nds .vloc-ins-multi-person-child-column-header .vloc-ins-multi-person-child-demographics {\n    font-size: 0.875rem; }\n  .via-nds .vloc-ins-multi-person-child-column-header .vloc-ins-multi-person-child-total-price {\n    font-size: 1rem;\n    padding: 0.25rem 0 0; }\n    .via-nds .vloc-ins-multi-person-child-column-header .vloc-ins-multi-person-child-total-price span {\n      font-size: 1.5rem;\n      font-weight: bold; }\n\n.via-nds .vloc-ins-multi-person-child-column-configuration {\n  max-height: 3.5625rem;\n  height: 3.5625rem;\n  font-size: 1rem;\n  padding: 0.75rem 1rem;\n  border-top: 1px solid #dddbda; }\n\n.via-nds .vloc-ins-multi-person-child-column-top-attribute {\n  max-height: 3.625rem;\n  height: 3.625rem;\n  font-size: 1rem;\n  padding: 0.75rem 1rem;\n  border-top: 1px solid #dddbda;\n  border-bottom: 1px solid #dddbda; }\n  .via-nds .vloc-ins-multi-person-child-column-top-attribute .vloc-ins-attribute-component-name {\n    display: none; }\n\n.via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize {\n  margin-top: 3.5rem; }\n  .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card {\n    padding-bottom: 0;\n    margin-bottom: 0.25rem;\n    max-height: 3.25rem;\n    height: 3.25rem;\n    background-color: #f7fafe; }\n    .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card:first-child {\n      display: none; }\n    .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card.optional-coverage .vloc-ins-coverages-heading {\n      display: none; }\n    .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card.show-type-header {\n      margin-top: 3.5rem; }\n    .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper {\n      padding: 0;\n      background-color: transparent;\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%); }\n      .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-ins-coverages-header-container {\n        display: none; }\n      .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper.optional-coverage:hover {\n        border-color: inherit; }\n      .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container {\n        display: flex;\n        border-bottom: none; }\n        .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card .vloc-ins-coverages-card-inner-wrapper .vloc-product-attribute-category-container .vloc-ins-coverages-collapse-toggle {\n          display: none; }\n    .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card:hover.optional-coverage .vloc-ins-coverages-card-inner-wrapper {\n      background-color: transparent; }\n      .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-card:hover.optional-coverage .vloc-ins-coverages-card-inner-wrapper.optional-coverage {\n        background-color: inherit; }\n  .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-coverage-printed-optional-checkbox-container {\n    display: flex;\n    align-items: center;\n    width: 1.5rem; }\n    .via-nds .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize .vloc-ins-coverages-coverage-printed-optional-checkbox-container:focus {\n      outline: none; }\n\n.via-nds .vloc-ins-attribute-component-container {\n  margin: 0;\n  display: block; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component,\n.via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit {\n    flex: none;\n    width: 100%;\n    max-width: 100%; }\n  .via-nds .vloc-ins-attribute-component-container .vloc-ins-attribute-component-limit-input .layout-newport .nds-input {\n    padding-left: 0; }\n\n@media screen and (max-width: 767px) {\n  .via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category,\n.via-nds .vloc-ins-coverages-container .vloc-ins-coverages-card .vloc-product-attribute-category.category-accordion {\n    margin: 0; } }\n","%vlocity_namespace%__CustomJavascript__c":"/* jshint esversion: 6 */\nvlocity.cardframework.registerModule.controller('insMultiPersonCtrl', ['$scope', '$controller', function($scope, $controller) {\n    'use strict';\n    // insCoveragesCtrl is the JS Angular controller in ins-os-coverages-component which\n    // is the component for coverages\n    angular.extend(this, $controller('insCoveragesCtrl', {$scope: $scope}));\n    $scope.multiPersonTemplate = true;\n    $scope.customTemplates = baseCtrl.prototype.$scope.bpTree.propSetMap.elementTypeToHTMLTemplateMapping;\n    $scope.coverageEditorOpen = false;\n\n    function displaySequenceSort(x, y) {\n        if (x.displaySequence === y.displaySequence) {\n            return 0;\n        } else if (x.displaySequence < y.displaySequence) {\n            return -1;\n        }\n        return 1;\n    }\n\n    function createCoverageLabels() {\n        let allCoverages = [];\n        angular.forEach($scope.sortedCoverages, function(coveragesArray) {\n            if (Array.isArray(coveragesArray)) {\n                angular.forEach(coveragesArray, function(covB) {\n                    let newCoverageName = true;\n                    for (let j = 0; j < allCoverages.length; j++) {\n                        const covA = allCoverages[j];\n                        if (covA.Name === covB.Name) {\n                            newCoverageName = false;\n                            break;\n                        }\n                    }\n                    if (newCoverageName) {\n                        allCoverages.push(covB);\n                    }\n                });\n            }\n        });\n        allCoverages.sort($scope.sortMultiPersonCoverages);\n        const prefixTypeKey = $scope.nsPrefix + 'Type__c';\n        for (let i = 1; i < allCoverages.length; i++) {\n            const coverage = allCoverages[i];\n            const previousCoverage = allCoverages[i - 1];\n            const labelObj = {\n                label: coverage.Name,\n                description: coverage.Description,\n                type: coverage.Type__c || coverage[prefixTypeKey],\n                showTypeHeader: false,\n                coverageRow: true\n            };\n            if (i === 1) {\n                labelObj.firstCoverage = true;\n            }\n            // Determine if the label is a new heading so the coverage row will be pushed down\n            const showTypeHeader = previousCoverage.RecordTypeName__c === 'Product'\n            || previousCoverage[$scope.nsPrefix + 'RecordTypeName__c'] === 'Product'\n            || previousCoverage.Type__c !== coverage.Type__c\n            || (previousCoverage[prefixTypeKey] && coverage[prefixTypeKey] && previousCoverage[prefixTypeKey] !== coverage[prefixTypeKey]);\n            if (showTypeHeader || i === 1) {\n                labelObj.showTypeHeader = true;\n            }\n            $scope.labelColumn.push(labelObj);\n        }\n    }\n\n    function fillInCoverages(coverages) {\n        // Start at first coverage label and first non root product coverage\n        for (let labelIdx = 1, coverageIdx = 1; labelIdx < $scope.labelColumn.length; labelIdx++, coverageIdx++) {\n            const labelObj = $scope.labelColumn[labelIdx];\n            const coverage = coverages[coverageIdx];\n            if (!coverage || labelObj.label !== coverage.Name) {\n                const emptyCoverage = {\n                    RecordTypeName__c: 'CoverageSpec',\n                    Name: labelObj.label\n                };\n                coverages.splice(coverageIdx, 0, emptyCoverage);\n            }\n            if (labelObj.showTypeHeader) {\n                coverages[coverageIdx].showTypeHeader = true;\n            }\n        }\n    }\n\n    $scope.sortMultiPersonCoverages = function(x, y) {\n        const prefixTypeKey = $scope.nsPrefix + 'Type__c';\n\n        // Root product and insured items first\n        if (x.RecordTypeName__c === 'Product' || x[$scope.nsPrefix + 'RecordTypeName__c'] === 'Product') {\n            return -1;\n        }\n        if (y.RecordTypeName__c !== 'CoverageSpec' && y[$scope.nsPrefix + 'RecordTypeName__c'] !== 'CoverageSpec') {\n            return 1;\n        }\n\n        // Move empty types to end\n        if (!x.Type__c && !x[prefixTypeKey] && (y.Type__c || y[prefixTypeKey])) {\n            return 1;\n        }\n        if ((x.Type__c || x[prefixTypeKey]) && !y.Type__c && !y[prefixTypeKey]) {\n            return -1;\n        }\n\n        // Sort by type, display sequence, then name\n        if (x.Type__c < y.Type__c || x[prefixTypeKey] < y[prefixTypeKey]) {\n            return -1;\n        } \n        if (x.Type__c > y.Type__c || x[prefixTypeKey] > y[prefixTypeKey]) {\n            return 1;\n        } \n        if (x.displaySequence < y.displaySequence) {\n            return -1;\n        } \n        if (x.displaySequence > y.displaySequence) {\n            return 1;\n        } \n        if (x.Name < y.Name) {\n            return -1;\n        } \n        if (x.Name > y.Name) {\n            return 1;\n        }\n\n        return 0;\n    };\n\n    $scope.syncSortedCoverages = function() {\n        angular.forEach($scope.sortedCoverages, function(coverages) {\n            if (Array.isArray(coverages)) {\n                fillInCoverages(coverages);\n            }\n        });\n    };\n\n    $scope.organizeMultiPersonData = function() {\n        // List of labels for each row\n        $scope.labelColumn = [];\n        // Sort categories and attributes\n        let attrCategories = [];\n        if (_.get($scope.productsList[0], 'childProducts.records[0].attributeCategories')) {\n            const childProducts = $scope.productsList[0].childProducts.records;\n            let childIndex = 0;\n            for (let i = 0; i < childProducts.length; i++) {\n                if (childProducts[i].instanceKey) {\n                    childIndex = i;\n                    break;\n                }\n            }\n            attrCategories = childProducts[childIndex].attributeCategories.records;\n        }\n        if (attrCategories.length) {\n            attrCategories.sort(displaySequenceSort);\n        }\n        let attributes = [];\n        if (attrCategories[0].productAttributes && attrCategories[0].productAttributes.records) {\n            attributes = attrCategories[0].productAttributes.records;\n        }\n        if (attributes.length) {\n            attributes.sort(displaySequenceSort);\n        }\n        // This label is for the top attribute in the top category on the Insured Party/Item\n        $scope.labelColumn.push({\n            label: attributes[0].label,\n            bold: true,\n            borderTop: true,\n            borderBottom: true,\n        });\n        createCoverageLabels();\n        $scope.syncSortedCoverages();\n\n        console.log('organizeMultiPersonData', $scope.labelColumn);\n    };\n\n    $scope.decideLabelColumnClassNames = function(labelObj) {\n        let classNames = '';\n        if (labelObj.borderTop) {\n            classNames = classNames + ' nds-border--top';\n        }\n        if (labelObj.borderBottom) {\n            classNames = classNames + ' nds-border--bottom';\n        }\n        if (labelObj.bold) {\n            classNames = classNames + ' vloc-ins-multi-person-label-bold';\n        }\n        if (labelObj.coverageRow) {\n            classNames = classNames + ' vloc-ins-multi-person-label-coverage-row';\n        }\n        if (labelObj.firstCoverage) {\n            classNames = classNames + ' vloc-ins-multi-person-label-first-coverage';\n        }\n        return classNames;\n    };\n\n    $scope.openCoverageEditor = function(coverage) {\n        if ($scope.coverageEditorOpen) {\n            return;\n        }\n        $scope.coverageEditorOpen = true;\n        coverage.popoverOpen = true;\n    };\n\n    $scope.closeCoverageEditor = function(coverage) {\n        $scope.coverageEditorOpen = false;\n        coverage.popoverOpen = false;\n    };\n}]);","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-multi-person/1/Vlocity/1530653922405","%vlocity_namespace%__HTML__c":"<div class=\"vloc-ins-multi-person-container vloc-ins-coverages-container-wrapper\" ng-if=\"control.vlcSI[control.itemsKey]\">\n    <div ng-if=\"baseCtrl.vlocOSInsConfigProductSet && baseCtrl.vlocOSInsConfigProductSet.timestamp !== control.vlcSI[control.itemsKey][0].timestamp\" ng-init=\"baseCtrl.setSelectedProducts(control)\"></div>\n    <div class=\"vloc-ins-multi-person-product-container\" ng-controller=\"insMultiPersonCtrl\" ng-init=\"createData(control.vlcSI[control.itemsKey], baseCtrl.$scope.bpTree.response)\">\n        <div class=\"vloc-ins-multi-person-product\" ng-repeat=\"product in productsList track by $index\" ng-if=\"$index === 0\" ng-init=\"setSelectedOption(control, product, option, this, sortMultiPersonCoverages)\" ins-rules-evaluate ins-rules-product=\"product\">\n            <div class=\"vloc-ins-multi-person-total\"><span class=\"vloc-ins-multi-person-total-label\">Total: </span><span class=\"vloc-ins-multi-person-total-price\">{{product.Price | currency: currencyCode: 2}}</span></div>\n            <div class=\"vloc-ins-multi-person-child-outer-container\">\n                <div class=\"nds-grid vloc-ins-multi-person-child-inner-container\">\n                    <div class=\"vloc-ins-multi-person-column vloc-ins-multi-person-label-column-container\" ng-if=\"!equals({}, sortedCoverages)\">\n                        <div class=\"vloc-ins-multi-person-label-column-label vloc-ins-multi-person-label-column-label-blank\">\n                            <!-- Need this blank space to account for column headers -->\n                        </div>\n                        <div class=\"vloc-ins-multi-person-label-column-label\" ng-repeat=\"labelObj in labelColumn\" ng-class=\"decideLabelColumnClassNames(labelObj)\">\n                            <p class=\"nds-truncate vloc-ins-multi-person-label-column-label-type\" ng-show=\"labelObj.showTypeHeader\">{{labelObj.type}}</p>\n                            <div class=\"nds-grid vloc-ins-multi-person-label-column-label-text\">\n                                <p class=\"nds-truncate\">{{labelObj.label}}</p>\n                                <span class=\"vloc-ins-multi-person-label-column-label-description\" bs-popover data-content=\"{{labelObj.description}}\" data-trigger=\"hover\" ng-if=\"labelObj.description\">\n                                    <slds-svg-icon sprite=\"'utility'\" icon=\"'info_alt'\" size=\"'xx-small'\" extra-classes=\"'slds-m-left--xx-small nds-m-left--xx-small description-icon'\"></slds-svg-icon>\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"vloc-ins-multi-person-column\" ng-repeat=\"(childProductIndex, childProduct) in product.childProducts.records | orderBy: 'displaySequence' track by $index\" ng-show=\"childProduct.instanceKey\" ins-rules-evaluate ins-rules-product=\"childProduct\">\n                        <div class=\"vloc-ins-multi-person-child-column-container\">\n                            <div class=\"vloc-ins-multi-person-child-column-header\">\n                                <h3 class=\"vloc-ins-multi-person-child-name\">{{childProduct.instanceKey}}</h3>\n                                <p class=\"vloc-ins-multi-person-child-demographics\">{{bpTree.response.PolicyHolders[$index].Gender}}, {{bpTree.response.PolicyHolders[$index].Age}} y/o</p>\n                                <p class=\"vloc-ins-multi-person-child-total-price\"><span>{{childProduct.Price | currency: currencyCode: 2}}</span></p>\n                            </div>\n                            <div class=\"vloc-ins-multi-person-child-column-top-attribute\">\n                                <div class=\"vloc-ins-multi-person-child-category-container vloc-ins-child-level-first-attribute-container\" ng-repeat=\"category in childProduct.attributeCategories.records | orderBy: 'displaySequence' | limitTo: 1 track by $index\">\n                                    <div class=\"vloc-ins-multi-person-child-attribute-container\" ng-repeat=\"attribute in category.productAttributes.records | orderBy: 'displaySequence' | limitTo: 1 track by $index\" ng-if=\"!attribute.hiddenByRule && attribute.inputType !== 'equalizer'\" ins-rules-evaluate=\"attribute\" ng-hide=\"attribute.hidden\">\n                                        <div ins-os-include-template=\"{{customTemplates.AttributesDisplayTemplate}}\"></div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"vloc-ins-multi-item-child-customize vloc-ins-coverages-container\">\n                                <div class=\"vloc-ins-multi-item-child-coverage-popover\">\n                                    <article class=\"nds-p-horizontal--medium vloc-ins-coverages-card ng-hide\" ng-repeat=\"(coverageIndex, coverage) in sortedCoverages[childProduct.instanceKey || childProduct.Name] track by $index\" ng-show=\"coverage.RecordTypeName__c === 'CoverageSpec' || coverage[nsPrefix + 'RecordTypeName__c'] === 'CoverageSpec' || (coverage.parentProduct && insCoveragesConfig.showParentProduct)\" ng-class=\"decideCoverageCardClassNames(coverage)\" ng-style=\"{'z-index': coverage.popoverOpen ? 7000 : 0}\" scope=\"\" onload=\"\" ins-rules-evaluate ins-rules-product=\"coverage\">\n                                        <div class=\"vloc-ins-coverages-card-inner-wrapper\" ng-class=\"{'optional-coverage': coverage.isOptional && !coverage.isAddedOptional, 'optional-coverage-selected': coverage.isOptional && coverage.isSelected, 'accordion-active': doAccordion(coverage)}\" bs-collapse>\n                                            <div class=\"vloc-product-attribute-category-container \" bs-collapse-target ng-class=\"{'accordion-toggle-active': doAccordion(coverage)}\" ng-if=\"coverage.productId\">\n                                                <div class=\"slds-form-element nds-form-element vloc-ins-coverages-coverage-printed-optional-checkbox-container\">\n                                                    <div class=\"slds-form-element__control nds-form-element__control\">\n                                                        <span class=\"slds-checkbox nds-checkbox\">\n                                                            <input type=\"checkbox\" name=\"multi-person-options\" id=\"printed-optional-coverage-checkbox-{{coverage.formattedParentInstanceKey}}-{{coverage.ProductCode}}\"\n                                                                ng-model=\"coverage.isSelected\" ng-disabled=\"!coverage.isOptional || coverage.isExcluded\" ng-change=\"selectOptionalCoverage(coverage, bpTree.response, control, scpReference)\" />\n                                                            <label class=\"slds-checkbox__label nds-checkbox__label\" for=\"printed-optional-coverage-checkbox-{{coverage.formattedParentInstanceKey}}-{{coverage.ProductCode}}\">\n                                                                <span class=\"slds-checkbox--faux nds-checkbox--faux\"></span>\n                                                            </label>\n                                                        </span>\n                                                    </div>\n                                                </div>\n                                                <div class=\"vloc-ins-coverages-coverage-row-container\" ng-style=\"{'z-index': (5555 - $index)}\">\n                                                    <div class=\"vloc-ins-coverages-coverage-row-outer-container vloc-ins-popover-element-{{childProductIndex}}-{{coverageIndex}}\" ng-class=\"{'popover-open': coverage.popoverOpen}\">\n                                                        <p class=\"vloc-ins-coverages-bold nds-m-bottom_small nds-truncate\">{{coverage.Name}}</p>\n                                                        <div class=\"vloc-product-attribute-category\" ng-repeat=\"category in coverage.attributeCategories.records track by $index\" ng-class=\"{'category-accordion': insCoveragesConfig.attrCatAccordion, 'last': $last}\" bs-collapse>\n                                                            <div class=\"nds-box nds-m-bottom_small\" ng-repeat=\"attribute in category.productAttributes.records track by $index\" ng-if=\"!attribute.hiddenByRule && attribute.inputType !== 'equalizer'\" ins-rules-evaluate=\"attribute\" ins-rules-coverage=\"coverage\" ng-hide=\"attribute.hidden\">\n                                                                <div ins-os-include-template=\"{{customTemplates.AttributesDisplayTemplate}}\"></div>\n                                                            </div>\n                                                        </div>\n                                                        <div class=\"nds-p-horizontal_medium nds-text-align_right\">\n                                                            <button ng-disabled=\"isDoneDisabled(coverage, control)\" ng-click=\"closeCoverageEditor(coverage); changeCoverage(bpTree.response, control, scpReference, coverage, attribute, null)\" class=\"nds-button ins-os-dropdown-handler-ignore slds-button--brand nds-button--brand\">Done</button>\n                                                        </div>\n                                                    </div>\n                                                    <div class=\"vloc-ins-coverages-coverage-row-flex-container nds-truncate\">\n                                                        <p class=\"vloc-ins-coverages-bold\" ng-if=\"coverage.Price\">{{coverage.Price | currency: currencyCode: 2}}</p>\n                                                        <button ng-disabled=\"coverage.isExcluded\" ng-show=\"coverage.attributeCategories.records\" ng-click=\"openCoverageEditor(coverage)\" class=\"nds-button vloc-coverage-edit\">edit</button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </article>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"nds-grid nds-grid_align-center nds-m-top_medium\" ng-show=\"validationMessages.length\">\n                <div class=\"nds-p-horizontal_medium nds-p-top_medium nds-p-bottom_x-small nds-theme_shade nds-size_1-of-2\">\n                    <div class=\"nds-grid nds-p-bottom_small\" ng-repeat=\"message in validationMessages\">\n                        <div class=\"vloc-validation-icon nds-grid nds-grid_vertical-align-center nds-p-right_medium\">\n                            <slds-svg-icon sprite=\"'utility'\" icon=\"'warning'\" size=\"'xx-small'\" extra-classes=\"'slds-m-left--xx-small nds-m-left--xx-small'\"></slds-svg-icon>\n                        </div>\n                        <div class=\"nds-grid_vertical\">\n                            <h3 class=\"vloc-ins-coverages-bold\">{{message.title}}</h3>\n                            <p>{{message.message}}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"// Variables:\n$royal-blue: #0070D2;\n$light-blue-bg: #F8FBFE;\n$text-navy: #00396b;\n$dark-navy: #19355E;\n$attr-label: #16325C;\n$border-color: #d8dde6;\n$coverage-background: #f7fafe;\n\n.via-nds {\n    .vloc-ins-multi-person-container {\n        width: 100%;\n    }\n    .vloc-ins-multi-person-total {\n        font-size: 1rem;\n        padding: 0.25rem 0 0;\n        margin-bottom: 2rem;\n        text-align: center;\n\n        .vloc-ins-multi-person-total-price {\n            font-size: 1.25rem;\n            font-weight: bold;\n        }\n    }\n    .vloc-ins-multi-person-label-column-label {\n        font-size: 1rem;\n        padding: 1rem;\n\n        &.vloc-ins-multi-person-label-column-label-blank {\n            max-height: 7rem;\n            height: 7rem;\n        }\n\n        &.vloc-ins-multi-person-label-bold {\n            font-weight: bold;\n        }\n\n        &.vloc-ins-multi-person-label-coverage-row {\n            padding-top: 0;\n            padding-bottom: 0.25rem;\n            padding-right: 0;\n\n            &.vloc-ins-multi-person-label-first-coverage {\n                margin-top: 0.25rem;\n            }\n\n            .vloc-ins-multi-person-label-column-label-type {\n                padding: 1rem 0 0.75rem;\n                font-weight: bold;\n                max-height: 3.25rem;\n                height: 3.25rem;\n            }\n            .vloc-ins-multi-person-label-column-label-text {\n                background-color: $coverage-background;\n                padding: 0.9rem 0.5rem;\n                font-size: 0.875rem;\n                max-height: 3.25rem;\n                height: 3.25rem;\n\n            }\n            .vloc-ins-multi-person-label-column-label-description {\n                .description-icon {\n                    fill: $royal-blue;\n                    cursor: help;\n                }\n\n                + .popover {\n                    z-index: 5002;\n\n                    &:focus {\n                        outline: none;\n                    }\n                }\n            }\n        }\n    }\n    .vloc-ins-coverages-coverage-row-container {\n        position: relative;\n    }\n    .vloc-ins-coverages-bold {\n        font-weight: bold;\n    }\n    .vloc-ins-coverages-coverage-row-outer-container {\n        display: none;\n        position: absolute;\n        z-index: 5001;\n        background-color: #fff;\n        border-radius: .25rem;\n        width: 20rem;\n        min-height: 2rem;\n        box-shadow: 0 2px 3px 0 rgba(0,0,0,.16);\n        border: 1px solid $border-color;\n        padding: 1rem;\n        top: 50%;\n        left: 100%;\n        transform: translateX(-50%) translateY(-50%);\n\n        &.popover-open {\n            display: block;\n        }\n\n        .vloc-ins-attribute-component {\n            .vloc-ins-attribute-component-name {\n                font-size: 0.75rem;\n                line-height: 1rem;\n\n                button {\n                    min-width: 5rem;\n                }\n            }\n        }\n    }\n\n    .vloc-ins-coverages-coverage-row-flex-container {\n        display: flex;\n        flex-direction: column;\n        align-items: start;\n        cursor: auto;\n\n        .vloc-coverage-edit {\n            border: none;\n            line-height: 1.2;\n        }\n    }\n\n    .vloc-ins-multi-person-child-outer-container {\n        overflow-x: auto;\n        padding-top: 15rem;\n        padding-bottom: 15rem;\n        margin-top: -15rem;\n        margin-bottom: -15rem;\n    }\n\n    .vloc-ins-multi-person-child-inner-container {\n        &:before, &:after {\n            content: '';\n            margin: auto;\n        }\n    }\n\n    .vloc-ins-multi-person-column {\n        flex: 0 0 auto;\n        min-width: 10rem;\n    }\n\n    .vloc-ins-multi-person-child-column-header {\n        max-height: 7rem;\n        height: 7rem;\n        font-size: 1rem;\n        padding: 0.75rem 1rem;\n\n        .vloc-ins-multi-person-child-name {\n            font-size: 1rem;\n            font-weight: bold;\n        }\n        .vloc-ins-multi-person-child-demographics {\n            font-size: 0.875rem;\n        }\n        .vloc-ins-multi-person-child-total-price {\n            font-size: 1rem;\n            padding: 0.25rem 0 0;\n\n            span {\n                font-size: 1.5rem;\n                font-weight: bold;\n            }\n        }\n    }\n\n    .vloc-ins-multi-person-child-column-configuration {\n        max-height: 3.5625rem;\n        height: 3.5625rem;\n        font-size: 1rem;\n        padding: 0.75rem 1rem;\n        border-top: 1px solid #dddbda;\n    }\n\n    .vloc-ins-multi-person-child-column-top-attribute {\n        max-height: 3.625rem;\n        height: 3.625rem;\n        font-size: 1rem;\n        padding: 0.75rem 1rem;\n        border-top: 1px solid #dddbda;\n        border-bottom: 1px solid #dddbda;\n\n        .vloc-ins-attribute-component-name {\n            display: none;\n        }\n    }\n\n    .vloc-ins-coverages-container.vloc-ins-multi-item-child-customize {\n        margin-top: 3.5rem;\n\n        .vloc-ins-coverages-card {\n            padding-bottom: 0;\n            margin-bottom: 0.25rem;\n            max-height: 3.25rem;\n            height: 3.25rem;\n            background-color: $coverage-background;\n\n            &:first-child {\n                // first child is always the root product from the coverages component, we don't need it in this template.\n                display: none;\n            }\n            &.optional-coverage {\n                .vloc-ins-coverages-heading {\n                    display: none;\n                }\n            }\n            &.show-type-header {\n                margin-top: 3.5rem;\n            }\n            .vloc-ins-coverages-card-inner-wrapper {\n                padding: 0;\n                background-color: transparent;\n                position: absolute;\n                top: 50%;\n                transform: translateY(-50%);\n\n                .vloc-ins-coverages-header-container {\n                    display: none;\n                }\n\n                &.optional-coverage {\n                    &:hover {\n                        border-color: inherit;\n                    }\n                }\n\n                .vloc-product-attribute-category-container {\n                    display: flex;\n                    border-bottom: none;\n\n                    .vloc-ins-coverages-collapse-toggle {\n                        display: none;\n                    }\n                }\n            }\n            &:hover {\n                &.optional-coverage {\n                    .vloc-ins-coverages-card-inner-wrapper {\n                        background-color: transparent;\n\n                        &.optional-coverage {\n                            background-color: inherit;\n                        }\n                    }\n                }\n            }\n        }\n\n        .vloc-ins-coverages-coverage-printed-optional-checkbox-container {\n            display: flex;\n            align-items: center;\n            width: 1.5rem;\n\n            &:focus {\n                outline: none;\n            }\n        }\n    }\n\n    .vloc-ins-attribute-component-container {\n        margin: 0;\n        display: block;\n\n        .vloc-ins-attribute-component,\n        .vloc-ins-attribute-component-limit {\n            flex: none;\n            width: 100%;\n            max-width: 100%;\n        }\n\n        .vloc-ins-attribute-component-limit-input {\n            .layout-newport {\n                .nds-input {\n                    padding-left: 0;\n                }\n            }\n        }\n    }\n\n    @media screen and (max-width: 767px) {\n        .vloc-ins-coverages-container {\n            .vloc-ins-coverages-card {\n                .vloc-product-attribute-category,\n                .vloc-product-attribute-category.category-accordion {\n                    margin: 0;\n                }\n            }\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-multi-person","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-multi-person/%vlocity_namespace%__VlocityUITemplate__c/ins-os-multi-person"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-multi-person","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-multi-person","VlocityDataPackName":"ins-os-multi-person","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":"/* iframeresizer fixes for nds */\n.iframeresizer--child .via-nds .nds-knowledge-block {\n  position: absolute; }\n  .iframeresizer--child .via-nds .nds-knowledge-block .nds-right_panel {\n    height: auto; }\n\n.via-nds .nds-is-open > .nds-accordion__content {\n  overflow: visible;\n  visibility: visible;\n  opacity: 1;\n  height: auto;\n  box-sizing: border-box; }\n\n.via-nds .nds-button.nds-accordion__summary-action:focus {\n  box-shadow: none; }\n\n.via-nds .vloc-ins-selectable-custom-image {\n  max-height: 4rem; }\n\n.via-nds .nds-accordion__content {\n  transition: all 250ms cubic-bezier(0.65, 0.05, 0.36, 1);\n  overflow: hidden;\n  visibility: visible;\n  opacity: 1; }\n  .via-nds .nds-accordion__content.in {\n    height: auto; }\n  .via-nds .nds-accordion__content.overflow-unset {\n    overflow: unset; }\n\n.via-nds .nds-accordion__summary-action-icon {\n  transition: transform .15s ease-in; }\n\n.via-nds .vloc-ins-light-blue {\n  background-color: #F8FBFE; }\n\n.via-nds .vloc-ins-product-details-compare-modal ~ .slds-backdrop {\n  background-color: rgba(22, 50, 92, 0.96);\n  opacity: 0;\n  visibility: hidden;\n  transition-duration: .4s;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 9000; }\n  .via-nds .vloc-ins-product-details-compare-modal ~ .slds-backdrop.slds-backdrop--open {\n    visibility: visible;\n    opacity: 1;\n    transition: opacity .4s linear; }\n\n.via-nds .vloc-ins-selectable-item-icon {\n  background: transparent;\n  position: relative; }\n  .via-nds .vloc-ins-selectable-item-icon .slds-icon {\n    fill: #f06e2f;\n    width: 4rem;\n    height: 4rem; }\n  .via-nds .vloc-ins-selectable-item-icon.gold .slds-icon {\n    fill: #F8C300; }\n  .via-nds .vloc-ins-selectable-item-icon.silver .slds-icon {\n    fill: #CBD4E4; }\n  .via-nds .vloc-ins-selectable-item-icon.bronze .slds-icon {\n    fill: #B2720C; }\n\n.via-slds .vloc-ins-product-details-compare-modal ~ .slds-backdrop {\n  background-color: rgba(22, 50, 92, 0.96);\n  opacity: 1;\n  visibility: visible; }\n\n.via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container {\n  width: 86%;\n  max-width: 75rem;\n  border-radius: 0; }\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container.single-product {\n    width: 50%; }\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-header {\n    border: none;\n    text-align: left;\n    padding: 1.25rem 1.5rem;\n    background-color: #F8FBFE;\n    border-radius: 0; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-header .vloc-ins-product-details-compare-modal-close-btn {\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n      right: 1rem; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-header h2 {\n      font-size: 1.75rem;\n      font-weight: 400; }\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container {\n    padding: 1.25rem 1.5rem;\n    font-size: 1rem; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container:last-child {\n      border-radius: 0; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top {\n      text-align: center;\n      padding-bottom: 1rem;\n      border-bottom: 1px solid #EAEAEA; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-container {\n        min-height: 7rem;\n        position: relative; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-name {\n        font-size: 1.125rem;\n        font-weight: 400;\n        line-height: 1.3;\n        margin-bottom: 0.25rem;\n        max-height: 4rem;\n        overflow: hidden; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-bottom-wrapper {\n        position: absolute;\n        bottom: -2rem;\n        left: 0;\n        width: 100%; }\n        .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-bottom-wrapper .vloc-ins-product-details-compare-modal-product-price {\n          display: block;\n          font-weight: 400;\n          font-size: 1.25rem;\n          position: relative;\n          bottom: -1rem; }\n          .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-bottom-wrapper .vloc-ins-product-details-compare-modal-product-price.vloc-not-selectable {\n            bottom: 0; }\n          .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-bottom-wrapper .vloc-ins-product-details-compare-modal-product-price span {\n            font-size: 0.875rem;\n            font-weight: 100; }\n        .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-bottom-wrapper .vloc-ins-product-details-compare-modal-product-select-btn {\n          width: 60%;\n          margin: 0 auto; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row {\n      padding: 0.5rem 0;\n      border-bottom: 1px solid #EAEAEA; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row .vloc-ins-product-details-compare-modal-attribute-label-code {\n        font-size: .5rem;\n        text-transform: uppercase; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row .vloc-ins-product-details-compare-modal-attribute-value {\n        text-align: center; }\n\n@media screen and (max-width: 1023px) {\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row {\n    padding: 0;\n    border: none; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row .vloc-ins-product-details-compare-modal-attribute-label {\n      background-color: #F8FBFE;\n      text-align: center;\n      padding: 0.5rem 0; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row .vloc-ins-product-details-compare-modal-attribute-value {\n      padding: 0.5rem 0;\n      border-right: 1px solid #EAEAEA; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row .vloc-ins-product-details-compare-modal-attribute-value:last-child {\n        border-right: none; } }\n\n@media screen and (max-width: 767px) {\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container {\n    width: 100%;\n    max-width: none;\n    padding: 0;\n    margin: 0; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-header {\n      padding: 0;\n      height: 2.5rem; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-header h2 {\n        display: none; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container {\n      height: 100%;\n      padding: 1rem 0;\n      font-size: 0.875rem; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container.single-product {\n      width: 100%; } }\n\n@media screen and (max-width: 480px) {\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top {\n    -ms-flex-wrap: wrap;\n    flex-wrap: wrap;\n    -ms-flex-align: start;\n    align-items: flex-start;\n    max-height: 8rem;\n    overflow: hidden; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-container {\n      margin-bottom: 1rem; }\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row {\n    max-height: 4.625rem;\n    overflow: hidden; } }\n","%vlocity_namespace%__CustomJavascript__c":"vlocity.cardframework.registerModule.controller('insOsPlanCompareModalCtrl', ['$scope', '$rootScope', function ($scope, $rootScope) {\n    'use strict';\n\n    // $scope variables\n    $scope.currencyCode = '$';\n    if (baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol) {\n        $scope.currencyCode = baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol;\n    }\n\n    //Attribute Group Type Label Map\n    $scope.attributeGroupTypeLabels = {\n        'In-Network': '- In',\n        'Out-Of-Network': '- Out'\n    };\n\n\n    /* Format userValue if date type\n    * @params {Date} date obj or string (fn handles both)\n    * @params {Boolean} isDateTime whether or not to display time\n    */\n    $scope.formatDate = function (date, isDatetime) {\n        let formattedDate = null;\n        if (!date) {\n            console.error('This date is invalid', date);\n            return formattedDate;\n        } else {\n            let monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n            if (moment) {\n                monthNames = moment.months();\n                formattedDate = moment(date).format('MMMM Do YYYY');\n                if (isDatetime) {\n                    formattedDate = moment(date).format('MMM. Do YYYY, h:mm a');\n                }\n            } else {\n                const dateObj = new Date(date);\n                if (Object.prototype.toString.call(dateObj) === '[object Date]') {\n                    if (isNaN(dateObj.getTime())) {\n                        if (typeof date === 'string' && date.indexOf('.') > -1) {\n                            date = date.split('.')[0];\n                            return $scope.formatDate(date);\n                        }\n                    }\n                } else {\n                    console.error('This date is invalid', date);\n                }\n                formattedDate = monthNames[dateObj.getUTCMonth()] + ' ' + dateObj.getUTCDate() + ' ' + dateObj.getUTCFullYear();\n\n                if (isDatetime) {\n                    formattedDate = formattedDate + ' ' + dateObj.toLocaleTimeString();\n                }\n            }\n        }\n        return formattedDate;\n    };\n\n\n    // Local functions\n    function formatContent(products) {\n        console.log('formatContent', products);\n        var formattedContent = {\n            topRow: [],\n            attributeRows: [],\n            attributeIndices: {}\n        };\n        angular.forEach(products, function (product, productIterator) {\n            if (product[baseCtrl.prototype.$scope.nsPrefix + 'RecordTypeName__c'] !== 'RatingFactSpec' && product.RecordTypeName__c !== 'RatingFactSpec') {\n                formattedContent.topRow.push({\n                    ProductCode: product.ProductCode,\n                    Name: product.Name || product.productName,\n                    Id: product.Id,\n                    Price: product.Price,\n                    disabledByRateBand: product.disabledByRateBand,\n                    tier: product.tier,\n                    productData: product\n                });\n                if (product.attributeCategories && product.attributeCategories.records) {\n                    angular.forEach(product.attributeCategories.records, function (attributeCategory) {\n                        if (attributeCategory.productAttributes && attributeCategory.productAttributes.records) {\n                            angular.forEach(attributeCategory.productAttributes.records, function (productAttribute) {\n                                if (!productAttribute.hidden) {\n                                    if (!productAttribute.formattedValues && productAttribute.values && productAttribute.values[0].value && productAttribute.userValues && (productAttribute.multiselect || productAttribute.inputType === 'radio' || productAttribute.inputType === 'dropdown')) {\n                                        productAttribute.formattedValues = [];\n                                        let selected = [];\n                                        if (!Array.isArray(productAttribute.userValues)) { //userValues can be a single value\n                                            selected.push(productAttribute.userValues);\n                                        } else {\n                                            for (let i = 0; i < productAttribute.userValues.length; i++) {//could have an array of Objs or an array of Strings/Integers\n                                                let value = productAttribute.userValues[i];\n                                                let valueType = typeof value;\n                                                if (valueType !== 'object' || value === null) {\n                                                    selected.push(value);\n                                                } else {\n                                                    for (let key in value) { //multiselect checkbox - get keys with true [{value1: true}, {value2: false}]\n                                                        if (value[key]) {\n                                                            selected.push(key);\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                        for (let i = 0; i < selected.length; i++) {\n                                            for (let j = 0; j < productAttribute.values.length; j++) {\n                                                if (selected[i].toString() === productAttribute.values[j].value.toString()) {\n                                                    productAttribute.formattedValues.push(productAttribute.values[j].label);\n                                                }\n                                            }\n                                        }\n                                    }\n                                    if (formattedContent.attributeIndices.hasOwnProperty(productAttribute.code)) {\n                                        if (!formattedContent.attributeRows[formattedContent.attributeIndices[productAttribute.code]][product.ProductCode]) {\n                                            formattedContent.attributeRows[formattedContent.attributeIndices[productAttribute.code]].attributeValues[productIterator] = {\n                                                ProductCode: product.ProductCode,\n                                                attributeCode: productAttribute.code,\n                                                userValues: productAttribute.userValues,\n                                                dataType: productAttribute.dataType,\n                                                inputType: productAttribute.inputType,\n                                                attributeGroupType: productAttribute.attributeGroupType,\n                                                hidden: productAttribute.hidden,\n                                                formattedValues: productAttribute.formattedValues\n                                            };\n                                            formattedContent.attributeRows[formattedContent.attributeIndices[productAttribute.code]].productCodes.push(product.ProductCode);\n                                        }\n                                    } else {\n                                        formattedContent.attributeRows.push({\n                                            label: productAttribute.label,\n                                            productCodes: [],\n                                            attributeValues: Array.apply(null, Array(products.length)).map(function () {\n                                                return {\n                                                    ProductCode: '',\n                                                    attributeCode: '',\n                                                    userValues: '--',\n                                                    dataType: null,\n                                                    inputType: null\n                                                };\n                                            }),\n                                            categoryDisplaySequence: attributeCategory.displaySequence,\n                                            attributeDisplaySequence: productAttribute.displaySequence,\n                                            attributeGroupType: productAttribute.attributeGroupType,\n                                            categoryName: attributeCategory.Name\n                                        });\n                                        const attributeRowsLength = formattedContent.attributeRows.length;\n                                        formattedContent.attributeRows[attributeRowsLength - 1].attributeValues[productIterator] = {\n                                            ProductCode: product.ProductCode,\n                                            attributeCode: productAttribute.code,\n                                            userValues: productAttribute.userValues,\n                                            dataType: productAttribute.dataType,\n                                            inputType: productAttribute.inputType,\n                                            attributeGroupType: productAttribute.attributeGroupType,\n                                            hidden: productAttribute.hidden,\n                                            multiselect: productAttribute.multiselect,\n                                            formattedValues: productAttribute.formattedValues\n                                        };\n                                        formattedContent.attributeRows[attributeRowsLength - 1].productCodes.push(product.ProductCode);\n                                        formattedContent.attributeIndices[productAttribute.code] = attributeRowsLength - 1;\n                                    }\n                                }\n                            });\n                        }\n                    });\n                }\n            }\n        });\n        // Sort by category displaySequence first, then by attribute displaySequence, then by label\n        formattedContent.attributeRows = formattedContent.attributeRows.sort(function (x, y) {\n            if (x.categoryDisplaySequence === y.categoryDisplaySequence) {\n                if (x.attributeDisplaySequence < y.attributeDisplaySequence) {\n                    return -1;\n                } else {\n                    return 1;\n                }\n            } else if (x.categoryDisplaySequence < y.categoryDisplaySequence) {\n                return -1;\n            } else if (x.categoryDisplaySequence > y.categoryDisplaySequence) {\n                return 1;\n            } else {\n                if (x.label < y.label) {\n                    return -1;\n                } else {\n                    return 1;\n                }\n            }\n        });\n        return formattedContent;\n    }\n\n    /* Function to init compare modal - formattedConent and childConent are used to display the table\n    * @params {obj} records list of products to formatted and displayed for comparison\n    */\n    $scope.initCompareModal = function (records) {\n        $scope.formattedContent = formatContent(records);\n        $scope.formattedChildContent = [];\n        let childProducts = {};\n        records = $scope.formattedContent.topRow;\n        if (records) { //Collect a map of {productid : [coverage1, coverage2]} to use the same formatting function\n            for (let i = 0; i < records.length; i++) {\n                if (records[i].productData.childProducts) {\n                    for (let j = 0; j < records[i].productData.childProducts.records.length; j++) {\n                        let coverage = records[i].productData.childProducts.records[j];\n                        coverage.compared = true;\n                        let key = coverage.productId || coverage.Id;\n                        if (key) {\n                            if (!childProducts[key]) {\n                                childProducts[key] = new Array(records.length);\n                            }\n                            childProducts[key][i] = coverage;\n                        }\n                    }\n                }\n            }\n        }\n        for (let key in childProducts) {\n            $scope.formattedChildContent.push(formatContent(childProducts[key])); //use same function to format\n        }\n    };\n\n    $scope.decideHtmlClasses = function () {\n        var htmlClass = '';\n        var constantClasses = 'slds-large-size--1-of-' + ($scope.formattedContent.topRow.length + 2) + ' slds-small-size--1-of-' + $scope.formattedContent.topRow.length + ' nds-large-size--1-of-' + ($scope.formattedContent.topRow.length + 2) + ' nds-small-size--1-of-' + $scope.formattedContent.topRow.length;\n        if ($scope.formattedContent.topRow.length === 1) {\n            htmlClass = constantClasses + ' slds-max-small-size--1-of-1 nds-max-small-size--1-of-1';\n        } else if ($scope.formattedContent.topRow.length > 1) {\n            htmlClass = constantClasses + ' slds-max-small-size--1-of-2 nds-max-small-size--1-of-2';\n        }\n        return htmlClass;\n    };\n\n    $scope.selectProductFromCompare = function (product) {\n        var selectProductEvent = new CustomEvent('vloc-ins-os-product-details-compare-modal-select-product', {\n            detail: {\n                ProductCode: product.ProductCode\n            }\n        });\n        document.dispatchEvent(selectProductEvent);\n        $scope.cancel();\n    };\n}]);","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-plan-compare-modal/1/Vlocityd/1543975943312","%vlocity_namespace%__HTML__c":"<div role=\"dialog\" tabindex=\"-1\" aria-labelledby=\"header43\" class=\"slds-modal slds-fade-in-open nds-modal nds-fade-in-open vloc-ins-product-details-compare-modal\" ng-controller=\"insOsPlanCompareModalCtrl\">\n    <div class=\"slds-modal__container nds-modal__container vloc-ins-product-details-compare-modal-container\" ng-init=\"initCompareModal(modalRecords)\" ng-class=\"{'single-product': formattedContent.topRow.length === 1}\">\n        <div class=\"slds-modal__header nds-modal__header vloc-ins-product-details-compare-modal-header\">\n            <button class=\"slds-button nds-button vloc-ins-product-details-compare-modal-close-btn\" title=\"Close\" ng-click=\"$slideHide()\">\n                <slds-button-svg-icon sprite=\"'utility'\" icon=\"'close'\" size=\"'large'\"></slds-button-svg-icon>\n                <span class=\"slds-assistive-text nds-assistive-text\">Close</span>\n            </button>\n            <h2 id=\"header43\" class=\"slds-text-heading--medium nds-text-heading--medium\" ng-bind=\"title\"></h2>\n        </div>\n        <div class=\"slds-modal__content nds-modal__content vloc-ins-product-details-compare-modal-content-container\">\n            <div class=\"slds-grid nds-grid vloc-ins-product-details-compare-modal-top\">\n                <div class=\"slds-large-size--2-of-{{formattedContent.topRow.length + 2}} slds-large-show nds-large-size--2-of-{{formattedContent.topRow.length + 2}} nds-large-show\"></div>\n                <div class=\"nds-m-bottom_large slds-p-horizontal--xx-small nds-p-horizontal--xx-small vloc-ins-product-details-compare-modal-product-container\" ng-class=\"decideHtmlClasses()\" ng-repeat=\"product in formattedContent.topRow\">\n                    <div class=\"vloc-ins-selectable-item-image nds-text-align_center\" ng-class=\"{'is-custom-image': product.productData.ImageId}\">\n                        <img ng-src=\"{{instanceHost + product.productData.ImageId}}\" class=\"vloc-ins-selectable-custom-image\" ng-if=\"product.productData.ImageId\" />\n                        <span class=\"slds-icon_container nds-icon_container vloc-ins-selectable-item-image-fallback vloc-ins-selectable-item-icon\" ng-if=\"!product.productData.ImageId\" ng-class=\"{'bronze' : product.tier === 'Bronze', 'gold' : product.tier === 'Gold', 'silver' : product.tier === Silver}\">\n                            <slds-svg-icon extra-classes=\"'vloc-ins-plan-icon'\" sprite=\"'custom'\" size=\"'large'\" icon=\"'custom91'\"></slds-svg-icon>\n                            <span class=\"slds-assistive-text nds-assistive-text\">Default Icon</span>\n                        </span>\n                    </div>\n                    <h3 class=\"vloc-ins-product-details-compare-modal-product-name nds-truncate slds-truncate\">{{product.Name}}</h3>\n                    <div class=\"vloc-ins-product-details-compare-modal-product-bottom-wrapper\">\n                        <div class=\"vloc-ins-product-details-compare-modal-product-price\" ng-class=\"{'vloc-not-selectable' : !isSelectable}\" ng-if=\"!product.disabledByRateBand\">{{product.Price | currency: currencyCode: 0}}/mo</div>\n                        <div class=\"vloc-ins-product-details-compare-modal-product-price\" ng-if=\"product.disabledByRateBand\">--</div>\n                         <button ng-if=\"isSelectable\" class=\"nds-button nds-m-top_medium vloc-plan-select-button\" ng-class=\"{'nds-button_neutral': !product.productData.selected, 'nds-button_brand': product.productData.selected}\" ng-click=\"toggleModalPlan(product.productData, control)\">\n                            <span>{{product.productData.selected ? 'Selected' : 'Select Plan'}}</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"vloc-ins-product-details-compare-modal-attr-rows-container\">\n                <div class=\"slds-grid slds-wrap nds-grid nds-wrap vloc-ins-product-details-compare-modal-attr-row\" ng-repeat=\"attribute in formattedContent.attributeRows\" ng-if=\"attribute.inputType !== 'equalizer'\">\n                    <div class=\"slds-large-size--2-of-{{formattedContent.topRow.length + 2}} slds-size--1-of-1 slds-truncate nds-large-size--2-of-{{formattedContent.topRow.length + 2}} nds-size--1-of-1 nds-truncate vloc-ins-product-details-compare-modal-attribute-label\">{{attribute.label}}</div>\n                    <div class=\"vloc-ins-product-details-compare-modal-attribute-value\" ng-class=\"decideHtmlClasses()\" ng-if=\"!attribute.hidden\" ng-repeat=\"attribute in attribute.attributeValues\">\n                         <div ng-if=\"attribute.inputType === 'checkbox' && !attribute.multiselect\" class=\"nds-form-element\">\n                                <div class=\"nds-form-element__control\">\n                                    <div class=\"nds-checkbox\">\n                                        <input type=\"checkbox\" name=\"options\" id=\"vloc-checkbox-plan-{{$index}}\" ng-model=\"attribute.userValues\" ng-disabled=\"true\"/>\n                                        <label class=\"nds-checkbox__label\" for=\"vloc-checkbox-plan-{{$index}}\">\n                                            <span class=\"nds-checkbox_faux\"></span>\n                                            <span class=\"nds-form-element__label\"></span>\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                             <div ng-if=\"attribute.formattedValues\">\n                                <span ng-repeat=\"val in attribute.formattedValues track by $index\">{{val}}<span ng-if=\"$index !== attribute.formattedValues.length - 1\">, </span>\n                                </span>\n                            </div>\n                            <div ng-if=\"!attribute.formattedValues\">\n                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'currency'\">{{attribute.userValues | currency: currencyCode: 0}}</p>\n                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'percentage'\">{{attribute.userValues}}%</p>\n                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'date'\">{{formatDate(attribute.userValues)}}</p>\n                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'datetime'\">{{formatDate(attribute.userValues, true)}}</p>\n                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.inputType !== 'checkbox' && !attribute.multiselect && attribute.dataType !== 'currency' && attribute.dataType !== 'percentage' && attribute.dataType !== 'date' && attribute.dataType !== 'datetime'\">\n                                    <span ng-if=\"!attribute.labelAndValue\">{{attribute.userValues}}</span>\n                                    <span ng-if=\"attribute.labelAndValue\">{{attribute.labelAndValue.valueLabel}}</span>\n                                </p>\n                            </div>\n                    </div>\n                </div>\n            </div>\n            <div bs-collapse data-start-collapsed=\"true\" data-allow-multiple=\"true\" class=\"slds-p-top_small nds-p-top_small\" ng-class=\"{'nds-is-open': isOpen[$index]}\" ng-repeat=\"childProductRows in formattedChildContent | orderBy: 'topRow[0].productData.displaySequence'\" ng-if=\"childProductRows.topRow[0].Name\">\n                <div class=\"slds-grid nds-grid vloc-ins-product-details-compare-modal-top\">\n                 <button  ng-click=\"isOpen[$index] = !isOpen[$index]\" bs-collapse-toggle=\"{{$index}}\" type=\"button\" data-toggle=\"collapse\" data-target=\"{{$index}}\" aria-expanded=\"false\" aria-controls=\"{{$index}}\" class=\"nds-button nds-button_reset nds-accordion__summary-action\">\n                     <slds-button-svg-icon sprite=\"'utility'\" icon=\"'chevrondown'\"\n                       extra-classes=\"'nds-accordion__summary-action-icon slds-button__icon slds-button__icon_left'\"></slds-button-svg-icon>\n                        <div class=\"slds-p-horizontal--xx-small nds-p-horizontal--xx-small vloc-ins-product-details-compare-modal-attr-row\">\n                        {{childProductRows.topRow[0].Name}}\n                    </div>\n                  </button>\n                </div>\n                <div bs-collapse-target id=\"{{$index}}\" class=\"collapse nds-accordion__content vloc-ins-product-details-compare-modal-attr-rows-container\">\n                    <div class=\"slds-grid slds-wrap nds-grid nds-wrap vloc-ins-product-details-compare-modal-attr-row vloc-ins-category-contents\" ng-repeat=\"attribute in childProductRows.attributeRows\" ng-if=\"attribute.inputType !== 'equalizer'\">\n                        <div class=\"slds-p-left_small nds-p-left_small slds-large-size--2-of-{{formattedContent.topRow.length + 2}} slds-size--1-of-1 slds-truncate nds-large-size--2-of-{{formattedContent.topRow.length + 2}} nds-size--1-of-1 nds-truncate vloc-ins-product-details-compare-modal-attribute-label\">{{attribute.label}}\n                            <span ng-if=\"attribute.attributeGroupType\">{{attributeGroupTypeLabels[attribute.attributeGroupType]}}</span>\n                        </div>\n                        <div class=\"vloc-ins-product-details-compare-modal-attribute-value\" ng-class=\"decideHtmlClasses()\" ng-repeat=\"attribute in attribute.attributeValues\" ng-if=\"!attribute.hidden\">\n                            <div ng-if=\"attribute.inputType === 'checkbox' && !attribute.multiselect\" class=\"nds-form-element\">\n                                <div class=\"nds-form-element__control\">\n                                    <div class=\"nds-checkbox\">\n                                        <input type=\"checkbox\" name=\"options\" id=\"vloc-checkbox-plan-{{$index}}\" ng-model=\"attribute.userValues\" ng-disabled=\"true\"/>\n                                        <label class=\"nds-checkbox__label\" for=\"vloc-checkbox-plan-{{$index}}\">\n                                            <span class=\"nds-checkbox_faux\"></span>\n                                            <span class=\"nds-form-element__label\"></span>\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div ng-if=\"attribute.formattedValues\">\n                                <span ng-repeat=\"val in attribute.formattedValues track by $index\">{{val}}<span ng-if=\"$index !== attribute.formattedValues.length - 1\">, </span>\n                                </span>\n                            </div>\n                            <div ng-if=\"!attribute.formattedValues || !attribute.formattedValues.length\">\n                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'currency'\">{{attribute.userValues | currency: currencyCode: 0}}</p>\n                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'percentage'\">{{attribute.userValues}}%</p>\n                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'date'\">{{formatDate(attribute.userValues)}}</p>\n                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'datetime'\">{{formatDate(attribute.userValues, true)}}</p>\n                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.inputType !== 'checkbox' && !attribute.multiselect && attribute.dataType !== 'currency' && attribute.dataType !== 'percentage' && attribute.dataType !== 'date' && attribute.dataType !== 'datetime'\">\n                                    <span ng-if=\"!attribute.labelAndValue\">{{attribute.userValues}}</span>\n                                    <span ng-if=\"attribute.labelAndValue\">{{attribute.labelAndValue.valueLabel}}</span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__Sass__c":"$header-bg: #F8FBFE;\n$border-color: #EAEAEA;\n$bronze: #B2720C;\n$silver: #CBD4E4;\n$gold: #F8C300;\n$light-blue: #F8FBFE;\n\n\n /* iframeresizer fixes for nds */\n .iframeresizer--child .via-nds .nds-knowledge-block {\n    position: absolute;\n    .nds-right_panel {\n      height: auto;\n    }\n}\n\n.via-nds {\n\n    .nds-is-open>.nds-accordion__content{\n        overflow: visible;\n        visibility: visible;\n        opacity: 1;\n        height: auto;\n        box-sizing: border-box;\n    }\n\n    .nds-button.nds-accordion__summary-action:focus{\n        box-shadow: none;\n    }\n\n    .vloc-ins-selectable-custom-image{\n        max-height: 4rem;\n    }\n\n    .nds-accordion__content{\n            transition: all  250ms cubic-bezier(0.65, 0.05, 0.36, 1);\n            overflow: hidden;\n            visibility: visible;\n            opacity: 1;\n           \n            &.in {\n                height: auto;\n            }\n\n            &.overflow-unset {\n                overflow: unset;\n            }\n\n    }\n\n    .nds-accordion__summary-action-icon{\n         transition: transform .15s ease-in;\n    }\n\n    .vloc-ins-light-blue{\n        background-color: $light-blue;\n    }\n \n    .vloc-ins-product-details-compare-modal {\n        ~ .slds-backdrop {\n            background-color: rgba(#16325C, 0.96);\n            opacity: 0;\n            visibility: hidden;\n            transition-duration: .4s;\n            width: 100%;\n            height: 100%;\n            position: fixed;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            z-index: 9000;\n\n            &.slds-backdrop--open {\n                visibility: visible;\n                opacity: 1;\n                transition: opacity .4s linear;\n            }\n        }\n    }\n\n    .vloc-ins-selectable-item-icon {\n        background: transparent;\n        position: relative;\n        .slds-icon {\n            fill: #f06e2f;\n            width: 4rem;\n            height: 4rem;\n        }\n        &.gold {\n            .slds-icon {\n                fill: $gold;\n            }\n        }\n        &.silver {\n            .slds-icon {\n                fill: $silver;\n            }\n        }\n        &.bronze {\n            .slds-icon {\n                fill: $bronze;\n            }\n        }\n    }\n}\n.via-slds {\n    .vloc-ins-product-details-compare-modal {\n        ~ .slds-backdrop {\n            background-color: rgba(#16325C, 0.96);\n            opacity: 1;\n            visibility: visible;\n        }\n        .vloc-ins-product-details-compare-modal-container {\n            width: 86%;\n            max-width: 75rem;\n            border-radius: 0;\n\n            &.single-product {\n                width: 50%;\n            }\n\n            .vloc-ins-product-details-compare-modal-header {\n                border: none;\n                text-align: left;\n                padding: 1.25rem 1.5rem;\n                background-color: $header-bg;\n                border-radius: 0;\n\n                .vloc-ins-product-details-compare-modal-close-btn {\n                    position: absolute;\n                    top: 50%;\n                    transform: translateY(-50%);\n                    right: 1rem;\n                }\n\n                h2 {\n                    font-size: 1.75rem;\n                    font-weight: 400;\n                }\n            }\n            .vloc-ins-product-details-compare-modal-content-container {\n                padding: 1.25rem 1.5rem;\n                font-size: 1rem;\n\n                &:last-child {\n                    border-radius: 0;\n                }\n\n                .vloc-ins-product-details-compare-modal-top {\n                    text-align: center;\n                    padding-bottom: 1rem;\n                    border-bottom: 1px solid $border-color;\n\n                    .vloc-ins-product-details-compare-modal-product-container {\n                        min-height: 7rem;\n                        position: relative;\n                    }\n\n                    .vloc-ins-product-details-compare-modal-product-name {\n                        font-size: 1.125rem;\n                        font-weight: 400;\n                        line-height: 1.3;\n                        margin-bottom: 0.25rem;\n                        max-height: 4rem;\n                        overflow: hidden;\n                    }\n\n                    .vloc-ins-product-details-compare-modal-product-bottom-wrapper {\n                        position: absolute;\n                        bottom: -2rem;\n                        left: 0;\n                        width: 100%;\n\n                        .vloc-ins-product-details-compare-modal-product-price {\n                            display: block;\n                            font-weight: 400;\n                            font-size: 1.25rem;\n                            position: relative; \n                            bottom: -1rem;\n\n                            &.vloc-not-selectable{\n                                bottom: 0;\n                            }\n    \n                            span {\n                                font-size: 0.875rem;\n                                font-weight: 100;\n                            }\n                        }\n\n                        .vloc-ins-product-details-compare-modal-product-select-btn {\n                            width: 60%;\n                            margin: 0 auto;\n                        }\n                    }\n                }\n\n                .vloc-ins-product-details-compare-modal-attr-rows-container {\n                    .vloc-ins-product-details-compare-modal-attr-row {\n                        padding: 0.5rem 0;\n                        border-bottom: 1px solid $border-color;\n\n                        .vloc-ins-product-details-compare-modal-attribute-label-code{\n                            font-size:.5rem;\n                            text-transform: uppercase;\n                        }\n\n                        .vloc-ins-product-details-compare-modal-attribute-value {\n                            text-align: center;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 1023px) {\n    .via-slds {\n        .vloc-ins-product-details-compare-modal {\n            .vloc-ins-product-details-compare-modal-container {\n                .vloc-ins-product-details-compare-modal-content-container {\n                    .vloc-ins-product-details-compare-modal-attr-rows-container {\n                        .vloc-ins-product-details-compare-modal-attr-row {\n                            padding: 0;\n                            border: none;\n\n                            .vloc-ins-product-details-compare-modal-attribute-label {\n                                background-color: $header-bg;\n                                text-align: center;\n                                padding: 0.5rem 0;\n                            }\n\n                            .vloc-ins-product-details-compare-modal-attribute-value {\n                                padding: 0.5rem 0;\n                                border-right: 1px solid $border-color;\n\n                                &:last-child {\n                                    border-right: none;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 767px) {\n    .via-slds {\n        .vloc-ins-product-details-compare-modal {\n            .vloc-ins-product-details-compare-modal-container {\n                width: 100%;\n                max-width: none;\n                padding: 0;\n                margin: 0;\n\n                .vloc-ins-product-details-compare-modal-header {\n                    padding: 0;\n                    height: 2.5rem;\n\n                    h2 {\n                        display: none;\n                    }\n                }\n\n                .vloc-ins-product-details-compare-modal-content-container {\n                    height: 100%;\n                    padding: 1rem 0;\n                    font-size: 0.875rem;\n                }\n\n                &.single-product {\n                    width: 100%;\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 480px) {\n    .via-slds {\n        .vloc-ins-product-details-compare-modal {\n            .vloc-ins-product-details-compare-modal-container {\n                .vloc-ins-product-details-compare-modal-content-container {\n                    .vloc-ins-product-details-compare-modal-top {\n                        -ms-flex-wrap: wrap;\n                        flex-wrap: wrap;\n                        -ms-flex-align: start;\n                        align-items: flex-start;\n                        max-height: 8rem;\n                        overflow: hidden;\n\n                        .vloc-ins-product-details-compare-modal-product-container {\n                            margin-bottom: 1rem;\n                        }\n                    }\n\n                    .vloc-ins-product-details-compare-modal-attr-rows-container {\n                        .vloc-ins-product-details-compare-modal-attr-row {\n                            max-height: 4.625rem;\n                            overflow: hidden;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-plan-compare-modal","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-plan-compare-modal/%vlocity_namespace%__VlocityUITemplate__c/ins-os-plan-compare-modal"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-plan-compare-modal","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-plan-compare-modal","VlocityDataPackName":"ins-os-plan-compare-modal","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":"/* iframeresizer fixes for nds */\n.iframeresizer--child .via-nds .nds-knowledge-block {\n  position: absolute; }\n  .iframeresizer--child .via-nds .nds-knowledge-block .nds-right_panel {\n    height: auto; }\n\n.via-nds .vloc-ins-product-details-compare-modal ~ .slds-backdrop {\n  background-color: rgba(22, 50, 92, 0.96);\n  opacity: 0;\n  visibility: hidden;\n  transition-duration: .4s;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 9000; }\n  .via-nds .vloc-ins-product-details-compare-modal ~ .slds-backdrop.slds-backdrop--open {\n    visibility: visible;\n    opacity: 1;\n    transition: opacity .4s linear; }\n\n.via-slds .vloc-ins-product-details-compare-modal ~ .slds-backdrop {\n  background-color: rgba(22, 50, 92, 0.96);\n  opacity: 1;\n  visibility: visible; }\n\n.via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container {\n  width: 86%;\n  max-width: 75rem;\n  border-radius: 0; }\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container.single-product {\n    width: 50%; }\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-header {\n    border: none;\n    text-align: left;\n    padding: 1.25rem 1.5rem;\n    background-color: #F8FBFE;\n    border-radius: 0; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-header .vloc-ins-product-details-compare-modal-close-btn {\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n      right: 1rem; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-header h2 {\n      font-size: 1.75rem;\n      font-weight: 400; }\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container {\n    padding: 1.25rem 1.5rem;\n    font-size: 1rem; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container:last-child {\n      border-radius: 0; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top {\n      text-align: center;\n      padding-bottom: 1rem;\n      border-bottom: 1px solid #EAEAEA; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-container {\n        min-height: 7rem;\n        position: relative; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-name {\n        font-size: 1.125rem;\n        font-weight: 400;\n        line-height: 1.3;\n        margin-bottom: 0.25rem;\n        max-height: 3rem;\n        overflow: hidden; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-bottom-wrapper {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 100%; }\n        .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-bottom-wrapper .vloc-ins-product-details-compare-modal-product-price {\n          display: block;\n          font-weight: 400;\n          font-size: 1.25rem; }\n          .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-bottom-wrapper .vloc-ins-product-details-compare-modal-product-price span {\n            font-size: 0.875rem;\n            font-weight: 100; }\n        .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-bottom-wrapper .vloc-ins-product-details-compare-modal-product-select-btn {\n          width: 60%;\n          margin: 0 auto; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row {\n      padding: 0.5rem 0;\n      border-bottom: 1px solid #EAEAEA; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row .vloc-ins-product-details-compare-modal-attribute-label {\n        padding-left: 0.25rem; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row .vloc-ins-product-details-compare-modal-attribute-value {\n        text-align: center; }\n\n@media screen and (max-width: 1023px) {\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row {\n    padding: 0;\n    border: none; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row .vloc-ins-product-details-compare-modal-attribute-label {\n      background-color: #F8FBFE;\n      text-align: center;\n      padding: 0.5rem 0; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row .vloc-ins-product-details-compare-modal-attribute-value {\n      padding: 0.5rem 0;\n      border-right: 1px solid #EAEAEA; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row .vloc-ins-product-details-compare-modal-attribute-value:last-child {\n        border-right: none; } }\n\n@media screen and (max-width: 767px) {\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container {\n    width: 100%;\n    max-width: none;\n    padding: 0;\n    margin: 0; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-header {\n      padding: 0;\n      height: 2.5rem; }\n      .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-header h2 {\n        display: none; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container {\n      height: 100%;\n      padding: 1rem 0;\n      font-size: 0.875rem; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container.single-product {\n      width: 100%; } }\n\n@media screen and (max-width: 480px) {\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top {\n    -ms-flex-wrap: wrap;\n    flex-wrap: wrap;\n    -ms-flex-align: start;\n    align-items: flex-start;\n    max-height: 8rem;\n    overflow: hidden; }\n    .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-top .vloc-ins-product-details-compare-modal-product-container {\n      margin-bottom: 1rem; }\n  .via-slds .vloc-ins-product-details-compare-modal .vloc-ins-product-details-compare-modal-container .vloc-ins-product-details-compare-modal-content-container .vloc-ins-product-details-compare-modal-attr-rows-container .vloc-ins-product-details-compare-modal-attr-row {\n    max-height: 4.625rem;\n    overflow: hidden; } }\n","%vlocity_namespace%__CustomJavascript__c":"vlocity.cardframework.registerModule.controller('insOsProductDetailsCompareModalCtrl', ['$scope', '$rootScope', function($scope, $rootScope) {\n    'use strict';\n    baseCtrl.prototype.$scope.insEnrollmentFlow = false;\n    if (baseCtrl.prototype.$scope.bpTree.children[baseCtrl.prototype.$scope.insPsControlRef\n        [baseCtrl.prototype.$scope.currentElementName].rootIndex - 1].propSetMap.remoteClass === 'EnrollmentHandler') {\n        baseCtrl.prototype.$scope.insEnrollmentFlow = true;\n    }\n\n    // $scope variables\n    $scope.currencyCode = '$';\n    if (baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol) {\n        $scope.currencyCode = baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol;\n    }\n\n    // Local functions\n    function formatContent(products) {\n        var formattedContent = {\n            topRow: [],\n            attributeRows: [],\n            attributeIndices: {}\n        };\n        angular.forEach(products, function(product, productIterator) {\n            formattedContent.topRow.push({\n                ProductCode: product.ProductCode,\n                Name: product.Name,\n                Id: product.Id,\n                Price: product.Price,\n                disabledByRateBand: product.disabledByRateBand\n            });\n            if (product.attributeCategories && product.attributeCategories.records) {\n                angular.forEach(product.attributeCategories.records, function(attributeCategory) {\n                    if (attributeCategory.productAttributes && attributeCategory.productAttributes.records) {\n                        angular.forEach(attributeCategory.productAttributes.records, function(productAttribute) {\n                            if (!productAttribute.formattedValues && productAttribute.values && productAttribute.values[0].value && productAttribute.userValues && (productAttribute.multiselect || productAttribute.inputType === 'radio' || productAttribute.inputType === 'dropdown')) {\n                                productAttribute.formattedValues = [];\n                                let selected = [];\n                                if (!productAttribute.userValues.length) { //userValues can be a single value\n                                    selected.push(productAttribute.userValues);\n                                }\n                                for (let i = 0; i < productAttribute.userValues.length; i++) {//could have an array of Objs or an array of Strings/Integers \n                                    let value = productAttribute.userValues[i];\n                                    let valueType = typeof value;\n                                    if (valueType !== 'object') {\n                                        selected.push(value);\n                                    } else {\n                                        for (let key in value) { //multiselect checkbox - get keys with true [{value1: true}, {value2: false}]\n                                            if (value[key]) {\n                                                selected.push(key);\n                                            }\n                                        }\n                                    }\n                                }\n                                for (let i = 0; i < selected.length; i++) {\n                                    for (let j = 0; j < productAttribute.values.length; j++) {\n                                        if (selected[i].toString() === productAttribute.values[j].value.toString()) {\n                                            productAttribute.formattedValues.push(productAttribute.values[j].label);\n                                        }\n                                    }\n                                }\n                            }\n                            if(productAttribute.dataType === 'date'){\n                                productAttribute.userValues = $scope.formatDate(productAttribute.userValues);\n                            }\n                            if(productAttribute.dataType === 'datetime'){\n                                productAttribute.userValues = $scope.formatDateTime(productAttribute.userValues);\n                            }\n                            var attributeRowsLength;\n                            if (formattedContent.attributeIndices.hasOwnProperty(productAttribute.code)) {\n                                if (!formattedContent.attributeRows[formattedContent.attributeIndices[productAttribute.code]][product.ProductCode]) {\n                                    formattedContent.attributeRows[formattedContent.attributeIndices[productAttribute.code]].attributeValues[productIterator] = {\n                                        ProductCode: product.ProductCode,\n                                        attributeCode: productAttribute.code,\n                                        userValues: productAttribute.userValues,\n                                        dataType: productAttribute.dataType,\n                                        inputType: productAttribute.inputType, \n                                        formattedValues: productAttribute.formattedValues\n                                    };\n                                    formattedContent.attributeRows[formattedContent.attributeIndices[productAttribute.code]].productCodes.push(product.ProductCode);\n                                }\n                            } else {\n                                formattedContent.attributeRows.push({\n                                    label: productAttribute.label,\n                                    productCodes: [],\n                                    attributeValues: Array.apply(null, Array(products.length)).map(function () {\n                                        return {\n                                            ProductCode: '',\n                                            attributeCode: '',\n                                            userValues: '--',\n                                            dataType: null,\n                                            inputType: null\n                                        };\n                                    }),\n                                    categoryDisplaySequence: attributeCategory.displaySequence,\n                                    attributeDisplaySequence: productAttribute.displaySequence,\n                                    categoryName: attributeCategory.Name\n                                });\n                                attributeRowsLength = formattedContent.attributeRows.length;\n                                formattedContent.attributeRows[attributeRowsLength - 1].attributeValues[productIterator] = {\n                                    ProductCode: product.ProductCode,\n                                    attributeCode: productAttribute.code,\n                                    userValues: productAttribute.userValues,\n                                    dataType: productAttribute.dataType,\n                                    inputType: productAttribute.inputType, \n                                    formattedValues: productAttribute.formattedValues\n                                };\n                                formattedContent.attributeRows[attributeRowsLength - 1].productCodes.push(product.ProductCode);\n                                formattedContent.attributeIndices[productAttribute.code] = attributeRowsLength - 1;\n                            }\n                        });\n                    }\n                });\n            }\n        });\n        // Sort by category displaySequence first, then by attribute displaySequence, then by label\n        formattedContent.attributeRows = formattedContent.attributeRows.sort(function(x, y) {\n            if (x.categoryDisplaySequence === y.categoryDisplaySequence) {\n                if (x.attributeDisplaySequence < y.attributeDisplaySequence) {\n                    return -1;\n                } else {\n                    return 1;\n                }\n            } else if (x.categoryDisplaySequence < y.categoryDisplaySequence) {\n                return -1;\n            } else if (x.categoryDisplaySequence > y.categoryDisplaySequence) {\n                return 1;\n            } else {\n                if (x.label < y.label) {\n                    return -1;\n                } else {\n                    return 1;\n                }\n            }\n        });\n        return formattedContent;\n    }\n\n    // $scope functions\n    $scope.initCompareModal = function(content) {\n        $scope.formattedContent = formatContent(content.recSet);\n        $scope.$apply();\n        console.log('formattedContent', $scope.formattedContent);\n    };\n\n    $scope.decideHtmlClasses = function() {\n        var htmlClass = '';\n        var constantClasses = 'slds-large-size--1-of-' + ($scope.formattedContent.topRow.length + 2) + ' slds-small-size--1-of-' + $scope.formattedContent.topRow.length + ' nds-large-size--1-of-' + ($scope.formattedContent.topRow.length + 2) + ' nds-small-size--1-of-' + $scope.formattedContent.topRow.length;\n        if ($scope.formattedContent.topRow.length === 1) {\n            htmlClass = constantClasses + ' slds-max-small-size--1-of-1 nds-max-small-size--1-of-1';\n        } else if ($scope.formattedContent.topRow.length > 1) {\n            htmlClass = constantClasses + ' slds-max-small-size--1-of-2 nds-max-small-size--1-of-2';\n        }\n        return htmlClass;\n    };\n\n    $scope.selectProductFromCompare = function(product) {\n        var selectProductEvent = new CustomEvent('vloc-ins-os-product-details-compare-modal-select-product', {\n            detail: {\n                ProductCode: product.ProductCode\n            }\n        });\n        document.dispatchEvent(selectProductEvent);\n        $scope.cancel();\n    };\n\n    /* \n    * Format Date\n    */\n    $scope.formatDate = function(date) {\n        const userTimeZone = $rootScope.vlocity.userTimeZone;\n        const userLocale = $rootScope.vlocity.userAnLocale;\n        console.log('userTimeZone', userTimeZone);\n        console.log('userLocale', userLocale);\n        const d = new Date(date);\n        let formattedDate;\n        if (userLocale && userTimeZone) {\n            formattedDate = d.toLocaleDateString(userLocale, { timeZone: userTimeZone });\n        } else {\n            formattedDate = (d.getUTCMonth() + 1) + '/' + d.getUTCDate() + '/' + d.getUTCFullYear();\n        }\n        return formattedDate;\n    };\n  \n    /* \n    * Format DateTime\n    */\n    $scope.formatDateTime = function(date) {\n        const userTimeZone = $rootScope.vlocity.userTimeZone;\n        const userLocale = $rootScope.vlocity.userAnLocale;\n        var options = { timeZone: userTimeZone, year: 'numeric', month: 'numeric', day: 'numeric', hour:\"2-digit\", minute: '2-digit'};\n        const d = new Date(date);\n        let formattedDate;\n        if (userLocale && userTimeZone) {\n            formattedDate = d.toLocaleDateString(userLocale, options);\n        } else {\n            formattedDate = (d.getUTCMonth() + 1) + '/' + d.getUTCDate() + '/' + d.getUTCFullYear();\n        }\n        return formattedDate;\n    };\n}]);","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-product-details-compare-modal/1/Vlocity/1520959805578","%vlocity_namespace%__HTML__c":"<div role=\"dialog\" tabindex=\"-1\" aria-labelledby=\"header43\" class=\"slds-modal slds-fade-in-open nds-modal nds-fade-in-open vloc-ins-product-details-compare-modal\" ng-controller=\"insOsProductDetailsCompareModalCtrl\">\n    <div class=\"slds-modal__container nds-modal__container vloc-ins-product-details-compare-modal-container\" ng-init=\"initCompareModal(content)\" ng-class=\"{'single-product': formattedContent.topRow.length === 1}\">\n        <div class=\"slds-modal__header nds-modal__header vloc-ins-product-details-compare-modal-header\">\n            <button class=\"slds-button nds-button vloc-ins-product-details-compare-modal-close-btn\" title=\"Close\" ng-click=\"cancel()\">\n                <slds-button-svg-icon sprite=\"'utility'\" icon=\"'close'\" size=\"'large'\"></slds-button-svg-icon>\n                <span class=\"slds-assistive-text nds-assistive-text\">Close</span>\n            </button>\n            <h2 id=\"header43\" class=\"slds-text-heading--medium nds-text-heading--medium\" ng-if=\"formattedContent.topRow.length > 1\">Compare Plans</h2>\n            <h2 id=\"header43\" class=\"slds-text-heading--medium nds-text-heading--medium\" ng-if=\"formattedContent.topRow.length === 1\">Plan Details</h2>\n        </div>\n        <div class=\"slds-modal__content nds-modal__content vloc-ins-product-details-compare-modal-content-container\">\n            <div class=\"slds-grid nds-grid vloc-ins-product-details-compare-modal-top\">\n                <div class=\"slds-large-size--2-of-{{formattedContent.topRow.length + 2}} slds-large-show nds-large-size--2-of-{{formattedContent.topRow.length + 2}} nds-large-show\"></div>\n                <div class=\"slds-p-horizontal--xx-small nds-p-horizontal--xx-small vloc-ins-product-details-compare-modal-product-container\" ng-class=\"decideHtmlClasses()\" ng-repeat=\"product in formattedContent.topRow\">\n                    <h3 class=\"vloc-ins-product-details-compare-modal-product-name\">{{product.Name}}</h3>\n                    <div class=\"vloc-ins-product-details-compare-modal-product-bottom-wrapper\">\n                        <span class=\"vloc-ins-product-details-compare-modal-product-price\" ng-if=\"!product.disabledByRateBand\">{{product.Price | currency: currencyCode: 0}}<span>/mo</span></span>\n                        <span class=\"vloc-ins-product-details-compare-modal-product-price\" ng-if=\"product.disabledByRateBand\">--</span>\n                        <button class=\"slds-button slds-button--brand nds-button nds-button--brand vloc-ins-product-details-compare-modal-product-select-btn\" ng-click=\"selectProductFromCompare(product)\" ng-if=\"!product.disabledByRateBand\">Select</button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"vloc-ins-product-details-compare-modal-attr-rows-container\">\n                <div class=\"slds-grid slds-wrap nds-grid nds-wrap vloc-ins-product-details-compare-modal-attr-row\" ng-repeat=\"attribute in formattedContent.attributeRows\" ng-if=\"attribute.inputType !== 'equalizer'\">\n                    <div class=\"slds-large-size--2-of-{{formattedContent.topRow.length + 2}} slds-size--1-of-1 slds-truncate nds-large-size--2-of-{{formattedContent.topRow.length + 2}} nds-size--1-of-1 nds-truncate vloc-ins-product-details-compare-modal-attribute-label\">{{attribute.label}}</div>                  \n                    <div class=\"vloc-ins-product-details-compare-modal-attribute-value\" ng-class=\"decideHtmlClasses()\" ng-repeat=\"value in attribute.attributeValues\">\n                        <div ng-if=\"value.formattedValues\">\n                            <span ng-repeat=\"val in value.formattedValues\">{{val}}<span ng-if=\"$index !== value.formattedValues.length - 1\">, </span>\n                            </span>\n                        </div>  \n                        <span ng-if=\"!value.formattedValues\">\n                            <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"value.dataType === 'currency'\">{{value.userValues | currency: currencyCode: 0}}</p>\n                            <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"value.dataType === 'percentage'\">{{value.userValues}}%</p>\n                            <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"value.dataType !== 'currency' && value.dataType !== 'percentage' && !value.multiselect && value.dataType !== 'currency'\">\n                                <span ng-if=\"!attribute.labelAndValue\">{{attribute.userValues}}</span>\n                                <span ng-if=\"attribute.labelAndValue\">{{attribute.labelAndValue.valueLabel}}</span>\n                            </p>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"$header-bg: #F8FBFE;\n$border-color: #EAEAEA;\n\n\n /* iframeresizer fixes for nds */\n .iframeresizer--child .via-nds .nds-knowledge-block {\n    position: absolute;\n    .nds-right_panel {\n      height: auto;\n    }\n}\n\n.via-nds {\n    .vloc-ins-product-details-compare-modal {\n        ~ .slds-backdrop {\n            background-color: rgba(#16325C, 0.96);\n            opacity: 0;\n            visibility: hidden;\n            transition-duration: .4s;\n            width: 100%;\n            height: 100%;\n            position: fixed;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            z-index: 9000;\n\n            &.slds-backdrop--open {\n                visibility: visible;\n                opacity: 1;\n                transition: opacity .4s linear;\n            }\n        }\n    }\n}\n.via-slds {\n    .vloc-ins-product-details-compare-modal {\n        ~ .slds-backdrop {\n            background-color: rgba(#16325C, 0.96);\n            opacity: 1;\n            visibility: visible;\n        }\n        .vloc-ins-product-details-compare-modal-container {\n            width: 86%;\n            max-width: 75rem;\n            border-radius: 0;\n\n            &.single-product {\n                width: 50%;\n            }\n\n            .vloc-ins-product-details-compare-modal-header {\n                border: none;\n                text-align: left;\n                padding: 1.25rem 1.5rem;\n                background-color: $header-bg;\n                border-radius: 0;\n\n                .vloc-ins-product-details-compare-modal-close-btn {\n                    position: absolute;\n                    top: 50%;\n                    transform: translateY(-50%);\n                    right: 1rem;\n                }\n\n                h2 {\n                    font-size: 1.75rem;\n                    font-weight: 400;\n                }\n            }\n            .vloc-ins-product-details-compare-modal-content-container {\n                padding: 1.25rem 1.5rem;\n                font-size: 1rem;\n\n                &:last-child {\n                    border-radius: 0;\n                }\n\n                .vloc-ins-product-details-compare-modal-top {\n                    text-align: center;\n                    padding-bottom: 1rem;\n                    border-bottom: 1px solid $border-color;\n\n                    .vloc-ins-product-details-compare-modal-product-container {\n                        min-height: 7rem;\n                        position: relative;\n                    }\n\n                    .vloc-ins-product-details-compare-modal-product-name {\n                        font-size: 1.125rem;\n                        font-weight: 400;\n                        line-height: 1.3;\n                        margin-bottom: 0.25rem;\n                        max-height: 3rem;\n                        overflow: hidden;\n                    }\n\n                    .vloc-ins-product-details-compare-modal-product-bottom-wrapper {\n                        position: absolute;\n                        bottom: 0;\n                        left: 0;\n                        width: 100%;\n\n                        .vloc-ins-product-details-compare-modal-product-price {\n                            display: block;\n                            font-weight: 400;\n                            font-size: 1.25rem;\n    \n                            span {\n                                font-size: 0.875rem;\n                                font-weight: 100;\n                            }\n                        }\n\n                        .vloc-ins-product-details-compare-modal-product-select-btn {\n                            width: 60%;\n                            margin: 0 auto;\n                        }\n                    }\n                }\n\n                .vloc-ins-product-details-compare-modal-attr-rows-container {\n                    .vloc-ins-product-details-compare-modal-attr-row {\n                        padding: 0.5rem 0;\n                        border-bottom: 1px solid $border-color;\n\n                        .vloc-ins-product-details-compare-modal-attribute-label {\n                            padding-left: 0.25rem;\n                        }\n\n                        .vloc-ins-product-details-compare-modal-attribute-value {\n                            text-align: center;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 1023px) {\n    .via-slds {\n        .vloc-ins-product-details-compare-modal {\n            .vloc-ins-product-details-compare-modal-container {\n                .vloc-ins-product-details-compare-modal-content-container {\n                    .vloc-ins-product-details-compare-modal-attr-rows-container {\n                        .vloc-ins-product-details-compare-modal-attr-row {\n                            padding: 0;\n                            border: none;\n\n                            .vloc-ins-product-details-compare-modal-attribute-label {\n                                background-color: $header-bg;\n                                text-align: center;\n                                padding: 0.5rem 0;\n                            }\n\n                            .vloc-ins-product-details-compare-modal-attribute-value {\n                                padding: 0.5rem 0;\n                                border-right: 1px solid $border-color;\n\n                                &:last-child {\n                                    border-right: none;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 767px) {\n    .via-slds {\n        .vloc-ins-product-details-compare-modal {\n            .vloc-ins-product-details-compare-modal-container {\n                width: 100%;\n                max-width: none;\n                padding: 0;\n                margin: 0;\n\n                .vloc-ins-product-details-compare-modal-header {\n                    padding: 0;\n                    height: 2.5rem;\n\n                    h2 {\n                        display: none;\n                    }\n                }\n\n                .vloc-ins-product-details-compare-modal-content-container {\n                    height: 100%;\n                    padding: 1rem 0;\n                    font-size: 0.875rem;\n                }\n\n                &.single-product {\n                    width: 100%;\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 480px) {\n    .via-slds {\n        .vloc-ins-product-details-compare-modal {\n            .vloc-ins-product-details-compare-modal-container {\n                .vloc-ins-product-details-compare-modal-content-container {\n                    .vloc-ins-product-details-compare-modal-top {\n                        -ms-flex-wrap: wrap;\n                        flex-wrap: wrap;\n                        -ms-flex-align: start;\n                        align-items: flex-start;\n                        max-height: 8rem;\n                        overflow: hidden;\n\n                        .vloc-ins-product-details-compare-modal-product-container {\n                            margin-bottom: 1rem;\n                        }\n                    }\n\n                    .vloc-ins-product-details-compare-modal-attr-rows-container {\n                        .vloc-ins-product-details-compare-modal-attr-row {\n                            max-height: 4.625rem;\n                            overflow: hidden;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-product-details-compare-modal","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-product-details-compare-modal/%vlocity_namespace%__VlocityUITemplate__c/ins-os-product-details-compare-modal"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-product-details-compare-modal","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-product-details-compare-modal","VlocityDataPackName":"ins-os-product-details-compare-modal","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".via-slds .ins-os-product-rules-review-wrapper p {\n  margin-bottom: 1rem; }\n  .via-slds .ins-os-product-rules-review-wrapper p a {\n    color: #16325C; }\n\n.via-slds .ins-os-product-rules-review-wrapper .ins-os-product-rules-review-card {\n  border: 1px solid #0070D2;\n  background-color: #F8FBFE;\n  color: #16325C;\n  border-radius: 0.25rem;\n  padding: 1.25rem 1.5rem;\n  margin-bottom: 1.5rem;\n  line-height: 1.4; }\n  .via-slds .ins-os-product-rules-review-wrapper .ins-os-product-rules-review-card .ins-os-product-rules-review-rule {\n    font-size: 0.8125rem;\n    display: flex; }\n    .via-slds .ins-os-product-rules-review-wrapper .ins-os-product-rules-review-card .ins-os-product-rules-review-rule .ins-os-product-rules-review-rule-number span {\n      width: 1.75rem;\n      height: 1.75rem;\n      display: block;\n      background-color: #0070D2;\n      border-radius: 50%;\n      color: white;\n      text-align: center;\n      line-height: 1.75rem;\n      margin-right: .5rem; }\n    .via-slds .ins-os-product-rules-review-wrapper .ins-os-product-rules-review-card .ins-os-product-rules-review-rule .ins-os-product-rules-review-rule-details h4 {\n      font-weight: bold; }\n","%vlocity_namespace%__CustomJavascript__c":"vlocity.cardframework.registerModule.controller('insOsProductRulesReviewCtrl', ['$scope', function($scope) {\n    'use strict';\n    $scope.initProductRulesReview = function(control) {\n        console.log('control', control);\n        $scope.rulesList = [];\n        if(control.vlcSI[control.itemsKey][0]) {\n            for(let instanceKey in control.vlcSI[control.itemsKey][0]) {\n                if(control.vlcSI[control.itemsKey][0][instanceKey]) {\n                    $scope.rulesList = $scope.rulesList.concat(control.vlcSI[control.itemsKey][0][instanceKey]);\n                }\n            }\n        }\n    };\n}]);","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-product-rules-review/1/Vlocity/1512769424162","%vlocity_namespace%__HTML__c":"<div class=\"ins-os-product-rules-review-wrapper\" ng-controller=\"insOsProductRulesReviewCtrl\"\n    ng-if=\"control.vlcSI[control.itemsKey]\" ng-init=\"initProductRulesReview(control)\">\n    <div class=\"ins-os-product-rules-review-container\">\n        <p>Thank You! Your application has been submitted to our underwriting department for review. The underwriting\n            will be evaluating the following areas.</p>\n        <div class=\"ins-os-product-rules-review-card\">\n            <div class=\"slds-size_1-of-1 slds-m-bottom_medium\">\n                <h3><strong>Underwriting Evaluation</strong></h3>\n            </div>\n            <div class=\"slds-grid slds-grid_wrap slds-m-bottom_medium ins-os-product-rules-review-rule\"\n                ng-repeat=\"p in rulesList\">\n                <div\n                    class=\"slds-max-small-size_1-of-6 slds-size_1-of-12 slds-m-top_xxx-small ins-os-product-rules-review-rule-number\">\n                    <span>{{$index + 1}}</span></div>\n                <div class=\"slds-max-small-size_5-of-6 slds-size_11-of-12 ins-os-product-rules-review-rule-details\">\n                    <h4><strong><span ng-if=\"p.ruleDetails.instanceKey\">{{p.ruleDetails.instanceKey}}:\n                            </span>{{p.ruleDetails['requirement name']}}</strong></h4>\n                    <p class=\"slds-m-bottom_none\"><em>{{p.ruleDetails.message}}</em></p>\n                </div>\n            </div>\n        </div>\n        <p>We look forward to serving you as your insurance needs evolve. Please contact us at <a\n                href=\"https://www.vlocity.com/\" target=\"_blank\"><strong>www.vlocity.com</strong></a>, via email at <a\n                href=\"mailto:customerservice@vlocity.com\"><strong>customerservice@vlocity.com</strong></a> or or via\n            phone at <a href=\"tel:18448562489\"><strong>888.Vlocity</strong></a> if we can be of assistance.</p>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":".via-slds {\n    .ins-os-product-rules-review-wrapper {\n        p {\n            margin-bottom: 1rem;\n            \n            a {\n                color: #16325C;\n            }\n        }\n        \n        .ins-os-product-rules-review-card {\n            border: 1px solid #0070D2;\n            background-color: #F8FBFE;\n            color: #16325C;\n            border-radius: 0.25rem;\n            padding: 1.25rem 1.5rem;\n            margin-bottom: 1.5rem;\n            line-height: 1.4;\n\n            .ins-os-product-rules-review-rule {\n                font-size: 0.8125rem;\n                display: flex;\n\n                .ins-os-product-rules-review-rule-number {\n                    span {\n                        width: 1.75rem;\n                        height: 1.75rem;\n                        display: block;\n                        background-color: #0070D2;\n                        border-radius: 50%;\n                        color: white;\n                        text-align: center;\n                        line-height: 1.75rem;\n                        margin-right: .5rem;\n                    }\n                }\n                .ins-os-product-rules-review-rule-details {\n                    h4 {\n                        font-weight: bold;\n                    }\n                }\n            }\n        }\n    }\n\n    @media screen and (max-width: 650px) {\n        .ins-os-product-rules-review-wrapper {\n            .ins-os-product-rules-review-card {\n                \n            }\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-product-rules-review","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-product-rules-review/%vlocity_namespace%__VlocityUITemplate__c/ins-os-product-rules-review"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-product-rules-review","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-product-rules-review","VlocityDataPackName":"ins-os-product-rules-review","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".vloc-mobile-hide {\n  display: block; }\n\n.vloc-mobile-show {\n  display: none; }\n\n.via-slds.via-omni .vlc-slds-selItem > .slds-form-element__control:first-child {\n  width: 100%; }\n\n.via-slds .vloc-ins-selectable-item-outer-container {\n  width: 100%; }\n\n.via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) {\n  width: 100%; }\n  .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-pagination-container {\n    background-color: transparent;\n    border: none;\n    padding: 0; }\n    .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-pagination-container .vloc-ins-selected-product > span {\n      line-height: 2rem; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-pagination-container .vloc-ins-selected-product > span .vloc-ins-selected-product-strong {\n        font-weight: 400; }\n  .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container {\n    margin: 0 auto; }\n    .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item {\n      display: flex; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-inner-wrapper {\n        position: relative;\n        border: 1px solid #0070D2;\n        border-radius: 0.25rem;\n        background-color: #f8fbfe;\n        padding: 2.25rem 2rem;\n        transition: border-color 150ms ease-in, background-color 150ms ease-in;\n        margin: 0 0.5rem;\n        width: 100%; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:first-child .vloc-ins-selectable-item-inner-wrapper {\n        margin-left: 0; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:last-child .vloc-ins-selectable-item-inner-wrapper {\n        margin-right: 0; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:focus {\n        outline: none; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item.vloc-ins-one-product .vloc-ins-selectable-item-inner-wrapper {\n        margin: 0 auto;\n        max-width: 50%; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item.vloc-ins-one-product:last-child .vloc-ins-selectable-item-inner-wrapper {\n        margin: 0 auto; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-selected {\n        width: 0;\n        height: 0;\n        border-style: solid;\n        border-width: 0 4rem 4rem 0;\n        border-color: transparent #04844b transparent transparent;\n        position: absolute;\n        top: 0;\n        right: 0;\n        visibility: hidden;\n        opacity: 0;\n        transition: visibility 0ms linear 150ms, opacity 150ms ease-in; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-selected.active {\n          opacity: 1;\n          visibility: visible;\n          transition: visibility 0ms linear 0ms, opacity 150ms ease-in; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-selected .slds-icon {\n          fill: white;\n          position: absolute;\n          left: 2.1rem;\n          top: 0.5rem; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-top .vloc-ins-selectable-item-price {\n        width: 6.25rem;\n        height: 6.25rem;\n        margin: 0 auto;\n        text-align: center;\n        background-color: #0070D2;\n        border-radius: 50%;\n        margin-bottom: 1.5rem;\n        color: white;\n        line-height: 6.25rem;\n        font-size: 1.5rem;\n        font-weight: 400;\n        transition: background-color 150ms ease-in; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-top .vloc-ins-selectable-item-name {\n        font-size: 1.75rem;\n        line-height: 1.3;\n        font-weight: 400;\n        color: #19355E;\n        text-align: center;\n        margin-bottom: 1.75rem; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle {\n        color: #16325C;\n        width: 100%;\n        text-align: center; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle .vloc-ins-selectable-item-parent-attribute-label {\n          margin-right: 0.25rem;\n          display: inline-block; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle .vloc-ins-selectable-item-parent-attribute-value {\n          font-weight: 400;\n          display: inline-block; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-regular + .vloc-ins-parent-attr-non-regular {\n          margin-top: 1.5rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular {\n          border-bottom: 1px solid #d8dde6;\n          padding: 0.75rem 0.25rem;\n          margin: 0;\n          text-align: left;\n          font-size: 0.875rem; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-label {\n            float: left; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value {\n            float: right;\n            color: #0070D2; }\n            .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value .slds-icon {\n              fill: #0070D2; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-optional-heading-container {\n        margin: 2rem 0 1.25rem;\n        border-bottom: 1px solid rgba(22, 50, 92, 0.4);\n        padding-bottom: 0.25rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-optional-heading-container .vloc-ins-selectable-item-optional-heading .vloc-ins-selectable-item-optional-heading-text {\n          text-transform: uppercase;\n          letter-spacing: 1px;\n          font-size: 1rem;\n          font-weight: 400;\n          color: #16325C; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper {\n        font-size: 0.875rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-label {\n          color: #16325C;\n          font-weight: 400; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-value {\n          color: #0070D2;\n          transition: color 150ms ease-in; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-categories .vloc-ins-selectable-item-coverage-details-attributes {\n        font-size: 0.75rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-categories .vloc-ins-selectable-item-coverage-details-attributes .vloc-ins-selectable-item-coverage-details-attributes-label {\n          color: #979797; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-categories .vloc-ins-selectable-item-coverage-details-attributes .vloc-ins-selectable-item-coverage-details-attributes-value {\n          color: #0070D2;\n          transition: color 150ms ease-in; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper {\n        cursor: pointer;\n        border-color: #19355E;\n        background-color: #ecf2fa; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image\n.vloc-ins-selectable-item-similar-plan-container {\n          background-color: #19355E; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image\n.vloc-ins-selectable-item-similar-plan-container .vloc-ins-selectable-item-similar-plan .vloc-ins-selectable-item-similar-plan-triangle-pointing-down {\n            border-top-color: #19355E; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-price {\n          background-color: #19355E; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-name {\n          color: black; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-description {\n          color: black; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle {\n          color: black; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value {\n            color: #19355E; }\n            .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value .slds-icon {\n              fill: #19355E; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-label {\n          color: black; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-value {\n          color: #19355E; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-categories .vloc-ins-selectable-item-coverage-details-attributes .vloc-ins-selectable-item-coverage-details-attributes-value {\n          color: #19355E; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-price,\n.via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-label {\n          color: black; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-select-plan-btn {\n          border-color: #19355E;\n          color: white;\n          background-color: #19355E; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container {\n          color: #19355E; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container .vloc-ins-selectable-item-compare-checkbox-faux {\n            border-color: #19355E; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container .vloc-ins-selectable-item-compare-checkbox-label {\n            color: #19355E; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-plan-details {\n          color: black; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper {\n        cursor: pointer;\n        border-color: #04844b;\n        background-color: #f8fffc; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image\n.vloc-ins-selectable-item-similar-plan-container {\n          background-color: #04844b; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image\n.vloc-ins-selectable-item-similar-plan-container .vloc-ins-selectable-item-similar-plan .vloc-ins-selectable-item-similar-plan-triangle-pointing-down {\n            border-top-color: #04844b; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-price {\n          background-color: #04844b; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-name {\n          color: #000805; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-description {\n          color: #000805; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle {\n          color: #000805; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value {\n            color: #04844b; }\n            .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value .slds-icon {\n              fill: #04844b; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-label {\n          color: #000805; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-value {\n          color: #04844b; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-categories .vloc-ins-selectable-item-coverage-details-attributes .vloc-ins-selectable-item-coverage-details-attributes-value {\n          color: #04844b; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-price,\n.via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-label {\n          color: #000805; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-select-plan-btn {\n          border-color: #04844b;\n          color: white;\n          background-color: #04844b; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container {\n          color: #04844b; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container .vloc-ins-selectable-item-compare-checkbox-faux {\n            border-color: #04844b; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container .vloc-ins-selectable-item-compare-checkbox-label {\n            color: #04844b; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-plan-details {\n          color: #000805; }\n\n.via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin {\n  width: 100%;\n  color: #053a69; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item-enrollment-top {\n    width: 50%;\n    margin: 0 auto; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item-enrollment-top .vloc-ins-selectable-item-enrollment-top-label {\n      line-height: 1.875rem; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-inner-wrapper {\n    text-align: center;\n    position: relative;\n    background-color: #f8fbfe;\n    border: 1px solid #d7dde6;\n    border-radius: 0.5rem;\n    margin: 0;\n    transition: border-color 150ms ease-in, background-color 150ms ease-in;\n    margin: 0 0.5rem;\n    padding: 1rem 1.5rem 14.875rem 1.5rem;\n    height: 100%; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:focus {\n    outline: none; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-similar-plan-container {\n    width: calc(100% + 2px);\n    height: 1.5rem;\n    background-color: #19355E;\n    transition: background-color 150ms ease-in;\n    color: white;\n    position: absolute;\n    top: -1.55rem;\n    left: -1px;\n    border-top-left-radius: 0.5rem;\n    border-top-right-radius: 0.5rem;\n    line-height: 2.25rem;\n    font-size: 0.75rem; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-similar-plan-container .vloc-ins-selectable-item-similar-plan {\n      position: relative;\n      overflow: hidden;\n      padding-bottom: 1rem; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-similar-plan-container .vloc-ins-selectable-item-similar-plan .vloc-ins-selectable-item-similar-plan-label {\n        display: inline-block;\n        line-height: 1; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-similar-plan-container .vloc-ins-selectable-item-similar-plan .vloc-ins-selectable-item-similar-plan-triangle-pointing-down {\n        width: 100%;\n        height: 0;\n        border-style: solid;\n        border-width: 1rem 12rem 0 12rem;\n        border-color: #19355E transparent transparent transparent;\n        transition: border-top-color 150ms ease-in;\n        position: absolute;\n        top: 1.5rem;\n        left: 50%;\n        transform: translateX(-50%); }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image {\n    min-height: 2.5rem;\n    margin-top: 0.5rem; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image.is-custom-image {\n      min-height: 3.25rem;\n      padding-top: 0.25rem;\n      margin-bottom: 0.5rem; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image .vloc-ins-selectable-custom-image {\n      height: 3.25rem; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image .vloc-ins-selectable-item-image-fallback {\n      background: transparent; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image .vloc-ins-selectable-item-image-fallback .slds-icon {\n        fill: #f06e2f;\n        width: 4rem;\n        height: 4rem; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-top {\n    margin-bottom: 0.75rem;\n    min-height: 4.5rem; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-top .vloc-ins-selectable-item-name {\n      font-weight: bold;\n      font-size: 1.125rem;\n      line-height: 1.3;\n      max-height: 2.875rem;\n      overflow: hidden; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-top .vloc-ins-selectable-item-description {\n      font-size: 0.875rem;\n      margin-top: 0.25rem; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-middle {\n    margin-bottom: 2rem; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-middle .vloc-ins-selectable-item-parent-attribute-value {\n      display: block;\n      font-size: 1.5rem;\n      line-height: 1.4;\n      font-weight: 400; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-middle .vloc-ins-selectable-item-parent-attribute-label {\n      display: block;\n      font-size: 1rem; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom {\n    height: 14.375rem;\n    position: absolute;\n    bottom: 0.5rem;\n    left: 0;\n    width: 100%;\n    padding: 0 1.5rem;\n    overflow: hidden; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container {\n      margin-bottom: 2.25rem; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-price {\n        display: block;\n        font-size: 1.5rem;\n        line-height: 1.4;\n        font-weight: 400; }\n        .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-price .vloc-ins-enrollment-price-period {\n          font-size: 1.15rem;\n          font-weight: normal; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-label {\n        display: block;\n        font-size: 1rem; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-select-plan-btn {\n      cursor: pointer;\n      background: 0 0;\n      background-color: white;\n      display: block;\n      width: 100%;\n      padding: 0.65rem 0;\n      border: 2px solid #0070D2;\n      border-radius: 0.25rem;\n      color: #1589ee;\n      margin-bottom: 1.5rem;\n      transition: border-color 150ms ease-in, background-color 150ms ease-in, color 150ms ease-in; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container .vloc-ins-selectable-item-compare-checkbox-label {\n      line-height: 1.6; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-plan-details {\n      cursor: pointer;\n      font-size: 0.875rem;\n      color: #1589ee;\n      display: inline-block; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom.disabled-by-rate-band .vloc-ins-enrollment-select-plan-btn {\n      visibility: hidden; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper {\n    cursor: pointer;\n    border-color: #19355E;\n    background-color: #ecf2fa; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image\n.vloc-ins-selectable-item-similar-plan-container {\n      background-color: #19355E; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image\n.vloc-ins-selectable-item-similar-plan-container .vloc-ins-selectable-item-similar-plan .vloc-ins-selectable-item-similar-plan-triangle-pointing-down {\n        border-top-color: #19355E; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-price {\n      background-color: #19355E; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-name {\n      color: black; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-description {\n      color: black; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle {\n      color: black; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value {\n        color: #19355E; }\n        .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value .slds-icon {\n          fill: #19355E; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-label {\n      color: black; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-value {\n      color: #19355E; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-categories .vloc-ins-selectable-item-coverage-details-attributes .vloc-ins-selectable-item-coverage-details-attributes-value {\n      color: #19355E; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-price,\n.via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-label {\n      color: black; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-select-plan-btn {\n      border-color: #19355E;\n      color: white;\n      background-color: #19355E; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container {\n      color: #19355E; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container .vloc-ins-selectable-item-compare-checkbox-faux {\n        border-color: #19355E; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container .vloc-ins-selectable-item-compare-checkbox-label {\n        color: #19355E; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band):hover .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-plan-details {\n      color: black; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper {\n    cursor: pointer;\n    border-color: #04844b;\n    background-color: #f8fffc; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image\n.vloc-ins-selectable-item-similar-plan-container {\n      background-color: #04844b; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image\n.vloc-ins-selectable-item-similar-plan-container .vloc-ins-selectable-item-similar-plan .vloc-ins-selectable-item-similar-plan-triangle-pointing-down {\n        border-top-color: #04844b; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-price {\n      background-color: #04844b; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-name {\n      color: #000805; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-top .vloc-ins-selectable-item-description {\n      color: #000805; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle {\n      color: #000805; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value {\n        color: #04844b; }\n        .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value .slds-icon {\n          fill: #04844b; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-label {\n      color: #000805; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-value {\n      color: #04844b; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-categories .vloc-ins-selectable-item-coverage-details-attributes .vloc-ins-selectable-item-coverage-details-attributes-value {\n      color: #04844b; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-price,\n.via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container .vloc-ins-enrollment-price-label {\n      color: #000805; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-select-plan-btn {\n      border-color: #04844b;\n      color: white;\n      background-color: #04844b; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container {\n      color: #04844b; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container .vloc-ins-selectable-item-compare-checkbox-faux {\n        border-color: #04844b; }\n      .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-compare-container label.vloc-ins-selectable-item-compare-checkbox-label-container .vloc-ins-selectable-item-compare-checkbox-label {\n        color: #04844b; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item:not(.disabled-by-rate-band)[vloc-slds-added=\"true\"] .vloc-ins-selectable-item-inner-wrapper .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-plan-details {\n      color: #000805; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item-enrollment-bottom .vloc-ins-selectable-item-compare-btn {\n    padding: 0 3rem; }\n\n@media screen and (max-width: 1225px) {\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-inner-wrapper {\n    padding: 1rem 1rem 14.875rem 1rem; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom {\n    padding: 0 1rem; } }\n\n@media screen and (max-width: 1023px) {\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item-enrollment-top {\n    width: 75%; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item {\n    margin: 1rem 0 0; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-similar-plan-container {\n      top: -1.25rem; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-hide-on-large-screens {\n      display: none; }\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-inner-container {\n    flex-wrap: wrap;\n    align-items: flex-start; } }\n\n@media screen and (max-width: 999px) {\n  html, body {\n    font-size: 16px; } }\n\n@media screen and (max-width: 767px) {\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item-enrollment-top {\n    width: 100%; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item-enrollment-top .vloc-ins-selectable-item-enrollment-top-label {\n      font-size: 0.875rem;\n      padding-right: 0.25rem; }\n    .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item-enrollment-top .vloc-ins-selectable-item-enrollment-top-form-element {\n      padding-right: 20%; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item.vloc-ins-has-similar-flag {\n    margin-top: 2.125rem; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-inner-wrapper {\n    padding: 1rem 2.5rem 14.375rem 2.5rem; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-top {\n    min-height: 0; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-similar-plan-container .vloc-ins-selectable-item-similar-plan .vloc-ins-selectable-item-similar-plan-triangle-pointing-down {\n    border-width: 1rem 24rem 0 24rem; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-hide-on-small-screens {\n    display: none; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-price-container {\n    margin-bottom: 1.25rem; }\n  .via-slds .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-enrollment-select-plan-btn {\n    margin-bottom: 1.25rem; } }\n\n@media screen and (max-width: 699px) {\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item.vloc-ins-one-product .vloc-ins-selectable-item-inner-wrapper {\n    max-width: 80%; }\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item.vloc-ins-one-product .vloc-ins-selectable-item-top .vloc-ins-selectable-item-name {\n    font-size: 1.5rem;\n    line-height: 1.2; }\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-inner-wrapper {\n    padding: 1rem 2rem 14.375rem 2rem; } }\n\n@media screen and (max-width: 480px) {\n  .vloc-mobile-hide {\n    display: none; }\n  .vloc-mobile-show {\n    display: block; }\n  .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin).vloc-ins-enrollment-skin .vloc-ins-selectable-item-enrollment-top .vloc-ins-selectable-item-enrollment-top-form-element {\n    padding-right: 7%; }\n  .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selected-product {\n    padding: 0 0.25rem;\n    margin-bottom: 0.5rem;\n    line-height: 1.4; }\n    .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selected-product .vloc-ins-selected-product-strong {\n      font-weight: bold; }\n  .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-pagination-container {\n    margin-bottom: 0.75rem; }\n    .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-pagination-container .slds-button {\n      padding: 0; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-pagination-container .slds-button .slds-button__icon {\n        margin: 0; }\n    .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-pagination-container .vloc-mobile-page-count {\n      line-height: 2rem; }\n  .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item.vloc-ins-one-product .vloc-ins-selectable-item-inner-wrapper {\n    max-width: 100%; }\n  .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-inner-wrapper {\n    padding: 1rem 1rem 14.375rem 1rem; } }\n","%vlocity_namespace%__CustomJavascript__c":"var insPsCustomEventName = 'vloc-os-ins-product-selection-change-' + Math.round((new Date()).getTime() / 1000);\nvar insPsLoadedOnce;\nbaseCtrl.prototype.setSelectedProductSelectionProducts = function(control) {\n    var event = new CustomEvent(insPsCustomEventName, { 'detail': control.vlcSI[control.itemsKey] });\n    baseCtrl.prototype.$scope.currentElementName = control.name;\n    if (!baseCtrl.prototype.$scope.insPsControlRef) {\n        baseCtrl.prototype.$scope.insPsControlRef = {};\n    }\n    baseCtrl.prototype.$scope.insPsControlRef[baseCtrl.prototype.$scope.currentElementName] = control;\n    insPsLoadedOnce = true;\n    document.dispatchEvent(event);\n};\nvlocity.cardframework.registerModule.controller('insOsProductSelectionCtrl', ['$scope', '$rootScope', '$timeout', '$injector', function($scope, $rootScope, $timeout, $injector) {\n    'use strict';\n    var InsRulesEvaluationService;\n    var trackSetValueAttrs = {};\n    var foundCurrentStep = false; // used to track in waitForCurrentStep\n    var rulesWatchTracker = {\n        path: '',\n        correctElement: false\n    };\n    if (angular.element('script[src*=\"InsRules\"]').length) {\n        InsRulesEvaluationService = $injector.get('InsRulesEvaluationService');\n    }\n    $scope.enrollmentFlow = false;\n    $scope.currencyCode = '$';\n    if (baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol) {\n        $scope.currencyCode = baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol;\n    }\n    $scope.currentProducts = [];\n    $scope.allProducts = [];\n    $scope.selectedProduct = null;\n    $scope.completedProductAnalysis = false;\n    $scope.limitValues = {};\n\n    //*** CUSTOMIZABLE VARIABLES ***//\n    $scope.usePagination = true; // Turn on/off pagination (will automatically be turned off if enrollmentFlow)\n    $scope.pageSize = 2; // Customize pagination page size (cannot be 0, must be an integer) (not applicable for enrollmentFlow)\n    if (/Mobi/.test(navigator.userAgent)) {\n        $scope.pageSize = 1;\n    }\n\n    //*** START LOGIC ***//\n    // Listening for a new product selection if the user goes previous and selects a new product\n    function listenForMainEvent(e) {\n        var selectableItemRemoteClass = baseCtrl.prototype.$scope.bpTree.children[baseCtrl.prototype.$scope.insPsControlRef\n        [baseCtrl.prototype.$scope.currentElementName].rootIndex - 1].propSetMap.remoteClass; // var represents OS selectable item remote class value for now\n        $rootScope.attributeUserValues = {};\n        document.removeEventListener(insPsCustomEventName, listenForMainEvent);\n        insPsCustomEventName = 'vloc-os-ins-product-selection-change-' + Math.round((new Date()).getTime() / 1000);\n        document.addEventListener(insPsCustomEventName, listenForMainEvent);\n        if (selectableItemRemoteClass === 'EnrollmentHandler') {\n            $scope.enrollmentFlow = true;\n        }\n        if ($scope.enrollmentFlow) {\n            $scope.usePagination = false;\n        }\n        $scope.insPsInit(e.detail);\n\n        /**\n         * This watcher is used to catch the changes the underlying insRules parser is making.\n         *\n         * The comparison inside the watch is making sure we have a newValue and that we're on the\n         * correct OS element (the one with this template).\n         * The reason for this is because when this product selection template and the OS config template\n         * are used in the same omniscript, this product selection JS is still able to execute and we don't\n         * want it to unless we're actually on this template's OS element.\n         */\n        $rootScope.$watch('attributeUserValues', function(newValue, oldValue) {\n            var keysLength = 0;\n            var productSelectionActive = false;\n            decideCorrectElement(function(result) {\n                rulesWatchTracker = result;\n                if (newValue && rulesWatchTracker.correctElement) {\n                    delete newValue.undefined;\n                    keysLength = Object.keys(newValue).length;\n                    $timeout(function() {\n                        getParentAttributes($scope.initProducts);\n                    });\n                }\n            }, true);\n        }, true);\n    }\n    if (!insPsLoadedOnce) {\n        document.addEventListener(insPsCustomEventName, listenForMainEvent);\n    } else {\n        insPsCustomEventName = 'vloc-os-ins-product-selection-change-' + Math.round((new Date()).getTime() / 1000);\n        document.addEventListener(insPsCustomEventName, listenForMainEvent);\n    }\n\n    // If in enrollment, and someone selects a plan from the compare modal, we need to listen\n    // to this event\n    document.addEventListener('vloc-ins-os-product-details-compare-modal-select-product', function(e) {\n        var product = null;\n        if (e.detail && e.detail.ProductCode) {\n            angular.forEach($scope.currentProducts, function(currentProduct) {\n                if (currentProduct.ProductCode === e.detail.ProductCode) {\n                    product = currentProduct;\n                }\n            });\n            if (product) {\n                $scope.addSelectedProduct(undefined, baseCtrl.prototype.$scope.insPsControlRef[baseCtrl.prototype.$scope.currentElementName], product);\n            }\n        }\n    });\n\n    document.addEventListener('vloc-ins-attribute-rule-set-value', function(e) {\n        var evtProductCode = e.detail.ProductCode;\n        var evtAttribute = e.detail.attribute;\n        if (!trackSetValueAttrs[evtProductCode]) {\n            trackSetValueAttrs[evtProductCode] = [];\n        }\n        if (trackSetValueAttrs[evtProductCode].indexOf(evtAttribute.code) > -1) {\n            return;\n        } else {\n            if (evtAttribute.ruleSetValue) {\n                trackSetValueAttrs[evtProductCode].push(evtAttribute.code);\n                if (evtAttribute.labelAndValue) {\n                    doSelectionProductLoop($scope.initProducts);\n                } else {\n                    getParentAttributes($scope.initProducts);\n                }\n            }\n        }\n    });\n\n    document.addEventListener('vloc-ins-attribute-rule-hide-value', function(e) {\n        var evtProductCode = e.detail.ProductCode;\n        var evtAttribute = e.detail.attribute;\n        var labelAndValue;\n        if (!evtAttribute.alreadyLoopedForHideValue) {\n            angular.forEach(evtAttribute.values, function(value, evtAttributeIterator) {\n                if (value.hiddenByRule) {\n                    labelAndValue = $scope.getAttributeData(evtAttribute);\n                    if (!evtAttribute.labelAndValue) {\n                        evtAttribute.labelAndValue = {};\n                    }\n                    evtAttribute.labelAndValue.valueHiddenByRule = labelAndValue.valueHiddenByRule;\n                    evtAttributeIterator = evtAttribute.values.length;\n                    if (evtAttribute.labelAndValue.valueHiddenByRule) {\n                        evtAttribute.alreadyLoopedForHideValue = true;\n                    }\n                }\n            });\n        }\n    });\n\n    document.addEventListener('vloc-ins-attribute-rule-hide', function(e) {\n        var evtProductCode = e.detail.ProductCode;\n        var evtAttribute = e.detail.attribute;\n        if ($scope.parentAttrs[evtProductCode]) {\n            angular.forEach($scope.parentAttrs[evtProductCode], function(parentAttr) {\n                if (parentAttr.code === evtAttribute.code) {\n                    parentAttr.hiddenByRule = evtAttribute.hiddenByRule;\n                }\n            });\n        }\n    });\n\n    // Gets the attributes from the parent product to print below the name and above the coverages:\n    function getParentAttributes(products) {\n        var i, j, k, l, product, attrCats, prodAttrs, dummyObj, values, labelAndValue;\n        $scope.parentAttrs = {};\n        for (i = 0; i < products.length; i++) {\n            product = products[i];\n            if (!product.dummyProduct && product.attributeCategories && product.attributeCategories.records) {\n                attrCats = product.attributeCategories.records;\n                for (j = 0; j < attrCats.length; j++) {\n                    if (attrCats[j].productAttributes && attrCats[j].productAttributes.records) {\n                        prodAttrs = attrCats[j].productAttributes.records;\n                        for (k = 0; k < prodAttrs.length; k++) {\n                            if (!$scope.parentAttrs[product.ProductCode]) {\n                                $scope.parentAttrs[product.ProductCode] = [];\n                            }\n                            labelAndValue = $scope.getAttributeData(prodAttrs[k]);\n                            dummyObj = {};\n                            dummyObj.label = labelAndValue.label;\n                            dummyObj.dataType = prodAttrs[k].dataType;\n                            dummyObj.code = prodAttrs[k].code;\n                            dummyObj.inputType = prodAttrs[k].inputType;\n                            dummyObj.valueLabel = labelAndValue.valueLabel;\n                            dummyObj.valueHiddenByRule = labelAndValue.valueHiddenByRule;\n                            dummyObj.attributeDisplaySequence = prodAttrs[k].displaySequence;\n                            dummyObj.categoryDisplaySequence = attrCats[j].displaySequence;\n                            dummyObj.categoryCode = attrCats[j].Code__c || attrCats[j][baseCtrl.prototype.$scope.nsPrefix + 'Code__c'];\n                            dummyObj.hiddenByRule = prodAttrs[k].hiddenByRule;\n                            dummyObj.hidden = prodAttrs[k].hidden;\n                            // If the attribute is customizable and there are values defined,\n                            // we need to grab the label from the values that has a value equal\n                            // to the userValues and use that.\n                            values = prodAttrs[k].values;\n                            if (values && values.length && !prodAttrs[k].readonly) {\n                                for (l = 0; l < values.length; l++) {\n                                    if (values[l].value === prodAttrs[k].userValues) {\n                                        dummyObj.valueLabel = values[l].label;\n                                    }\n                                }\n                            }\n                            $scope.parentAttrs[product.ProductCode].push(dummyObj);\n                        }\n                    }\n                }\n                // Sort by category displaySequence first, then by attribute displaySequence, then by label\n                $scope.parentAttrs[product.ProductCode] = $scope.parentAttrs[product.ProductCode].sort(function(x, y) {\n                    if (x.categoryDisplaySequence === y.categoryDisplaySequence) {\n                        if (x.attributeDisplaySequence < y.attributeDisplaySequence) {\n                            return -1;\n                        } else {\n                            return 1;\n                        }\n                    } else if (x.categoryDisplaySequence < y.categoryDisplaySequence) {\n                        return -1;\n                    } else if (x.categoryDisplaySequence > y.categoryDisplaySequence) {\n                        return 1;\n                    } else {\n                        if (x.label < y.label) {\n                            return -1;\n                        } else {\n                            return 1;\n                        }\n                    }\n                });\n                if ($scope.enrollmentFlow) {\n                    $scope.parentAttrs[product.ProductCode].splice(3, $scope.parentAttrs[product.ProductCode].length - 3);\n                }\n            }\n        }\n        console.log('$scope.parentAttrs', $scope.parentAttrs);\n    }\n\n    function doSelectionProductLoop(products, initLoop) {\n        console.log('products', products);\n        angular.forEach(products, function(product, i) {\n            var foundFirstOptional = false;\n            if (product.childProducts && product.childProducts.records && product.childProducts.records.length) {\n                product.childProducts.records.sort(function(x, y) {\n                    if (x.RecordTypeName__c !== 'CoverageSpec') {\n                        return 1;\n                    } else {\n                        if (x.isSelected === y.isSelected) {\n                            if (x.displaySequence === y.displaySequence) {\n                                if (x.Name < y.Name) {\n                                    return -1;\n                                } else {\n                                    return 1;\n                                }\n                            } else if (x.displaySequence < y.displaySequence) {\n                                return -1;\n                            } else {\n                                return 1;\n                            }\n                        } else if (x.isSelected < y.isSelected) {\n                            return 1;\n                        } else {\n                            return -1;\n                        }\n                    }\n                });\n\n                angular.forEach(product.childProducts.records, function(childProduct, j) {\n                    var cpIdx = 0;\n                    $scope.getLimitValue(childProduct);\n                    if (initLoop && (i === $scope.initProducts.length - 1) && (j === product.childProducts.records.length - 1)) {\n                        $scope.completedProductAnalysis = true;\n                    }\n                    // Add data so we know where coverages end and optional coverages start:\n                    if (childProduct.isOptional) {\n                        childProduct.isOriginalOptional = true;\n\n                        if (childProduct.isSelected) {\n                            childProduct.isAddedOptional = true;\n                        }\n                    }\n                    if (childProduct.isOptional && !childProduct.isSelected && !foundFirstOptional) {\n                        childProduct.firstOptional = true;\n                        if (j === 0) {\n                            cpIdx = 0;\n                        } else {\n                            cpIdx = j - 1;\n                        }\n                        product.childProducts.records[cpIdx].lastNonOptional = true;\n                        foundFirstOptional = true;\n                    } else if (childProduct.isSelected && !foundFirstOptional && j + 1 === product.childProducts.records.length) {\n                        childProduct.lastNonOptional = true;\n                    }\n                });\n                console.log('$scope.limitValues', $scope.limitValues);\n            }\n        });\n    }\n\n    function formatDate(date, isDatetime) {\n        var dateObj, formattedDate;\n        if (date) {\n            dateObj = new Date(date);\n            if (isDatetime) {\n                formattedDate = dateObj.toLocaleString();\n            } else {\n                formattedDate = dateObj.toLocaleDateString();\n            }\n        }\n        return formattedDate;\n    }\n\n    /**\n     * Helper method for repeatable code, called in decideCorrectElement\n     * @param {Object} currentStepChild\n     * @param {Number} currentStepChildIdx\n     */\n    function decideCorrectElementHelper(currentStepChild, currentStepChildIdx) {\n        var returnObj = {\n            correctElement: false,\n            path: ''\n        };\n        angular.forEach(currentStepChild.eleArray, function(osElement, idx) {\n            if (osElement && osElement.type === 'Selectable Items' && osElement.children && !osElement.children.length && osElement.propSetMap && !osElement.propSetMap.remoteClass && !osElement.propSetMap.remoteMethod) {\n                returnObj.path = 'currentStep.children[' + currentStepChildIdx + '].eleArray[' + idx + ']';\n                returnObj.correctElement = true;\n                return returnObj;\n            }\n        });\n        return returnObj;\n    }\n\n    // OS asIndex is null until the step is instantiated which isn't immediate\n    function waitForCurrentStep(callback) {\n        $timeout(function() {\n            var currentStep = baseCtrl.prototype.$scope.bpTree.children[baseCtrl.prototype.$scope.bpTree.asIndex];\n            if (!foundCurrentStep) { // this is set to true in the else block below. it gets set back to false in decideCorrectElement\n                if (!currentStep) {\n                    waitForCurrentStep(callback);\n                } else {\n                    foundCurrentStep = true;\n                    decideCorrectElement(callback);\n                }\n            }\n        }, 100);\n    }\n\n    /**\n     * Callback is called once we have a decision. We may have to wait for the baseCtrl.prototype.$scope.bpTree.asIndex\n     * as it is null at times when proceding a step\n     * @param {Function} callback\n     * @param {Boolean} initial\n     */\n    function decideCorrectElement(callback, initial) {\n        var currentStep = baseCtrl.prototype.$scope.bpTree.children[baseCtrl.prototype.$scope.bpTree.asIndex];\n        var returnObj = {};\n        var osElement;\n        if (initial) {\n            foundCurrentStep = false;\n        }\n        if (!currentStep) {\n            waitForCurrentStep(callback);\n        } else {\n            if (!rulesWatchTracker.path) {\n                angular.forEach(currentStep.children, function(currentStepChild, idx) {\n                    returnObj = decideCorrectElementHelper(currentStepChild, idx);\n                });\n            } else {\n                osElement = eval(rulesWatchTracker.path);\n                if (osElement && osElement.type === 'Selectable Items' && osElement.children && !osElement.children.length && osElement.propSetMap && !osElement.propSetMap.remoteClass && !osElement.propSetMap.remoteMethod) {\n                    returnObj.correctElement = true;\n                } else {\n                    returnObj.correctElement = false;\n                    angular.forEach(currentStep.children, function(currentStepChild, idx) {\n                        returnObj = decideCorrectElementHelper(currentStepChild, idx);\n                    });\n                }\n            }\n            return callback(returnObj);\n        }\n    }\n\n    // When the template is loaded, we need to parse the products that get returned:\n    $scope.insPsInit = function(products) {\n        var i;\n        var dummmyProductsNeeded = products.length % $scope.pageSize ? products.length % $scope.pageSize : 0;\n        var dummyProducts = [];\n        $scope.parentAttrs = {};\n        $scope.enrollmentRateBands = {\n            productRateBands: {},\n            selectValues: [],\n            selectValuesLabelList: [],\n            chosen: ''\n        };\n        $scope.comparePlans = {\n            plansInCompare: [],\n            showBtn: false\n        };\n        if ($scope.usePagination && $scope.pageSize < products.length && dummmyProductsNeeded) {\n            dummyProducts = Array.apply(null, Array(dummmyProductsNeeded)).map(function() { return { dummyProduct: true }; });\n            products = products.concat(dummyProducts);\n        }\n        for (i = 0; i < products.length; i++) {\n            products[i].vlcCompSelected = false;\n            products[i].originalIndex = i;\n            // Manually generating our own $$hashKey because Omniscript uses it as a comparison\n            // and Angular removes it in an ng-repeat that uses 'track by' and we need both.\n            products[i].$$hashKey = 'ins-custom-' + i;\n            // Collect Rate Band information if we're in an enrollmentFlow:\n            if ($scope.enrollmentFlow && products[i].RateBandTierPriceData) {\n                $scope.enrollmentRateBands.productRateBands[products[i].ProductCode] = products[i].RateBandTierPriceData;\n            }\n            if (baseCtrl.prototype.$scope.insPsSelectedRateBand) {\n                products[i].selectedRateBand = baseCtrl.prototype.$scope.insPsSelectedRateBand;\n            }\n        }\n        if (!$scope.enrollmentRateBands.selectValues.length) {\n            angular.forEach($scope.enrollmentRateBands.productRateBands, function(value, key) {\n                angular.forEach(value, function(value2, key2) {\n                    if ($scope.enrollmentRateBands.selectValuesLabelList.indexOf(key2) < 0) {\n                        $scope.enrollmentRateBands.selectValuesLabelList.push(key2);\n                        $scope.enrollmentRateBands.selectValues.push({\n                            label: value2.Label,\n                            value: key2,\n                            sequence: value2.Sequence\n                        });\n                    }\n                });\n            });\n            $scope.enrollmentRateBands.selectValues.sort(function(x, y) {\n                if (x.sequence === y.sequence) {\n                    if (x.label < y.label) {\n                        return -1;\n                    } else {\n                        return 1;\n                    }\n                } else if (x.sequence < y.sequence) {\n                    return -1;\n                } else {\n                    return 1;\n                }\n            });\n            if ($scope.enrollmentRateBands.selectValues.length) {\n                $scope.enrollmentRateBands.chosen = $scope.enrollmentRateBands.selectValues[0].value;\n            }\n        }\n        console.log('$scope.enrollmentRateBands', $scope.enrollmentRateBands);\n        $scope.initProducts = products;\n        doSelectionProductLoop($scope.initProducts, true);\n        if (!InsRulesEvaluationService) {\n            getParentAttributes($scope.initProducts);\n        }\n        if ($scope.usePagination) {\n            $scope.allProducts = products;\n            $scope.currentProducts = $scope.allProducts.slice(0, $scope.pageSize);\n        } else {\n            $scope.pageSize = products.length;\n            $scope.currentProducts = products;\n        }\n        if ($scope.enrollmentRateBands.selectValues.length) {\n            $scope.changeRateBand();\n        }\n    };\n\n    // Gets called when clicking next/previous directional buttons at top\n    $scope.paginateItems = function(direction) {\n        var startIndex = 0;\n        var currentProducts = $scope.currentProducts;\n        if (direction === 'next') {\n            startIndex = currentProducts[currentProducts.length - 1].originalIndex + 1;\n        } else if (direction === 'prev') {\n            startIndex = currentProducts[0].originalIndex - $scope.pageSize;\n            if (startIndex < 0) {\n                startIndex = 0;\n            }\n        }\n        $scope.currentProducts = $scope.allProducts.slice(startIndex, startIndex + $scope.pageSize);\n    };\n\n    // Decides whether the directional button should be active or disabled based on\n    // the location we're at in the whole set of products.\n    $scope.showPageControl = function(direction) {\n        var i;\n        var show = false;\n        var amountToSubtract = ($scope.allProducts.length % 2) + 1; // adding 1 for dummyProduct\n        var lastIndex = $scope.allProducts.length - amountToSubtract;\n        var lastIndexExists = [];\n        if (direction === 'next') {\n            if ($scope.currentProducts.length === 1 && $scope.pageSize > 1) {\n                show = false;\n            } else {\n                for (i = 0; i < $scope.currentProducts.length; i++) {\n                    if ($scope.currentProducts[i].originalIndex === lastIndex) {\n                        lastIndexExists.push('yes');\n                    } else {\n                        lastIndexExists.push('no');\n                    }\n                }\n                if (lastIndexExists.indexOf('yes') > -1) {\n                    show = false;\n                } else {\n                    show = true;\n                }\n            }\n        } else if (direction === 'prev') {\n            if ($scope.currentProducts[0].originalIndex > 0) {\n                show = true;\n            } else {\n                show = false;\n            }\n        }\n        return show;\n    };\n\n    // Keeps track of the selected product locally so we can print at the top when paginating.\n    $scope.addSelectedProduct = function(e, control, product) {\n        if (e && e.target.className.indexOf('vloc-ins-selectable-item-compare-checkbox') > -1) {\n            e.stopPropagation();\n            return;\n        } else {\n            baseCtrl.prototype.$scope.onSelectItem(control, control.vlcSI[control.itemsKey][product.originalIndex], product.originalIndex, this, true);\n            if ($scope.selectedProduct && $scope.selectedProduct.Id === product.Id) {\n                $scope.selectedProduct = null;\n            } else {\n                $scope.selectedProduct = {\n                    Name: product.Name,\n                    Id: product.Id\n                };\n            }\n        }\n    };\n\n    // Assumes an attribute code with 'limit' in the string is the main Limit value of the coverage:\n    $scope.getLimitValue = function(child) {\n        var i, j, k, attrCats, prodAttrs, values;\n        if (child.attributeCategories && child.attributeCategories.records) {\n            attrCats = child.attributeCategories.records;\n            if (!(child.pciId in $scope.limitValues)) {\n                $scope.limitValues[child.pciId] = {};\n            }\n            for (i = 0; i < attrCats.length; i++) {\n                prodAttrs = attrCats[i].productAttributes.records;\n                if (prodAttrs && prodAttrs.length) {\n                    for (j = 0; j < prodAttrs.length; j++) {\n                        if (prodAttrs[j].inputType !== 'equalizer' && prodAttrs[j].code.toLowerCase().indexOf('limit') > -1) {\n                            values = prodAttrs[j].values;\n                            $scope.limitValues[child.pciId]= prodAttrs[j];\n                            if (values && values.length) {\n                                for (k = 0; k < values.length; k++) {\n                                    if (values[k].value === prodAttrs[j].userValues) {\n                                        if($scope.limitValues[child.pciId].dataType === 'text'){\n                                            $scope.limitValues[child.pciId].value = values[k].label;\n                                        }\n                                        $scope.limitValues[child.pciId].valueHiddenByRule = values[k].hiddenByRule;\n                                    }\n                                }\n                            }\n                        } else {\n                            $scope.limitValues[child.pciId].value = '';\n                        }\n                    }\n                }\n            }\n        }\n    };\n\n    // Grabs the rest of the attributes if there are more than just the limit.\n    $scope.getAttributeData = function(attribute) {\n        var attrData = {};\n        var i, j, key, k, l;\n        if (attribute.values && attribute.values[0].label && attribute.userValues && attribute.userValues.constructor !== Array) {\n            for (i = 0; i < attribute.values.length; i++) {\n                if (attribute.values[i].value === attribute.userValues) {\n                    attrData.label = attribute.label;\n                    attrData.valueLabel = attribute.values[i].label;\n                    attrData.valueHiddenByRule = attribute.values[i].hiddenByRule;\n                }\n            }\n        } else if (attribute.values && attribute.values[0].label && attribute.userValues && attribute.userValues.constructor === Array) {\n            for (j = 0; j < attribute.userValues.length; j++) {\n                if (attribute.userValues[j].constructor === Object && !angular.equals(attribute.userValues[j], {})) {\n                    for (key in attribute.userValues[j]) {\n                        if (attribute.userValues[j][key]) {\n                            for (k = 0; k < attribute.values.length; k++) {\n                                if (attribute.values[k].value == key) {\n                                    attrData.label = attribute.label;\n                                    attrData.valueHiddenByRule = attribute.values[k].hiddenByRule;\n                                    if (!attribute.values[k].hiddenByRule) {\n                                        if (!attrData.valueLabel) {\n                                            attrData.valueLabel = attribute.values[k].label;\n                                        } else {\n                                            attrData.valueLabel = attrData.valueLabel + ', ' + attribute.values[k].label;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    attrData.label = attribute.label;\n                    for (l = 0; l < attribute.values.length; l++) {\n                        attrData.valueHiddenByRule = attribute.values[l].hiddenByRule;\n                        if (attribute.userValues[j] == attribute.values[l].value && !attribute.values[l].hiddenByRule) {\n                            if (!attrData.valueLabel) {\n                                attrData.valueLabel = attribute.values[l].label;\n                            } else {\n                                attrData.valueLabel = attrData.valueLabel + ', ' + attribute.values[l].label;\n                            }\n                        }\n                    }\n                }\n            }\n        } else {\n            attrData.label = attribute.label;\n            attrData.valueLabel = attribute.userValues;\n            if (attribute.dataType === 'date') {\n                attrData.valueLabel = formatDate(attribute.userValues);\n            } else if (attribute.dataType === 'datetime') {\n                attrData.valueLabel = formatDate(attribute.userValues, true);\n            }\n        }\n        // console.log('attrData', attrData);\n        return attrData;\n    };\n\n    $scope.getSelectableItemClass = function(product, index) {\n        var htmlClass = 'slds-size--1-of-' + $scope.pageSize +\n                        ' nds-size--1-of-' + $scope.pageSize +\n                        ' slds-large-size--1-of-' + $scope.pageSize +\n                        ' nds-large-size--1-of-' + $scope.pageSize +\n                        ' slds-medium-size--1-of-' + Math.round(parseFloat($scope.pageSize / 2)) +\n                        ' nds-medium-size--1-of-' + Math.round(parseFloat($scope.pageSize / 2)) +\n                        ' slds-small-size--1-of-1 slds-max-small-size--1-of-1 nds-small-size--1-of-1 nds-max-small-size--1-of-1';\n        if (product.dummyProduct) {\n            htmlClass += ' slds-hidden nds-hidden';\n        }\n        if ($scope.currentProducts.length === 1) {\n            htmlClass += ' vloc-ins-one-product';\n        }\n        if (product.similarToLastYear) {\n            htmlClass += ' vloc-ins-has-similar-flag';\n        }\n        if (product.disabledByRateBand) {\n            htmlClass += ' disabled-by-rate-band';\n        }\n        return htmlClass;\n    };\n\n    $scope.getParentAttributeClass = function(attribute, index) {\n        var htmlClass = 'vloc-ins-parent-attr-regular';\n        if (attribute.categoryCode.toLowerCase().indexOf('benefit') > -1) {\n            if (attribute.dataType !== 'currency' && typeof attribute.valueLabel === 'boolean') {\n                htmlClass = 'vloc-ins-parent-attr-non-regular vloc-ins-parent-attr-boolean';\n            } else if (attribute.dataType === 'currency') {\n                htmlClass = 'vloc-ins-parent-attr-non-regular vloc-ins-parent-attr-currency';\n            }\n        }\n        if (index > 0) {\n            htmlClass += ' vloc-ins-hide-on-small-screens vloc-ins-hide-on-large-screens';\n        } else if (index > -1) {\n            htmlClass += ' vloc-ins-hide-on-small-screens'\n        }\n        return htmlClass;\n    };\n\n    $scope.checkAttrValueLabel = function(attribute) {\n        var returnObj = {\n            showRegular: true,\n            showCheck: false,\n            showX: false\n        };\n        if (typeof attribute.valueLabel === 'boolean' && !$scope.enrollmentFlow) {\n            if (attribute.valueLabel) {\n                returnObj = {\n                    showRegular: false,\n                    showCheck: true,\n                    showX: false\n                };\n            } else {\n                returnObj = {\n                    showRegular: false,\n                    showCheck: false,\n                    showX: true\n                };\n            }\n        }\n        return returnObj;\n    };\n\n    $scope.changeRateBand = function() {\n        angular.forEach($scope.currentProducts, function(product) {\n            var chosenBand = null;\n            product.selectedRateBand = $scope.enrollmentRateBands.chosen;\n            baseCtrl.prototype.$scope.insPsSelectedRateBand = $scope.enrollmentRateBands.chosen;\n            if (product.ProductCode && $scope.enrollmentFlow && product.RateBandTierPriceData && $scope.enrollmentRateBands.chosen) {\n                chosenBand = $scope.enrollmentRateBands.productRateBands[product.ProductCode][$scope.enrollmentRateBands.chosen];\n                if (chosenBand && chosenBand.Price) {\n                    product.Price = chosenBand.Price;\n                    product.disabledByRateBand = false;\n                } else {\n                    product.disabledByRateBand = true;\n\n                    if (product.vlcSelected) {\n                        $scope.addSelectedProduct(undefined, baseCtrl.prototype.$scope.insPsControlRef[baseCtrl.prototype.$scope.currentElementName], product);\n                    }\n                }\n            }\n        });\n        console.log('currentProducts', $scope.currentProducts);\n    };\n\n    $scope.viewPlanDetails = function(e, scp, control, product) {\n        var isCompSelected = false;\n        e.stopPropagation();\n        angular.forEach($scope.currentProducts, function(currentProduct) {\n            if (currentProduct.Id !== product.Id && currentProduct.vlcCompSelected) {\n                currentProduct.vlcCompWasSelected = true;\n                currentProduct.vlcCompSelected = false;\n            }\n        });\n        if (product.vlcCompSelected) {\n            isCompSelected = true;\n        } else {\n            product.vlcCompSelected = true;\n        }\n        baseCtrl.prototype.$scope.openModal(scp, control);\n        $timeout(function() {\n            if (!isCompSelected) {\n                product.vlcCompSelected = false;\n                $scope.$apply();\n            }\n            angular.forEach($scope.currentProducts, function(currentProduct) {\n                if (currentProduct.Id !== product.Id && currentProduct.vlcCompWasSelected) {\n                    delete currentProduct.vlcCompWasSelected;\n                    currentProduct.vlcCompSelected = true;\n                }\n            });\n        }, 250);\n    };\n\n    $scope.trackCompareChecks = function(product) {\n        var plansInCompareIndex = -1;\n        if ($scope.comparePlans.plansInCompare.length) {\n            plansInCompareIndex = $scope.comparePlans.plansInCompare.indexOf(product.Id);\n            if (plansInCompareIndex > -1) {\n                $scope.comparePlans.plansInCompare.splice(plansInCompareIndex, 1);\n            } else {\n                $scope.comparePlans.plansInCompare.push(product.Id);\n            }\n        } else {\n            $scope.comparePlans.plansInCompare.push(product.Id);\n        }\n        if ($scope.comparePlans.plansInCompare.length > 1) {\n            $scope.comparePlans.showBtn = true;\n        } else {\n            $scope.comparePlans.showBtn = false;\n        }\n    };\n\n    $scope.insPsOpenModal = function(scp, control) {\n        baseCtrl.prototype.$scope.currentElementName = control.name;\n        baseCtrl.prototype.$scope.openModal(scp, control);\n    };\n}]);","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-product-selection/4/Vlocity/1520548076826","%vlocity_namespace%__HTML__c":"<div class=\"vloc-ins-selectable-item-outer-container\" ng-if=\"control.vlcSI[control.itemsKey]\">\n    <div ng-if=\"!control.vlcSI[control.itemsKey][0].$$hashKey || (!baseCtrl.$scope.insPsControlRef || !baseCtrl.$scope.insPsControlRef[control.name])\" ng-init=\"baseCtrl.setSelectedProductSelectionProducts(control)\"></div>\n    <div class=\"vloc-ins-selectable-item-container\" ng-controller=\"insOsProductSelectionCtrl\" ng-class=\"{'vloc-ins-enrollment-skin': enrollmentFlow}\">\n        <p class=\"slds-size--1-of-1 slds-text-align--center nds-size--1-of-1 nds-text-align--center vloc-ins-selected-product vloc-mobile-show\" ng-if=\"selectedProduct && !enrollmentFlow\">\n            (Selected: <span class=\"vloc-ins-selected-product-strong\">{{selectedProduct.Name}}</span>)\n        </p>\n        <div class=\"slds-box slds-grid slds-theme--shade slds-m-bottom--medium nds-box nds-grid nds-theme--shade nds-m-bottom--medium vloc-ins-selectable-item-pagination-container\" ng-if=\"currentProducts.length && (pageSize < control.vlcSI[control.itemsKey].length) && usePagination\">\n            <button class=\"slds-button slds-button--neutral slds-max-small-size--1-of-3 slds-size--1-of-8 nds-button nds-button--neutral nds-max-small-size--1-of-3 nds-size--1-of-8\" ng-disabled=\"!showPageControl('prev')\" ng-click=\"paginateItems('prev')\" title=\"Previous {{pageSize}} Products\">\n                <slds-button-svg-icon size=\"'small'\" sprite=\"'utility'\" icon=\"'back'\" extra-classes=\"'slds-button__icon--left nds-button__icon--left'\"></slds-button-svg-icon>\n            </button>\n            <p class=\"slds-text-align--center slds-max-small-size--1-of-3 nds-text-align--center nds-max-small-size--1-of-3 vloc-mobile-show vloc-mobile-page-count\">{{currentProducts[0].originalIndex + 1}} of {{control.vlcSI[control.itemsKey].length}}</p>\n            <p class=\"slds-size--6-of-8 slds-text-align--center nds-size--6-of-8 nds-text-align--center vloc-ins-selected-product vloc-mobile-hide\">\n                <span class=\"slds-m-right--small nds-m-right--small\"><span class=\"vloc-ins-selected-product-strong\">{{control.vlcSI[control.itemsKey].length}}</span> Total Products</span>\n                <span ng-if=\"selectedProduct\">(Selected: <span class=\"vloc-ins-selected-product-strong\">{{selectedProduct.Name}})</span></span>\n            </p>\n            <button class=\"slds-button slds-button--neutral slds-max-small-size--1-of-3 slds-size--1-of-8 nds-button nds-button--neutral nds-max-small-size--1-of-3 nds-size--1-of-8\" ng-disabled=\"!showPageControl('next')\" ng-click=\"paginateItems('next')\" title=\"Next Products\">\n                <slds-button-svg-icon size=\"'small'\" sprite=\"'utility'\" icon=\"'forward'\" extra-classes=\"'slds-button__icon--right nds-button__icon--right'\"></slds-button-svg-icon>\n            </button>\n        </div>\n        <div class=\"slds-text-align--center slds-p-bottom--small nds-text-align--center nds-p-bottom--small vloc-ins-selectable-item-enrollment-top\" ng-if=\"enrollmentFlow\">\n            <div class=\"slds-grid slds-m-bottom--small nds-grid nds-m-bottom--small\" ng-if=\"enrollmentRateBands.selectValues.length\">\n                <label class=\"slds-size--1-of-2 slds-text-align--right slds-p-right--small nds-size--1-of-2 nds-text-align--right nds-p-right--small vloc-ins-selectable-item-enrollment-top-label\" for=\"include-coverage-select\">Include coverage for: </label>\n                <div class=\"slds-form-element slds-size--1-of-2 slds-p-right--large nds-form-element nds-size--1-of-2 nds-p-right--large vloc-ins-selectable-item-enrollment-top-form-element\">\n                    <div class=\"slds-form-element__control nds-form-element__control\">\n                        <div class=\"slds-select_container nds-select_container\">\n                            <select id=\"include-coverage-select\" class=\"slds-select nds-select\" ng-model=\"enrollmentRateBands.chosen\" ng-options=\"value.value as value.label for value in enrollmentRateBands.selectValues | orderBy: 'sequence'\" ng-change=\"changeRateBand()\"></select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"slds-grid nds-grid vloc-ins-selectable-item-inner-container\" ng-class=\"{'has-similar-flag': enrollmentFlow}\">\n            <div ng-class=\"getSelectableItemClass(product, $index)\" class=\"slds-col nds-col vloc-ins-selectable-item\" ng-click=\"addSelectedProduct($event, control, product)\" vloc-slds-added=\"{{control.vlcSI[control.itemsKey][product.originalIndex].vlcSelected}}\" vloc-slds-prod-desc=\"{{control.vlcSI[control.itemsKey][product.originalIndex].Description}}\" ng-repeat=\"product in currentProducts track by $index\" ins-rules-evaluate ins-rules-product=\"product\" ng-if=\"currentProducts.length\">\n                <div class=\"vloc-ins-selectable-item-inner-wrapper\">\n                    <div class=\"vloc-ins-selectable-item-selected\" ng-class=\"{'active': control.vlcSI[control.itemsKey][product.originalIndex].vlcSelected}\" ng-if=\"!enrollmentFlow\">\n                        <slds-svg-icon sprite=\"'utility'\" icon=\"'check'\" size=\"'small'\"></slds-svg-icon>\n                    </div>\n                    <div class=\"vloc-ins-selectable-item-similar-plan-container\" ng-if=\"product.similarToLastYear\">\n                        <div class=\"vloc-ins-selectable-item-similar-plan\">\n                            <span class=\"vloc-ins-selectable-item-similar-plan-label\">Similar to last year's plan</span>\n                            <div class=\"vloc-ins-selectable-item-similar-plan-triangle-pointing-down\"></div>\n                        </div>\n                    </div>\n                    <div class=\"vloc-ins-selectable-item-image\" ng-if=\"enrollmentFlow\" ng-class=\"{'is-custom-image': product.ImageId}\">\n                        <img ng-src=\"{{instanceHost + product.ImageId}}\" class=\"vloc-ins-selectable-custom-image\" ng-if=\"product.ImageId\" />\n                        <span class=\"slds-icon_container nds-icon_container vloc-ins-selectable-item-image-fallback\" ng-if=\"!product.ImageId\">\n                            <slds-svg-icon sprite=\"'custom'\" size=\"'large'\" icon=\"'custom91'\"></slds-svg-icon>\n                            <span class=\"slds-assistive-text nds-assistive-text\">Default Icon</span>\n                        </span>\n                    </div>\n                    <div class=\"vloc-ins-selectable-item-top\">\n                        <div class=\"vloc-ins-selectable-item-price\" ng-if=\"!enrollmentFlow\">{{product.Price | currency: currencyCode: 0}}</div>\n                        <h2 class=\"vloc-ins-selectable-item-name\">{{product.Name}}</h2>\n                        <h4 class=\"slds-truncate nds-truncate vloc-ins-selectable-item-description\" ng-if=\"enrollmentFlow\">{{product.Description}}</h4>\n                    </div>\n                    <div class=\"slds-clearfix nds-clearfix vloc-ins-selectable-item-middle\" ng-repeat=\"attribute in parentAttrs[product.ProductCode]\" ng-if=\"attribute.label && attribute.valueLabel !== null && attribute.valueLabel !== undefined && !attribute.hiddenByRule && attribute.inputType !== 'equalizer'\" ng-class=\"getParentAttributeClass(attribute, $index)\" ng-hide=\"attribute.hidden\">\n                        <span class=\"vloc-ins-selectable-item-parent-attribute-label\" ng-if=\"!enrollmentFlow\">{{attribute.label}}</span>\n                        <span class=\"vloc-ins-selectable-item-parent-attribute-value\" ng-if=\"checkAttrValueLabel(attribute).showRegular && attribute.dataType !== 'currency' && attribute.dataType !== 'percentage' && !attribute.valueHiddenByRule\">{{attribute.valueLabel}}</span>\n                        <span class=\"vloc-ins-selectable-item-parent-attribute-value\" ng-if=\"checkAttrValueLabel(attribute).showRegular && attribute.dataType === 'currency' && !attribute.valueHiddenByRule\">{{attribute.valueLabel | currency: currencyCode: 0}}</span>\n                        <span class=\"vloc-ins-selectable-item-parent-attribute-value\" ng-if=\"checkAttrValueLabel(attribute).showRegular && attribute.dataType === 'percentage' && !attribute.valueHiddenByRule\">{{attribute.valueLabel}}%</span>\n                        <span class=\"vloc-ins-selectable-item-parent-attribute-label\" ng-if=\"enrollmentFlow\">{{attribute.label}}</span>\n                        <span class=\"vloc-ins-selectable-item-parent-attribute-value vloc-ins-selectable-item-parent-attribute-value-icon\" ng-if=\"checkAttrValueLabel(attribute).showCheck && !attribute.valueHiddenByRule\">\n                            <slds-svg-icon sprite=\"'utility'\" icon=\"'check'\" size=\"'small'\"></slds-svg-icon>\n                        </span>\n                        <span class=\"vloc-ins-selectable-item-parent-attribute-value vloc-ins-selectable-item-parent-attribute-value-icon\" ng-if=\"checkAttrValueLabel(attribute).showX && !attribute.valueHiddenByRule\">\n                            <slds-svg-icon sprite=\"'utility'\" icon=\"'close'\" size=\"'small'\"></slds-svg-icon>\n                        </span>\n                    </div>\n                    <div class=\"vloc-ins-selectable-item-bottom\" ng-if=\"enrollmentFlow\" ng-class=\"{'disabled-by-rate-band': product.disabledByRateBand}\">\n                        <div class=\"vloc-ins-enrollment-price-container\" ng-hide=\"product.disabledByRateBand\">\n                            <span class=\"vloc-ins-enrollment-price-price\">{{product.Price | currency: currencyCode: 0}}<span class=\"vloc-ins-enrollment-price-period\">/mo</span></span>\n                            <span class=\"vloc-ins-enrollment-price-label\">You pay</span>\n                        </div>\n                        <div class=\"vloc-ins-enrollment-price-container\" ng-show=\"product.disabledByRateBand\">\n                            <span class=\"vloc-ins-enrollment-price-price\">--</span>\n                            <span class=\"vloc-ins-enrollment-price-label\">You pay</span>\n                        </div>\n                        <button class=\"vloc-ins-enrollment-select-plan-btn\"><span ng-if=\"!product.vlcSelected\">Select</span><span ng-if=\"product.vlcSelected\">Selected</span></button>\n                        <div class=\"slds-form-element slds-m-bottom--small nds-form-element nds-m-bottom--small vloc-ins-selectable-item-compare-container\" ng-if=\"currentProducts.length > 1\">\n                            <div class=\"slds-form-element__control nds-form-element__control\">\n                                <span class=\"slds-checkbox nds-checkbox\">\n                                    <input type=\"checkbox\" class=\"vloc-ins-selectable-item-compare-checkbox-input\" name=\"checkbox-{{product.Id}}\" id=\"checkbox-{{product.Id}}\" ng-model=\"product.vlcCompSelected\" ng-click=\"trackCompareChecks(product)\">\n                                    <label class=\"slds-checkbox__label nds-checkbox__label vloc-ins-selectable-item-compare-checkbox-label-container\" for=\"checkbox-{{product.Id}}\">\n                                        <span class=\"slds-checkbox--faux nds-checkbox--faux vloc-ins-selectable-item-compare-checkbox-faux\"></span>\n                                        <span class=\"slds-form-element__label nds-form-element__label vloc-ins-selectable-item-compare-checkbox-label\">Compare</span>\n                                    </label>\n                                </span>\n                            </div>\n                        </div>\n                        <a href=\"javascript:void(0)\" class=\"slds-truncate nds-truncate vloc-ins-enrollment-plan-details\" ng-click=\"viewPlanDetails($event, this, control, product)\">View full plan details</a>\n                    </div>\n                    <div class=\"slds-m-top--x-large nds-m-top--x-large vloc-ins-selectable-item-bottom\" ng-if=\"!enrollmentFlow\">\n                        <ul class=\"vloc-ins-selectable-item-coverages\">\n                            <li class=\"vloc-ins-selectable-item-coverage\" ng-repeat=\"child in product.childProducts.records track by $index\" ng-show=\"child.RecordTypeName__c === 'CoverageSpec' || child[baseCtrl.$scope.nsPrefix + 'RecordTypeName__c'] === 'CoverageSpec'\" ins-rules-evaluate ins-rules-product=\"child\">\n                                <div class=\"slds-m-bottom--small nds-m-bottom--small vloc-ins-selectable-item-optional-heading-container\" ng-if=\"child.firstOptional\">\n                                    <div class=\"slds-text-align--left nds-text-align--left vloc-ins-selectable-item-optional-heading\">\n                                        <div class=\"slds-text-heading--small nds-text-heading--small vloc-ins-selectable-item-optional-heading-text\">Optional</div>\n                                    </div>\n                                </div>\n                                <div class=\"slds-border--bottom slds-p-bottom--small slds-m-bottom--small nds-border--bottom nds-p-bottom--small nds-m-bottom--small vloc-ins-selectable-item-coverage-details\">\n                                    <div class=\"slds-clearfix nds-clearfix vloc-ins-selectable-item-coverage-details-wrapper\">\n                                        <span class=\"slds-float--left nds-float--left vloc-ins-selectable-item-coverage-details-limit-label\">{{child.Name}}</span>\n                                        <span class=\"slds-float--right nds-float--right vloc-ins-selectable-item-coverage-details-limit-value\" ng-init=\"getLimitValue(child)\" ng-if=\"!limitValues[child.pciId].hidden && !limitValues[child.pciId].hiddenByRule && !limitValues[child.pciId].valueHiddenByRule\" ins-rules-evaluate=\"limitValues[child.pciId]\">\n                                            <span ng-if=\"limitValues[child.pciId].dataType === 'currency'\">{{limitValues[child.pciId].userValues | currency: currencyCode: 0}}</span>\n                                            <span ng-if=\"limitValues[child.pciId].dataType === 'percent'\">{{limitValues[child.pciId].userValues}}%</span>\n                                            <span ng-if=\"limitValues[child.pciId].dataType !== 'currency' && limitValues[child.pciId].dataType !== 'percent'\">\n                                                <span ng-if=\"limitValues[child.pciId].labelAndValue\">{{limitValues[child.pciId].labelAndValue.valueLabel}}</span>\n                                                <span ng-if=\"!limitValues[child.pciId].labelAndValue\">{{limitValues[child.pciId].userValues}}</span>\n                                            </span>\n                                        </span>\n                                    </div>\n                                    <div class=\"vloc-ins-selectable-item-coverage-details-categories\" ng-repeat=\"category in child.attributeCategories.records\">\n                                        <div ng-repeat=\"attribute in category.productAttributes.records\" ng-init=\"attribute.labelAndValue = getAttributeData(attribute)\" ng-hide=\"attribute.hidden || attribute.inputType === 'equalizer'\">\n                                            <div class=\"slds-border--top slds-m-left--large slds-m-top--x-small slds-p-top--x-small slds-p-bottom--xxx-small slds-clearfix nds-border--top nds-m-left--large nds-m-top--x-small nds-p-top--x-small nds-p-bottom--xxx-small nds-clearfix vloc-ins-selectable-item-coverage-details-attributes\" ng-if=\"attribute.code.toLowerCase().indexOf('limit') < 0 && attribute.label && !attribute.hiddenByRule\" ins-rules-evaluate=\"attribute\">\n                                                <span class=\"slds-float--left nds-float--left vloc-ins-selectable-item-coverage-details-attributes-label\">{{attribute.labelAndValue.label}}</span>\n                                                <span class=\"slds-float--right nds-float--right vloc-ins-selectable-item-coverage-details-attributes-value\" ng-if=\"!attribute.labelAndValue.valueHiddenByRule\">\n                                                    <span ng-if=\"attribute.dataType === 'currency'\">{{attribute.labelAndValue.valueLabel | currency: currencyCode: 0}}</span>\n                                                    <span ng-if=\"attribute.dataType === 'percent'\">{{attribute.labelAndValue.value}}%</span>\n                                                    <span ng-if=\"attribute.dataType !== 'currency' && attribute.dataType !== 'percent'\">{{attribute.labelAndValue.valueLabel}}</span>\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"slds-text-align--center slds-p-top--medium nds-text-align--center nds-p-top--medium vloc-ins-selectable-item-enrollment-bottom\" ng-if=\"enrollmentFlow\">\n            <button class=\"slds-button slds-button--brand nds-button nds-button--brand vloc-ins-selectable-item-compare-btn\" ng-click=\"insPsOpenModal(this, control)\" ng-show=\"comparePlans.showBtn\">Compare Plans</button>\n        </div>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"// Variables:\n$royal-blue: #0070D2;\n$dark-navy: #19355E;\n$attr-label: #16325C;\n$slds-green: #04844b;\n$border-color: #d8dde6;\n$enrollment-text: #053a69;\n$enrollment-cards-border: #d7dde6;\n$enrollment-cards-bg: #f8fbfe;\n\n// Mixins:\n@mixin changeColor($newColor) {\n    cursor: pointer;\n    border-color: $newColor;\n    background-color: lighten($newColor, 72%);\n    .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image\n    .vloc-ins-selectable-item-similar-plan-container {\n        background-color: $newColor;\n\n        .vloc-ins-selectable-item-similar-plan {\n            .vloc-ins-selectable-item-similar-plan-triangle-pointing-down {\n                border-top-color: $newColor;\n            }\n        }\n    }\n\n    .vloc-ins-selectable-item-top {\n        .vloc-ins-selectable-item-price {\n            background-color: $newColor;\n        }\n        .vloc-ins-selectable-item-name {\n            color: darken($newColor, 25%);\n        }\n        .vloc-ins-selectable-item-description {\n            color: darken($newColor, 25%);\n        }\n    }\n\n    .vloc-ins-selectable-item-middle {\n        color: darken($newColor, 25%);\n\n        &.vloc-ins-parent-attr-non-regular {\n            .vloc-ins-selectable-item-parent-attribute-value {\n                color: $newColor;\n\n                .slds-icon {\n                    fill: $newColor;\n                }\n            }\n        }\n    }\n\n    .vloc-ins-selectable-item-bottom {\n        .vloc-ins-selectable-item-coverages {\n            .vloc-ins-selectable-item-coverage {\n                .vloc-ins-selectable-item-coverage-details {\n                    .vloc-ins-selectable-item-coverage-details-wrapper {\n                        .vloc-ins-selectable-item-coverage-details-limit-label {\n                            color: darken($newColor, 25%);\n                        }\n                        .vloc-ins-selectable-item-coverage-details-limit-value {\n                            color: $newColor;\n                        }\n                    }\n                    .vloc-ins-selectable-item-coverage-details-categories {\n                        .vloc-ins-selectable-item-coverage-details-attributes {\n                            .vloc-ins-selectable-item-coverage-details-attributes-value {\n                                color: $newColor;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        .vloc-ins-enrollment-price-container {\n            .vloc-ins-enrollment-price-price,\n            .vloc-ins-enrollment-price-label {\n                color: darken($newColor, 25%);\n            }\n        }\n        .vloc-ins-enrollment-select-plan-btn {\n            border-color: $newColor;\n            color: white;\n            // background-color: rgba($newColor, 0.6);\n            background-color: $newColor;\n        }\n        .vloc-ins-selectable-item-compare-container {\n            label.vloc-ins-selectable-item-compare-checkbox-label-container {\n                color: $newColor;\n\n                .vloc-ins-selectable-item-compare-checkbox-faux {\n                    border-color: $newColor;\n                }\n                .vloc-ins-selectable-item-compare-checkbox-label {\n                    color: $newColor;\n                }\n            }\n        }\n        .vloc-ins-enrollment-plan-details {\n            color: darken($newColor, 25%);\n        }\n    }\n}\n\n// Styles:\n.vloc-mobile-hide {\n    display: block;\n}\n.vloc-mobile-show {\n    display: none;\n}\n\n.via-slds {\n    &.via-omni {\n        .vlc-slds-selItem {\n            > .slds-form-element__control {\n                &:first-child {\n                    width: 100%;\n                }\n            }\n        }\n    }\n    .vloc-ins-selectable-item-outer-container {\n        width: 100%;\n    }\n    .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) {\n        width: 100%;\n\n        .vloc-ins-selectable-item-pagination-container {\n            background-color: transparent;\n            border: none;\n            padding: 0;\n\n            .vloc-ins-selected-product {\n                > span {\n                    line-height: 2rem;\n\n                    .vloc-ins-selected-product-strong {\n                        font-weight: 400;\n                    }\n                }\n            }\n        }\n\n        .vloc-ins-selectable-item-inner-container {\n            margin: 0 auto;\n\n            .vloc-ins-selectable-item {\n                display: flex;\n\n                .vloc-ins-selectable-item-inner-wrapper {\n                    position: relative;\n                    border: 1px solid $royal-blue;\n                    border-radius: 0.25rem;\n                    background-color: $enrollment-cards-bg;\n                    padding: 2.25rem 2rem;\n                    transition: border-color 150ms ease-in,\n                                background-color 150ms ease-in;\n                    margin: 0 0.5rem;\n                    width: 100%;\n                }\n\n                &:first-child {\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        margin-left: 0;\n                    }\n                }\n\n                &:last-child {\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        margin-right: 0;\n                    }\n                }\n\n                &:focus {\n                    outline: none;\n                }\n\n                &.vloc-ins-one-product {\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        margin: 0 auto;\n                        max-width: 50%;\n                    }\n\n                    &:last-child {\n                        .vloc-ins-selectable-item-inner-wrapper {\n                            margin: 0 auto;\n                        }\n                    }\n                }\n\n                .vloc-ins-selectable-item-selected {\n                    width: 0;\n                    height: 0;\n                    border-style: solid;\n                    border-width: 0 4rem 4rem 0;\n                    border-color: transparent $slds-green transparent transparent;\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    visibility: hidden;\n                    opacity: 0;\n                    transition: visibility 0ms linear 150ms,\n                                opacity 150ms ease-in;\n\n                    &.active {\n                        opacity: 1;\n                        visibility: visible;\n                        transition: visibility 0ms linear 0ms,\n                                    opacity 150ms ease-in;\n                    }\n\n                    .slds-icon {\n                        fill: white;\n                        position: absolute;\n                        left: 2.1rem;\n                        top: 0.5rem;\n                    }\n                }\n\n                .vloc-ins-selectable-item-top {\n                    .vloc-ins-selectable-item-price {\n                        width: 6.25rem;\n                        height: 6.25rem;\n                        margin: 0 auto;\n                        text-align: center;\n                        background-color: $royal-blue;\n                        border-radius: 50%;\n                        margin-bottom: 1.5rem;\n                        color: white;\n                        line-height: 6.25rem;\n                        font-size: 1.5rem;\n                        font-weight: 400;\n                        transition: background-color 150ms ease-in;\n                    }\n\n                    .vloc-ins-selectable-item-name {\n                        font-size: 1.75rem;\n                        line-height: 1.3;\n                        font-weight: 400;\n                        color: $dark-navy;\n                        text-align: center;\n                        margin-bottom: 1.75rem;\n                    }\n                }\n\n                .vloc-ins-selectable-item-middle {\n                    color: $attr-label;\n                    width: 100%;\n                    text-align: center;\n\n                    .vloc-ins-selectable-item-parent-attribute-label {\n                        margin-right: 0.25rem;\n                        display: inline-block;\n                    }\n\n                    .vloc-ins-selectable-item-parent-attribute-value {\n                        font-weight: 400;\n                        display: inline-block;\n                    }\n\n                    &.vloc-ins-parent-attr-regular + .vloc-ins-parent-attr-non-regular {\n                        margin-top: 1.5rem;\n                    }\n\n                    &.vloc-ins-parent-attr-non-regular {\n                        border-bottom: 1px solid $border-color;\n                        padding: 0.75rem 0.25rem;\n                        margin: 0;\n                        text-align: left;\n                        font-size: 0.875rem;\n\n                        .vloc-ins-selectable-item-parent-attribute-label {\n                            float: left;\n                        }\n\n                        .vloc-ins-selectable-item-parent-attribute-value {\n                            float: right;\n                            color: $royal-blue;\n\n                            .slds-icon {\n                                fill: $royal-blue;\n                            }\n                        }\n                    }\n                }\n\n                .vloc-ins-selectable-item-bottom {\n                    .vloc-ins-selectable-item-coverages {\n                        .vloc-ins-selectable-item-coverage {\n                            .vloc-ins-selectable-item-optional-heading-container {\n                                margin: 2rem 0 1.25rem;\n                                border-bottom: 1px solid rgba($attr-label, .4);\n                                padding-bottom: 0.25rem;\n\n                                .vloc-ins-selectable-item-optional-heading {\n                                    .vloc-ins-selectable-item-optional-heading-text {\n                                        text-transform: uppercase;\n                                        letter-spacing: 1px;\n                                        font-size: 1rem;\n                                        font-weight: 400;\n                                        color: $attr-label;\n                                    }\n                                }\n                            }\n                            .vloc-ins-selectable-item-coverage-details {\n                                .vloc-ins-selectable-item-coverage-details-wrapper {\n                                    font-size: 0.875rem;\n\n                                    .vloc-ins-selectable-item-coverage-details-limit-label {\n                                        color: $attr-label;\n                                        font-weight: 400;\n                                    }\n\n                                    .vloc-ins-selectable-item-coverage-details-limit-value {\n                                        color: $royal-blue;\n                                        transition: color 150ms ease-in;\n                                    }\n                                }\n                                .vloc-ins-selectable-item-coverage-details-categories {\n                                    .vloc-ins-selectable-item-coverage-details-attributes {\n                                        font-size: 0.75rem;\n\n                                        .vloc-ins-selectable-item-coverage-details-attributes-label {\n                                            color: #979797;\n                                        }\n\n                                        .vloc-ins-selectable-item-coverage-details-attributes-value {\n                                            color: $royal-blue;\n                                            transition: color 150ms ease-in;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n\n                &:hover {\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        @include changeColor($dark-navy);\n                    }\n                }\n                &[vloc-slds-added=\"true\"] {\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        @include changeColor($slds-green);\n                    }\n                }\n            }\n        }\n    }\n    .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin {\n        width: 100%;\n        color: $enrollment-text;\n\n        .vloc-ins-selectable-item-enrollment-top {\n            width: 50%;\n            margin: 0 auto;\n\n            .vloc-ins-selectable-item-enrollment-top-label {\n                line-height: 1.875rem;\n            }\n        }\n\n        .vloc-ins-selectable-item {\n            .vloc-ins-selectable-item-inner-wrapper {\n                text-align: center;\n                position: relative;\n                background-color: $enrollment-cards-bg;\n                border: 1px solid $enrollment-cards-border;\n                border-radius: 0.5rem;\n                margin: 0;\n                transition: border-color 150ms ease-in,\n                            background-color 150ms ease-in;\n                margin: 0 0.5rem;\n                padding: 1rem 1.5rem 14.875rem 1.5rem;\n                height: 100%;\n            }\n\n            &:focus {\n                outline: none;\n            }\n\n            .vloc-ins-selectable-item-similar-plan-container {\n                width: calc(100% + 2px);\n                height: 1.5rem;\n                background-color: $dark-navy;\n                transition: background-color 150ms ease-in;\n                color: white;\n                position: absolute;\n                top: -1.55rem;\n                left: -1px;\n                border-top-left-radius: 0.5rem;\n                border-top-right-radius: 0.5rem;\n                line-height: 2.25rem;\n                font-size: 0.75rem;\n\n                .vloc-ins-selectable-item-similar-plan {\n                    position: relative;\n                    overflow: hidden;\n                    padding-bottom: 1rem;\n\n                    .vloc-ins-selectable-item-similar-plan-label {\n                        display: inline-block;\n                        line-height: 1;\n                    }\n\n                    .vloc-ins-selectable-item-similar-plan-triangle-pointing-down {\n                        width: 100%;\n                        height: 0;\n                        border-style: solid;\n                        border-width: 1rem 12rem 0 12rem;\n                        border-color: $dark-navy transparent transparent transparent;\n                        transition: border-top-color 150ms ease-in;\n                        position: absolute;\n                        top: 1.5rem;\n                        left: 50%;\n                        transform: translateX(-50%);\n                    }\n                }\n            }\n\n            .vloc-ins-selectable-item-image {\n                min-height: 2.5rem;\n                margin-top: 0.5rem;\n\n                &.is-custom-image {\n                    min-height: 3.25rem;\n                    padding-top: 0.25rem;\n                    margin-bottom: 0.5rem;\n                }\n\n                .vloc-ins-selectable-custom-image {\n                    height: 3.25rem;\n                }\n\n                .vloc-ins-selectable-item-image-fallback {\n                    background: transparent;\n\n                    .slds-icon {\n                        fill: #f06e2f;\n                        width: 4rem;\n                        height: 4rem;\n                    }\n                }\n            }\n\n            .vloc-ins-selectable-item-top {\n                margin-bottom: 0.75rem;\n                min-height: 4.5rem;\n\n                .vloc-ins-selectable-item-name {\n                    font-weight: bold;\n                    font-size: 1.125rem;\n                    line-height: 1.3;\n                    max-height: 2.875rem;\n                    overflow: hidden;\n                }\n\n                .vloc-ins-selectable-item-description {\n                    font-size: 0.875rem;\n                    margin-top: 0.25rem;\n                }\n            }\n\n            .vloc-ins-selectable-item-middle {\n                margin-bottom: 2rem;\n\n                .vloc-ins-selectable-item-parent-attribute-value {\n                    display: block;\n                    font-size: 1.5rem;\n                    line-height: 1.4;\n                    font-weight: 400;\n                }\n\n                .vloc-ins-selectable-item-parent-attribute-label {\n                    display: block;\n                    font-size: 1rem;\n                }\n            }\n\n            .vloc-ins-selectable-item-bottom {\n                height: 14.375rem;\n                position: absolute;\n                bottom: 0.5rem;\n                left: 0;\n                width: 100%;\n                padding: 0 1.5rem;\n                overflow: hidden;\n\n                .vloc-ins-enrollment-price-container {\n                    margin-bottom: 2.25rem;\n\n                    .vloc-ins-enrollment-price-price {\n                        display: block;\n                        font-size: 1.5rem;\n                        line-height: 1.4;\n                        font-weight: 400;\n\n                        .vloc-ins-enrollment-price-period {\n                            font-size: 1.15rem;\n                            font-weight: normal;\n                        }\n                    }\n\n                    .vloc-ins-enrollment-price-label {\n                        display: block;\n                        font-size: 1rem;\n                    }\n                }\n\n                .vloc-ins-enrollment-select-plan-btn {\n                    cursor: pointer;\n                    background: 0 0;\n                    background-color: white;\n                    display: block;\n                    width: 100%;\n                    padding: 0.65rem 0;\n                    border: 2px solid $royal-blue;\n                    border-radius: 0.25rem;\n                    color: #1589ee;\n                    margin-bottom: 1.5rem;\n                    transition: border-color 150ms ease-in,\n                                background-color 150ms ease-in,\n                                color 150ms ease-in;\n                }\n\n                .vloc-ins-selectable-item-compare-container {\n                    .vloc-ins-selectable-item-compare-checkbox-label {\n                        line-height: 1.6;\n                    }\n                }\n\n                .vloc-ins-enrollment-plan-details {\n                    cursor: pointer;\n                    font-size: 0.875rem;\n                    color: #1589ee;\n                    display: inline-block;\n                }\n\n                &.disabled-by-rate-band {\n                    .vloc-ins-enrollment-select-plan-btn {\n                        visibility: hidden;\n                    }\n                }\n            }\n            &:not(.disabled-by-rate-band) {\n                &:hover {\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        @include changeColor($dark-navy);\n                    }\n                }\n                &[vloc-slds-added=\"true\"] {\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        @include changeColor($slds-green);\n                    }\n                }\n            }\n        }\n\n        .vloc-ins-selectable-item-enrollment-bottom {\n            .vloc-ins-selectable-item-compare-btn {\n                padding: 0 3rem;\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 1225px) {\n    .via-slds {\n        .vloc-ins-selectable-item-container {\n            &.vloc-ins-enrollment-skin {\n                .vloc-ins-selectable-item {\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        padding: 1rem 1rem 14.875rem 1rem;\n                    }\n\n                    .vloc-ins-selectable-item-bottom {\n                        padding: 0 1rem;\n                    }\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 1023px) {\n    .via-slds {\n        .vloc-ins-selectable-item-container {\n            &.vloc-ins-enrollment-skin {\n                .vloc-ins-selectable-item-enrollment-top {\n                    width: 75%;\n                }\n                .vloc-ins-selectable-item {\n                    margin: 1rem 0 0;\n\n                    .vloc-ins-selectable-item-similar-plan-container {\n                        top: -1.25rem;\n                    }\n\n                    .vloc-ins-selectable-item-middle {\n                        &.vloc-ins-hide-on-large-screens {\n                            display: none;\n                        }\n                    }\n                }\n            }\n\n            .vloc-ins-selectable-item-inner-container {\n                flex-wrap: wrap;\n                align-items: flex-start;\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 999px) {\n    html, body {\n        font-size: 16px;\n    }\n}\n\n@media screen and (max-width: 767px) {\n    .via-slds {\n        .vloc-ins-selectable-item-container {\n            &.vloc-ins-enrollment-skin {\n                .vloc-ins-selectable-item-enrollment-top {\n                    width: 100%;\n\n                    .vloc-ins-selectable-item-enrollment-top-label {\n                        font-size: 0.875rem;\n                        padding-right: 0.25rem;\n                    }\n\n                    .vloc-ins-selectable-item-enrollment-top-form-element {\n                        padding-right: 20%;\n                    }\n                }\n                .vloc-ins-selectable-item {\n                    &.vloc-ins-has-similar-flag {\n                        margin-top: 2.125rem;\n                    }\n\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        padding: 1rem 2.5rem 14.375rem 2.5rem;\n                    }\n\n                    .vloc-ins-selectable-item-top {\n                        min-height: 0;\n                    }\n\n                    .vloc-ins-selectable-item-similar-plan-container {\n                        .vloc-ins-selectable-item-similar-plan {\n                            .vloc-ins-selectable-item-similar-plan-triangle-pointing-down {\n                                border-width: 1rem 24rem 0 24rem;\n                            }\n                        }\n                    }\n\n                    .vloc-ins-selectable-item-middle {\n                        &.vloc-ins-hide-on-small-screens {\n                            display: none;\n                        }\n                    }\n\n                    .vloc-ins-selectable-item-bottom {\n                        .vloc-ins-enrollment-price-container {\n                            margin-bottom: 1.25rem;\n                        }\n\n                        .vloc-ins-enrollment-select-plan-btn {\n                            margin-bottom: 1.25rem;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 699px) {\n    .via-slds {\n        .vloc-ins-selectable-item-container {\n            .vloc-ins-selectable-item-inner-container {\n                .vloc-ins-selectable-item {\n                    &.vloc-ins-one-product {\n                        .vloc-ins-selectable-item-inner-wrapper {\n                            max-width: 80%;\n                        }\n\n                        .vloc-ins-selectable-item-top {\n                            .vloc-ins-selectable-item-name {\n                                font-size: 1.5rem;\n                                line-height: 1.2;\n                            }\n                        }\n                    }\n\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        padding: 1rem 2rem 14.375rem 2rem;\n                    }\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 480px) {\n    .vloc-mobile-hide {\n        display: none;\n    }\n    .vloc-mobile-show {\n        display: block;\n    }\n\n    .via-slds {\n        .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) {\n            &.vloc-ins-enrollment-skin {\n                .vloc-ins-selectable-item-enrollment-top {\n                    .vloc-ins-selectable-item-enrollment-top-form-element {\n                        padding-right: 7%;\n                    }\n                }\n            }\n            .vloc-ins-selected-product {\n                padding: 0 0.25rem;\n                margin-bottom: 0.5rem;\n                line-height: 1.4;\n\n                .vloc-ins-selected-product-strong {\n                    font-weight: bold;\n                }\n            }\n\n            .vloc-ins-selectable-item-pagination-container {\n                margin-bottom: 0.75rem;\n\n                .slds-button {\n                    padding: 0;\n\n                    .slds-button__icon {\n                        margin: 0;\n                    }\n                }\n\n                .vloc-mobile-page-count {\n                    line-height: 2rem;\n                }\n            }\n\n            .vloc-ins-selectable-item-inner-container {\n                .vloc-ins-selectable-item {\n                    &.vloc-ins-one-product {\n                        .vloc-ins-selectable-item-inner-wrapper {\n                            max-width: 100%;\n                        }\n                    }\n\n                    .vloc-ins-selectable-item-inner-wrapper {\n                        padding: 1rem 1rem 14.375rem 1rem;\n                    }\n                }\n            }\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":4,"Name":"ins-os-product-selection","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-product-selection/%vlocity_namespace%__VlocityUITemplate__c/ins-os-product-selection"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-product-selection","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-product-selection","VlocityDataPackName":"ins-os-product-selection","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".via-slds .ins-os-confirmation-wrapper p {\n  margin-bottom: 1rem; }\n  .via-slds .ins-os-confirmation-wrapper p a {\n    color: #16325C; }\n\n.via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-items {\n  display: flex;\n  justify-content: space-between; }\n\n.via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card {\n  color: #16325C;\n  border-radius: 0.25rem;\n  padding: 1.25rem 1.5rem;\n  margin-bottom: 1.5rem;\n  line-height: 1.4; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card h3 {\n    font-weight: bold;\n    font-size: 1.25rem; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-annual-premium {\n    line-height: 1.75rem; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-value {\n    font-weight: bold; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-print-desktop a {\n    color: #01A7E1; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-print-mobile {\n    display: none; }\n    .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-print-mobile a {\n      color: #01A7E1; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-amount-container {\n    text-align: right; }\n\n@media screen and (max-width: 650px) {\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-print-desktop {\n    display: none; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-print-mobile {\n    display: block; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-exp-date {\n    display: block; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-annual-premium {\n    text-align: left; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-m-top--x-small {\n    margin-top: 0.5rem; }\n  .via-slds .ins-os-confirmation-wrapper .ins-os-confirmation-card .ins-os-confirmation-m-bottom--x-small {\n    margin-bottom: 0.5rem; } }\n","%vlocity_namespace%__CustomJavascript__c":"var insConfirmationMonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\nbaseCtrl.prototype.insConfirmationformatDate = function(date) {\n    var dateObj = new Date(date);\n    return insConfirmationMonths[dateObj.getUTCMonth()] + ' ' + dateObj.getUTCDate() + ', ' + dateObj.getUTCFullYear();\n};","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-quote-confirmation/1/Vlocity/1509913231486","%vlocity_namespace%__HTML__c":"<div class=\"ins-os-confirmation-wrapper\" ng-if=\"control.vlcSI[control.itemsKey]\">\n    <div class=\"ins-os-confirmation-container\" ng-repeat=\"p in control.vlcSI[control.itemsKey]\">\n        <p>Thank You for Submitting Your Information, and Completing the Quote Process.</p>\n        <div class=\"slds-grid slds-wrap ins-os-confirmation-card ins-os-confirmation-items\">\n            <div class=\"slds-col\">\n                <div class=\"slds-size--2-of-2 slds-m-bottom--x-small ins-os-confirmation-m-bottom--x-small\">\n                    <span class=\"ins-os-confirmation-label\">Quote Number</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.quoteConfirmQuoteNumber}}</span>\n                </div>\n                <div class=\"slds-max-small-size--1-of-1 slds-size--1-of-2 slds-m-bottom--x-small ins-os-confirmation-m-bottom--x-small\">\n                    <h3>{{p.quoteConfirmProduct}}</h3>\n                </div>\n                <div class=\"slds-max-small-size--1-of-1 slds-size--3-of-4 slds-m-bottom--x-small ins-os-confirmation-m-bottom--x-small\">\n                    <span class=\"ins-os-confirmation-label\">Quote expires on</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.quoteConfirmExpirationDate}}</span>\n                    <span class=\"ins-os-confirmation-label\">.</span>\n                </div>\n                <div class=\"slds-size--2-of-2\">\n                    <span class=\"ins-os-confirmation-label\">Your Representative: </span>\n                    <span class=\"ins-os-confirmation-value\">{{p.quoteConfirmProducerName}}</span>\n                    <span class=\"ins-os-confirmation-label\"> Phone:</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.quoteConfirmProducerPhone}}</span>\n                    <span class=\"ins-os-confirmation-label\">  Email:</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.quoteConfirmProducerEmail}}</span>\n                </div>\n            </div>\n            <div class=\"slds-col ins-os-amount-container\">\n                <div class=\"slds-max-small-size--1-of-1 slds-m-bottom--x-small slds-text-align--right ins-os-confirmation-m-bottom--x-small ins-os-confirmation-annual-premium\">\n                    <span class=\"ins-os-confirmation-label\">Total Annual</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.quoteConfirmTotalAmount}} </span>\n                </div>\n                <div ng-if=\"p.quoteConfirmTotalPremium\" class=\"slds-max-small-size--1-of-1 slds-m-bottom--x-small slds-text-align--right ins-os-confirmation-m-bottom--x-small ins-os-confirmation-annual-premium\">\n                    <span class=\"ins-os-confirmation-label\">Annual Premium</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.quoteConfirmTotalPremium}}</span>\n                </div>\n                <div ng-if=\"p.quoteConfirmTotalTaxAmount\" class=\"slds-max-small-size--1-of-1 slds-m-bottom--x-small slds-text-align--right ins-os-confirmation-m-bottom--x-small ins-os-confirmation-annual-premium\">\n                    <span class=\"ins-os-confirmation-label\">Taxes</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.quoteConfirmTotalTaxAmount}}</span>\n                </div>\n                <div ng-if=\"p.quoteConfirmTotalFeeAmount\" class=\"slds-max-small-size--1-of-1 slds-m-bottom--x-small slds-text-align--right ins-os-confirmation-m-bottom--x-small ins-os-confirmation-annual-premium\">\n                    <span class=\"ins-os-confirmation-label\">Fees</span>\n                    <span class=\"ins-os-confirmation-value\">{{p.quoteConfirmTotalFeeAmount}}</span>\n                </div>\n            </div>\n\n        </div>\n        <p>We look forward to serving you as your insurance needs evolve.  Please contact us at <a href=\"https://www.vlocity.com/\" target=\"_blank\"><strong>www.vlocity.com</strong></a>, via email at <a href=\"mailto:customerservice@vlocity.com\"><strong>customerservice@vlocity.com</strong></a> or or via phone at <a href=\"tel:18448562489\"><strong>888.Vlocity</strong></a> if we can be of assistance.</p>\n    </div>\n</div>\n","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"confirmQuote\":{\"quoteConfirm\":{\"quoteConfirmProducerEmail\":\"dlq@vlocity.com\",\"quoteConfirmProducerName\":\"Larry Sullivan\",\"quoteConfirmProducerPhone\":\"(415) 789-8474\",\"quoteConfirmProduct\":\"Superior Business\",\"quoteConfirmQuoteNumber\":\"00000050\",\"quoteConfirmStatus\":\"Submitted\",\"quoteConfirmTotalPremium\":\"$14,249.52\"}}}","%vlocity_namespace%__Sass__c":".via-slds {\n    .ins-os-confirmation-wrapper {\n        p {\n            margin-bottom: 1rem;\n\n            a {\n                color: #16325C;\n            }\n        }\n        .ins-os-confirmation-items {\n            display: flex;\n            justify-content: space-between;\n        }\n\n        .ins-os-confirmation-card {\n            color: #16325C;\n            border-radius: 0.25rem;\n            padding: 1.25rem 1.5rem;\n            margin-bottom: 1.5rem;\n            line-height: 1.4;\n\n            h3 {\n                font-weight: bold;\n                font-size: 1.25rem;\n            }\n\n            .ins-os-confirmation-annual-premium {\n                line-height: 1.75rem;\n            }\n\n            .ins-os-confirmation-value {\n                font-weight: bold;\n            }\n\n            .ins-os-confirmation-print-desktop {\n                a {\n                    color: #01A7E1;\n                }\n            }\n\n            .ins-os-confirmation-print-mobile {\n                display: none;\n\n                a {\n                    color: #01A7E1;\n                }\n            }\n\n            .ins-os-amount-container {\n                text-align: right;\n            }\n        }\n    }\n\n    @media screen and (max-width: 650px) {\n        .ins-os-confirmation-wrapper {\n            .ins-os-confirmation-card {\n                .ins-os-confirmation-print-desktop {\n                    display: none;\n                }\n\n                .ins-os-confirmation-print-mobile {\n                    display: block;\n                }\n\n                .ins-os-confirmation-exp-date {\n                    display: block;\n                }\n\n                .ins-os-confirmation-annual-premium {\n                    text-align: left;\n                }\n\n                .ins-os-confirmation-m-top--x-small {\n                    margin-top: 0.5rem;\n                }\n\n                .ins-os-confirmation-m-bottom--x-small {\n                    margin-bottom: 0.5rem;\n                }\n            }\n        }\n    }\n}\n","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-quote-confirmation","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-quote-confirmation/%vlocity_namespace%__VlocityUITemplate__c/ins-os-quote-confirmation"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-quote-confirmation","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-quote-confirmation","VlocityDataPackName":"ins-os-quote-confirmation","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".vloc-mobile-hide {\n  display: block; }\n\n.vloc-mobile-show {\n  display: none; }\n\n.via-slds.via-omni .vlc-slds-selItem > .slds-form-element__control:first-child {\n  width: 100%; }\n\n.via-slds .vloc-ins-blue-text {\n  color: #0070D2; }\n\n.via-slds .vloc-ins-text-heading_medium {\n  font-weight: 400;\n  font-size: 1.1rem; }\n\n.via-slds .vloc-ins-selectable-item-outer-container {\n  width: 100%; }\n\n.via-slds .vloc-ins-selectable-item-image {\n  min-height: 4rem; }\n\n.via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) {\n  width: 100%; }\n  .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-pagination-container {\n    background-color: transparent;\n    border: none;\n    padding: 0; }\n    .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-pagination-container .vloc-ins-selected-product > span {\n      line-height: 2rem; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-pagination-container .vloc-ins-selected-product > span .vloc-ins-selected-product-strong {\n        font-weight: 400; }\n  .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container {\n    margin: 0 auto; }\n    .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item {\n      position: relative; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selcetable-item-inner-wrapper {\n        position: relative;\n        border: 1px solid #d7dde6;\n        border-radius: 0.5rem;\n        background-color: #f8fbfe;\n        transition: border-color 150ms ease-in, background-color 150ms ease-in;\n        margin: 0 0.5rem;\n        height: 100%; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selcetable-item-inner-wrapper .nds-text-heading_large {\n          font-weight: 400; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:first-child .vloc-ins-selcetable-item-inner-wrapper {\n        margin-left: 0; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:last-child .vloc-ins-selcetable-item-inner-wrapper {\n        margin-right: 0; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-description {\n        font-size: 1rem;\n        margin-top: 0.25rem; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-renewal-flag-container {\n        position: absolute;\n        z-index: 200;\n        top: -.1rem;\n        width: 101.1%;\n        right: -.1rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-renewal-flag-container #content {\n          position: absolute;\n          color: white;\n          top: 10%;\n          font-size: .8rem;\n          font-weight: 100;\n          width: 100%; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-renewal-flag-container #content a {\n            color: white;\n            text-decoration: underline;\n            font-size: .6rem;\n            position: relative;\n            top: -.2rem; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item:focus {\n        outline: none; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom-link {\n        position: absolute;\n        bottom: 0;\n        width: 100%; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-icon {\n        background: transparent;\n        position: relative;\n        margin-top: rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-icon .slds-icon {\n          fill: #f06e2f;\n          width: 4rem;\n          height: 4rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-icon.gold .slds-icon {\n          fill: #F8C300; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-icon.silver .slds-icon {\n          fill: #CBD4E4; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-icon.bronze .slds-icon {\n          fill: #B2720C; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item.vloc-ins-one-product .vloc-ins-selcetable-item-inner-wrapper {\n        margin: 0 auto;\n        max-width: 50%; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item.vloc-ins-one-product:last-child .vloc-ins-selcetable-item-inner-wrapper {\n        margin: 0 auto; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-selected {\n        width: 0;\n        height: 0;\n        border: 1px solid #0070D2;\n        border-style: solid;\n        border-width: 0 4rem 4rem 0;\n        border-color: transparent #0070D2 transparent transparent;\n        position: absolute;\n        top: 0;\n        right: 0;\n        visibility: hidden;\n        opacity: 0;\n        transition: visibility 0ms linear 150ms, opacity 150ms ease-in; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-selected.active {\n          opacity: 1;\n          visibility: visible;\n          transition: visibility 0ms linear 0ms, opacity 150ms ease-in; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-selected .slds-icon {\n          fill: white;\n          position: absolute;\n          left: 2.1rem;\n          top: 0.5rem;\n          z-index: 300; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-top .vloc-ins-selectable-item-price {\n        width: 6.25rem;\n        height: 6.25rem;\n        margin: 0 auto;\n        text-align: center;\n        background-color: #0070D2;\n        border-radius: 50%;\n        margin-bottom: 1.5rem;\n        color: white;\n        line-height: 6.25rem;\n        font-size: 1.5rem;\n        font-weight: 400;\n        transition: background-color 150ms ease-in; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-top .vloc-ins-selectable-item-name {\n        font-size: 1.25rem;\n        line-height: 1.3;\n        font-weight: 600;\n        color: #19355E;\n        text-align: center;\n        margin-bottom: .75rem; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle {\n        color: #16325C;\n        width: 100%;\n        text-align: center; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle .vloc-ins-selectable-item-parent-attribute-label {\n          margin-right: 0.25rem;\n          display: inline-block; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle .vloc-ins-selectable-item-parent-attribute-value {\n          font-weight: 400;\n          display: inline-block; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-regular + .vloc-ins-parent-attr-non-regular {\n          margin-top: 1.5rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular {\n          border-bottom: 1px solid #d7dde6;\n          padding: 0.75rem 0.25rem;\n          margin: 0;\n          text-align: left;\n          font-size: 0.875rem; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-label {\n            float: left; }\n          .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value {\n            float: right;\n            color: #0070D2; }\n            .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-middle.vloc-ins-parent-attr-non-regular .vloc-ins-selectable-item-parent-attribute-value .slds-icon {\n              fill: #0070D2; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-optional-heading-container {\n        margin: 2rem 0 1.25rem;\n        border-bottom: 1px solid rgba(22, 50, 92, 0.4);\n        padding-bottom: 0.25rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-optional-heading-container .vloc-ins-selectable-item-optional-heading .vloc-ins-selectable-item-optional-heading-text {\n          text-transform: uppercase;\n          letter-spacing: 1px;\n          font-size: 1rem;\n          font-weight: 400;\n          color: #16325C; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper {\n        font-size: 0.875rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-label {\n          color: #16325C;\n          font-weight: 400; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-wrapper .vloc-ins-selectable-item-coverage-details-limit-value {\n          color: #0070D2;\n          transition: color 150ms ease-in; }\n      .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-categories .vloc-ins-selectable-item-coverage-details-attributes {\n        font-size: 0.75rem; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-categories .vloc-ins-selectable-item-coverage-details-attributes .vloc-ins-selectable-item-coverage-details-attributes-label {\n          color: #19355E;\n          font-weight: 300; }\n        .via-slds .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selectable-item-bottom .vloc-ins-selectable-item-coverages .vloc-ins-selectable-item-coverage .vloc-ins-selectable-item-coverage-details .vloc-ins-selectable-item-coverage-details-categories .vloc-ins-selectable-item-coverage-details-attributes .vloc-ins-selectable-item-coverage-details-attributes-value {\n          color: #19355E;\n          font-weight: 400;\n          transition: color 150ms ease-in; }\n\n@media screen and (max-width: 1023px) {\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-inner-container {\n    flex-wrap: wrap;\n    align-items: flex-start; } }\n\n@media screen and (max-width: 999px) {\n  html,\nbody {\n    font-size: 16px; } }\n\n@media screen and (max-width: 699px) {\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item.vloc-ins-one-product .vloc-ins-selcetable-item-inner-wrapper {\n    max-width: 80%; }\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item.vloc-ins-one-product .vloc-ins-selectable-item-top .vloc-ins-selectable-item-name {\n    font-size: 1.5rem;\n    line-height: 1.2; }\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selcetable-item-inner-wrapper {\n    padding: 1rem 2rem 14.375rem 2rem; } }\n\n@media screen and (max-width: 480px) {\n  .vloc-mobile-hide {\n    display: none; }\n  .vloc-mobile-show {\n    display: block; }\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selected-product {\n    padding: 0 0.25rem;\n    margin-bottom: 0.5rem;\n    line-height: 1.4; }\n    .via-slds .vloc-ins-selectable-item-container .vloc-ins-selected-product .vloc-ins-selected-product-strong {\n      font-weight: bold; }\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-pagination-container {\n    margin-bottom: 0.75rem; }\n    .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-pagination-container .slds-button {\n      padding: 0; }\n      .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-pagination-container .slds-button .slds-button__icon {\n        margin: 0; }\n    .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-pagination-container .vloc-mobile-page-count {\n      line-height: 2rem; }\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item.vloc-ins-one-product .vloc-ins-selcetable-item-inner-wrapper {\n    max-width: 100%; }\n  .via-slds .vloc-ins-selectable-item-container .vloc-ins-selectable-item-inner-container .vloc-ins-selectable-item .vloc-ins-selcetable-item-inner-wrapper {\n    padding: 1rem 1rem 14.375rem 1rem; } }\n","%vlocity_namespace%__CustomJavascript__c":"var insPsCustomEventName = 'vloc-os-ins-product-selection-change-' + Math.round((new Date()).getTime() / 1000);\nvar insPsLoadedOnce;\nbaseCtrl.prototype.setSelectedProductSelectionProducts = function(control) {\n    var event = new CustomEvent(insPsCustomEventName, {'detail': control.vlcSI[control.itemsKey]});\n    baseCtrl.prototype.$scope.currentElementName = control.name;\n    if (!baseCtrl.prototype.$scope.insPsControlRef) {\n        baseCtrl.prototype.$scope.insPsControlRef = {};\n    }\n    baseCtrl.prototype.$scope.insPsControlRef[baseCtrl.prototype.$scope.currentElementName] = control;\n    insPsLoadedOnce = false; //load template more than once\n    document.dispatchEvent(event);\n};\nvlocity.cardframework.registerModule.controller('insOsProductSelectionCtrl', ['$scope', '$rootScope', '$timeout', '$injector',  '$sldsModal', function($scope, $rootScope, $timeout, $injector, $sldsModal) {\n    'use strict';\n    var trackSetValueAttrs = {};\n    var foundCurrentStep = false; // used to track in waitForCurrentStep\n    $scope.currencyCode = '$';\n    if (baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol) {\n        $scope.currencyCode = baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol;\n    }\n    $scope.currentProducts = [];\n    $scope.allProducts = [];\n    $scope.completedProductAnalysis = false;\n    $scope.limitValues = {};\n\n    //*** CUSTOMIZABLE VARIABLES ***//\n    $scope.usePagination = true; // Turn on/off pagination\n    $scope.pageSize = 3; // Customize pagination page size (cannot be 0, must be an integer) (not applicable for enrollmentFlow)\n    if (/Mobi/.test(navigator.userAgent)) {\n        $scope.pageSize = 1;\n    }\n\n    //*** START LOGIC ***//\n    // Listening for a new product selection if the user goes previous and selects a new product\n    function listenForMainEvent(e) {\n        $rootScope.attributeUserValues = {};\n        $scope.insPsInit(e.detail);\n    }\n    if (!insPsLoadedOnce) {\n        document.addEventListener(insPsCustomEventName, listenForMainEvent);\n    }\n\n\n    $scope.formatDate = function(date, isDatetime) {\n        let formattedDate = null;\n        if (!date) {\n            console.error('This date is invalid', date);\n            return formattedDate;\n        } else {\n            let monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n            if (moment) {\n                monthNames = moment.months();\n                formattedDate = moment(date).format('MM/DD/YYYY');\n                if (isDatetime) {\n                    formattedDate = moment(date).format('MM/DD/YY, h:mm a');\n                }\n            } else {\n                const dateObj = new Date(date);\n                if (Object.prototype.toString.call(dateObj) === '[object Date]') {\n                    if (isNaN(dateObj.getTime())) {\n                        if (typeof date === 'string' && date.indexOf('.') > -1) {\n                            date = date.split('.')[0];\n                            return $scope.formatDate(date);\n                        }\n                    }\n                } else {\n                    console.error('This date is invalid', date);\n                }\n                formattedDate = monthNames[dateObj.getUTCMonth()] + ' ' + dateObj.getUTCDate() + ' ' + dateObj.getUTCFullYear();\n\n                if (isDatetime) {\n                    formattedDate = formattedDate + ' ' + dateObj.toLocaleTimeString();\n                }\n            }\n        }\n        return formattedDate;\n    };\n\n    /*\n     * Helper method for repeatable code, called in decideCorrectElement\n     * @param {Object} currentStepChild\n     * @param {Number} currentStepChildIdx\n     */\n    function decideCorrectElementHelper(currentStepChild, currentStepChildIdx) {\n        var returnObj = {\n            correctElement: false,\n            path: ''\n        };\n        angular.forEach(currentStepChild.eleArray, function(osElement, idx) {\n            if (osElement && osElement.type === 'Selectable Items' && osElement.children && !osElement.children.length && osElement.propSetMap && !osElement.propSetMap.remoteClass && !osElement.propSetMap.remoteMethod) {\n                returnObj.path = 'currentStep.children[' + currentStepChildIdx + '].eleArray[' + idx + ']';\n                returnObj.correctElement = true;\n                return returnObj;\n            }\n        });\n        return returnObj;\n    }\n\n    // OS asIndex is null until the step is instantiated which isn't immediate\n    function waitForCurrentStep(callback) {\n        $timeout(function() {\n            var currentStep = baseCtrl.prototype.$scope.bpTree.children[baseCtrl.prototype.$scope.bpTree.asIndex];\n            if (!foundCurrentStep) { // this is set to true in the else block below. it gets set back to false in decideCorrectElement\n                if (!currentStep) {\n                    waitForCurrentStep(callback);\n                } else {\n                    foundCurrentStep = true;\n                    decideCorrectElement(callback);\n                }\n            }\n        }, 100);\n    }\n\n    /**\n     * Callback is called once we have a decision. We may have to wait for the baseCtrl.prototype.$scope.bpTree.asIndex\n     * as it is null at times when proceding a step\n     * @param {Function} callback\n     * @param {Boolean} initial\n     */\n    function decideCorrectElement(callback, initial) {\n        var currentStep = baseCtrl.prototype.$scope.bpTree.children[baseCtrl.prototype.$scope.bpTree.asIndex];\n        var returnObj = {};\n        var osElement;\n        if (initial) {\n            foundCurrentStep = false;\n        }\n        if (!currentStep) {\n            waitForCurrentStep(callback);\n        } else {\n            if (!rulesWatchTracker.path) {\n                angular.forEach(currentStep.children, function(currentStepChild, idx) {\n                    returnObj = decideCorrectElementHelper(currentStepChild, idx);\n                });\n            } else {\n                osElement = eval(rulesWatchTracker.path);\n                if (osElement && osElement.type === 'Selectable Items' && osElement.children && !osElement.children.length && osElement.propSetMap && !osElement.propSetMap.remoteClass && !osElement.propSetMap.remoteMethod) {\n                    returnObj.correctElement = true;\n                } else {\n                    returnObj.correctElement = false;\n                    angular.forEach(currentStep.children, function(currentStepChild, idx) {\n                        returnObj = decideCorrectElementHelper(currentStepChild, idx);\n                    });\n                }\n            }\n            return callback(returnObj);\n        }\n    }\n\n    // When the template is loaded, we need to parse the products that get returned:\n    $scope.insPsInit = function(products) {\n        const control = baseCtrl.prototype.$scope.insPsControlRef[baseCtrl.prototype.$scope.currentElementName];\n        control.response = products;\n        $scope.aggregate($scope, control.index, control.indexInParent, true, -1);\n        var i;\n        var dummmyProductsNeeded = products.length % $scope.pageSize ? products.length % $scope.pageSize : 0;\n        var dummyProducts = [];\n        $scope.parentAttrs = {};\n        $scope.rootAndChildrenProductsKeys = [];\n        if ($scope.usePagination && $scope.pageSize < products.length && dummmyProductsNeeded) {\n            dummyProducts = Array.apply(null, Array(dummmyProductsNeeded)).map(function() { return {dummyProduct: true}; });\n            products = products.concat(dummyProducts);\n        }\n        for (i = 0; i < products.length; i++) {\n            products[i].vlcCompSelected = false;\n            products[i].originalIndex = i;\n            // Manually generating our own $$hashKey because Omniscript uses it as a comparison\n            // and Angular removes it in an ng-repeat that uses 'track by' and we need both.\n            products[i].$$hashKey = 'ins-custom-' + i;\n            if (baseCtrl.prototype.$scope.insPsSelectedRateBand) {\n                products[i].selectedRateBand = baseCtrl.prototype.$scope.insPsSelectedRateBand;\n            }\n        }\n        $scope.initProducts = products;\n        if ($scope.usePagination) {\n            $scope.allProducts = products;\n            $scope.currentProducts = $scope.allProducts.slice(0, $scope.pageSize);\n        } else {\n            $scope.pageSize = products.length;\n            $scope.currentProducts = products;\n        }\n    };\n\n    // Gets called when clicking next/previous directional buttons at top\n    $scope.paginateItems = function(direction) {\n        var startIndex = 0;\n        var currentProducts = $scope.currentProducts;\n        if (direction === 'next') {\n            startIndex = currentProducts[currentProducts.length - 1].originalIndex + 1;\n        } else if (direction === 'prev') {\n            startIndex = currentProducts[0].originalIndex - $scope.pageSize;\n            if (startIndex < 0) {\n                startIndex = 0;\n            }\n        }\n        $scope.currentProducts = $scope.allProducts.slice(startIndex, startIndex + $scope.pageSize);\n    };\n\n    // Decides whether the directional button should be active or disabled based on\n    // the location we're at in the whole set of products.\n    $scope.showPageControl = function(direction) {\n        var i;\n        var show = false;\n        var amountToSubtract = ($scope.allProducts.length % 2) + 1; // adding 1 for dummyProduct\n        var lastIndex = $scope.allProducts.length - amountToSubtract;\n        var lastIndexExists = [];\n        if (direction === 'next') {\n            if ($scope.currentProducts.length === 1 && $scope.pageSize > 1) {\n                show = false;\n            } else {\n                for (i = 0; i < $scope.currentProducts.length; i++) {\n                    if ($scope.currentProducts[i].originalIndex === lastIndex) {\n                        lastIndexExists.push('yes');\n                    } else {\n                        lastIndexExists.push('no');\n                    }\n                }\n                if (lastIndexExists.indexOf('yes') > -1) {\n                    show = false;\n                } else {\n                    show = true;\n                }\n            }\n        } else if (direction === 'prev') {\n            if ($scope.currentProducts[0].originalIndex > 0) {\n                show = true;\n            } else {\n                show = false;\n            }\n        }\n        return show;\n    };\n\n    /*\n    * Set \"tier\" key for product using Tier__c field first, else productName\n    * the tier flag is used only for icon color\n    * @param {Object} product\n    */\n    $scope.setTier = function(product) {\n        let tier = product[baseCtrl.prototype.$scope.nsPrefix  + 'RecordTypeName__c'] || product.RecordTypeName__c;\n        if (!tier) {\n            if (product.productName.indexOf('Silver') > -1) {\n                product.tier = 'Silver';\n            }\n            if (product.productName.indexOf('Gold') > -1) {\n                product.tier = 'Gold';\n            }\n            if (product.productName.indexOf('Bronze') > -1) {\n                product.tier = 'Bronze';\n            }\n        } else {\n            product.tier = tier;\n        }\n    };\n\n    $scope.getSelectableItemClass = function(product, index) {\n        var htmlClass = 'slds-size--1-of-' + $scope.pageSize +\n                        ' nds-size--1-of-' + $scope.pageSize +\n                        ' slds-large-size--1-of-' + $scope.pageSize +\n                        ' nds-large-size--1-of-' + $scope.pageSize +\n                        ' slds-medium-size--1-of-' + $scope.pageSize +\n                        ' nds-medium-size--1-of-' + $scope.pageSize +\n                        ' slds-small-size--1-of-1 slds-max-small-size--1-of-1 nds-small-size--1-of-1 nds-max-small-size--1-of-1';\n        if (product.dummyProduct) {\n            htmlClass += ' slds-hidden nds-hidden';\n        }\n        if ($scope.currentProducts.length === 1) {\n            htmlClass += ' vloc-ins-one-product';\n        }\n        if (product.similarToLastYear) {\n            htmlClass += ' vloc-ins-has-similar-flag';\n        }\n        if (product.disabledByRateBand) {\n            htmlClass += ' disabled-by-rate-band';\n        }\n        return htmlClass;\n    };\n\n    $scope.getParentAttributeClass = function(attribute, index) {\n        var htmlClass = 'vloc-ins-parent-attr-regular';\n        if (attribute.categoryCode.toLowerCase().indexOf('benefit') > -1) {\n            if (attribute.dataType !== 'currency' && typeof attribute.valueLabel === 'boolean') {\n                htmlClass = 'vloc-ins-parent-attr-non-regular vloc-ins-parent-attr-boolean';\n            } else if (attribute.dataType === 'currency') {\n                htmlClass = 'vloc-ins-parent-attr-non-regular vloc-ins-parent-attr-currency';\n            }\n        }\n        if (index > 0) {\n            htmlClass += ' vloc-ins-hide-on-small-screens vloc-ins-hide-on-large-screens';\n        } else if (index > -1) {\n            htmlClass += ' vloc-ins-hide-on-small-screens';\n        }\n        return tmlClass;\n    };\n\n    /* Open Detail View Modal\n    * @params {obj} product\n    * @params {obj} control osControl - passed from html right now, not used but kept in case needed in modal\n    */\n    $scope.openDetailView = function(product, control) {\n        $scope.modalRecords = [product];\n        $sldsModal({\n            backdrop: 'static',\n            title: 'Plan Detail',\n            scope: $scope,\n            animation: true,\n            templateUrl: control.propSetMap.modalHTMLTemplateId,\n            show: true\n        });\n    };\n\n    /* Launch Compare to Last Year - send a list of products - i.e. current and it's original\n    * @params {obj} product\n    * @params {obj} control osControl - passed from html right now, not used but kept in case needed in modal\n    */\n    $scope.compareToLastYearModal = function(product, control) {\n        $scope.modalRecords = [product, product.originalPlan.records[0]]; //modalProducts = list of product and last years\n        $sldsModal({\n            backdrop: 'static',\n            title: 'View Changes',\n            scope: $scope,\n            showLastYear: true,\n            animation: true,\n            templateUrl: control.propSetMap.modalHTMLTemplateId,\n            show: true\n        });\n    };\n}]);","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-small-group-plan-renewal/1/Vlocity/1543855812176","%vlocity_namespace%__HTML__c":"<div class=\"vloc-ins-selectable-item-outer-container\" ng-if=\"control.vlcSI[control.itemsKey]\">\n    <div ng-if=\"!control.vlcSI[control.itemsKey][0].$$hashKey || (!baseCtrl.$scope.insPsControlRef || !baseCtrl.$scope.insPsControlRef[control.name])\" ng-init=\"baseCtrl.setSelectedProductSelectionProducts(control)\"></div>\n    <div class=\"vloc-ins-selectable-item-container\" ng-controller=\"insOsProductSelectionCtrl\">\n        <div class=\"vloc-ins-selectable-item-inner-wrapper\" ng-if=\"!showSmallGroupProductSelection\">\n            <div class=\"slds-box slds-grid slds-theme_shade slds-m-bottom_medium nds-box nds-grid nds-theme_shade nds-m-bottom_medium vloc-ins-selectable-item-pagination-container\" ng-if=\"currentProducts.length && (pageSize < control.vlcSI[control.itemsKey].length) && usePagination\">\n                <button class=\"slds-button slds-button_neutral slds-max-small-size_1-of-3 slds-size_1-of-8 nds-button nds-button_neutral nds-max-small-size_1-of-3 nds-size_1-of-8\" ng-disabled=\"!showPageControl('prev')\" ng-click=\"paginateItems('prev')\" title=\"Previous {{pageSize}} Products\">\n                    <slds-button-svg-icon size=\"'small'\" sprite=\"'utility'\" icon=\"'back'\" extra-classes=\"'slds-button__icon_left nds-button__icon_left'\"></slds-button-svg-icon>\n                </button>\n                <p class=\"slds-text-align_center slds-max-small-size_1-of-3 nds-text-align_center nds-max-small-size_1-of-3 vloc-mobile-show vloc-mobile-page-count\">{{currentProducts[0].originalIndex + 1}} of {{control.vlcSI[control.itemsKey].length}}</p>\n                <p class=\"slds-size_6-of-8 slds-text-align_center nds-size_6-of-8 nds-text-align_center vloc-ins-selected-product vloc-mobile-hide\">\n                    <span class=\"slds-m-right_small nds-m-right_small\"><span class=\"vloc-ins-selected-product-strong\">{{control.vlcSI[control.itemsKey].length}}</span> Total Products</span>\n                </p>\n                <button class=\"slds-button slds-button_neutral slds-max-small-size_1-of-3 slds-size_1-of-8 nds-button nds-button_neutral nds-max-small-size_1-of-3 nds-size_1-of-8\" ng-disabled=\"!showPageControl('next')\" ng-click=\"paginateItems('next')\" title=\"Next Products\">\n                    <slds-button-svg-icon size=\"'small'\" sprite=\"'utility'\" icon=\"'forward'\" extra-classes=\"'slds-button__icon_right nds-button__icon_right'\"></slds-button-svg-icon>\n                </button>\n            </div>\n            <div class=\"slds-grid nds-grid vloc-ins-selectable-item-inner-container\">\n                <div ng-class=\"getSelectableItemClass(product, $index)\" class=\"slds-col nds-col vloc-ins-selectable-item\" vloc-slds-added=\"{{control.vlcSI[control.itemsKey][product.originalIndex].vlcSelected}}\" vloc-slds-prod-desc=\"{{control.vlcSI[control.itemsKey][product.originalIndex].Description}}\" ng-repeat=\"product in currentProducts track by $index\" only-on-load=\"true\" ng-if=\"currentProducts.length\">\n                    <div class=\"vloc-ins-selcetable-item-inner-wrapper nds-p-vertical_large\">\n                        <div class=\"vloc-ins-renewal-flag-container\" ng-if=\"product.originalPlan\">\n                            <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 348 58\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n                                <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                                    <path d=\"M174.699219,57.1757812 L347.023437,39.9960937 C347.023437,32.6328125 347.023437,21.2721354 347.023437,5.9140625 C347.023437,2.45572917 344.829427,0.7265625 340.441406,0.7265625 L7.140625,0.7265625 C2.72395833,0.7265625 0.515625,2.45572917 0.515625,5.9140625 C0.515625,28.6354167 0.515625,39.9960937 0.515625,39.9960937 L174.699219,57.1757812 Z\" id=\"Path\" stroke=\"#0070D2\" fill=\"#0070D2\"></path>\n                                </g>\n                            </svg>\n                            <div id=\"content\" class=\"nds-text-align_center\" ng-if=\"product.originalPlan.records[0].Name\">\n                                <div>Replaces {{product.originalPlan.records[0].Name}}</div>\n                                <a href=\"\"  ng-click=\"compareToLastYearModal(product, control)\">View Changes</a>\n                            </div>\n                        </div>\n                        <div class=\"vloc-ins-selectable-item-similar-plan-container\" ng-if=\"product.similarToLastYear\">\n                            <div class=\"vloc-ins-selectable-item-similar-plan\">\n                                <span class=\"vloc-ins-selectable-item-similar-plan-label\">Similar to last year's plan</span>\n                                <div class=\"vloc-ins-selectable-item-similar-plan-triangle-pointing-down\"></div>\n                            </div>\n                        </div>\n                        <div class=\"vloc-ins-selectable-item-image nds-text-align_center\" ng-class=\"{'is-custom-image': product.ImageId}\">\n                            <img ng-hide=\"product.originalPlan.records[0]\" ng-src=\"{{instanceHost + product.ImageId}}\" class=\"vloc-ins-selectable-custom-image\" ng-if=\"product.ImageId\" />\n                            <span ng-hide=\"product.originalPlan.records[0]\" class=\"slds-icon_container nds-icon_container vloc-ins-selectable-item-image-fallback vloc-ins-selectable-item-icon\" ng-if=\"!product.ImageId\" ng-class=\"{'bronze' : product.tier === 'Bronze', 'gold' : product.tier === 'Gold', 'silver' : product.tier === Silver}\">\n                                <slds-svg-icon extra-classes=\"'vloc-ins-plan-icon'\" sprite=\"'custom'\" size=\"'large'\" icon=\"'custom91'\"></slds-svg-icon>\n                                <span class=\"slds-assistive-text nds-assistive-text\">Default Icon</span>\n                            </span>\n                        </div>\n                        <div class=\"vloc-ins-selectable-item-top\">\n                            <div ng-hide=\"true\" class=\"vloc-ins-selectable-item-price\" ng-if=\"!enrollmentFlow\">{{product.Price | currency: currencyCode: 0}}</div>\n                            <h2 class=\"vloc-ins-selectable-item-name\" ng-init=\"setTier(product)\">{{product.productName}}</h2>\n                            <h4 class=\"slds-text-align_center nds-text-align_center slds-truncate nds-truncate vloc-ins-selectable-item-description\">{{product.ProductCode}}</h4>\n                        </div>\n                        <div class=\"vloc-ins-selectable-item-bottom nds-m-bottom_xx-large nds-m-top_large\">\n                            <ul class=\"vloc-ins-selectable-item-coverages\">\n                                <div class=\"vloc-ins-selectable-item-coverage-details\">\n                                    <div class=\"nds-text-align_center\">\n                                        <div class=\"nds-text-heading_large\"> \n                                            {{product.Price | currency: currencyCode: 0}}/mo\n                                        </div>\n                                        <div class=\"slds-text-heading_small nds-text-heading_small vloc-ins-selectable-item-coverage-details-attributes-label\">You Pay</div>\n                                    </div>\n                                    <div class=\"vloc-ins-selectable-item-coverage-details-categories\" ng-repeat=\"category in product.attributeCategories.records | orderBy: 'displaySequence'\" ng-if=\"$index === 0\">\n                                        <div ng-repeat=\"attribute in category.productAttributes.records | orderBy: 'displaySequence'\" ng-init=\"attribute.labelAndValue = getAttributeData(attribute)\" ng-hide=\"attribute.hidden || attribute.inputType === 'equalizer'\"\n                                            class=\"nds-p-top_large nds-text-align_center slds-text-align_center\">\n                                            <div class=\" nds-clearfix vloc-ins-selectable-item-coverage-details-attributes\" ng-if=\"attribute.code.toLowerCase().indexOf('limit') < 0 && attribute.label && !attribute.hiddenByRule\">\n                                                <div class=\"nds-text-heading_large vloc-ins-selectable-item-coverage-details-attributes-value\" ng-if=\"!attribute.labelAndValue.valueHiddenByRule\">\n                                                 <div ng-if=\"attribute.inputType === 'checkbox' && !attribute.multiselect\" class=\"nds-form-element\">\n                                                    <div class=\"nds-form-element__control\">\n                                                        <div class=\"nds-checkbox\">\n                                                            <input type=\"checkbox\" name=\"options\" id=\"vloc-checkbox-plan-{{$index}}\" ng-model=\"attribute.userValues\" ng-disabled=\"true\"/>\n                                                            <label class=\"nds-checkbox__label\" for=\"vloc-checkbox-plan-{{$index}}\">\n                                                                <span class=\"nds-checkbox_faux\"></span>\n                                                                <span class=\"nds-form-element__label\"></span>\n                                                            </label>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'currency'\">{{attribute.userValues | currency: currencyCode: 0}}</p>\n                                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'percentage'\">{{attribute.userValues}}%</p>\n                                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'date'\">{{formatDate(attribute.userValues)}}</p>\n                                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"attribute.dataType === 'datetime'\">{{formatDate(attribute.userValues, true)}}</p>\n                                                <p class=\"vloc-ins-coverages-attribute-readonly\" ng-if=\"(attribute.inputType !== 'checkbox' || attribute.multiselect) && attribute.dataType !== 'currency' && attribute.dataType !== 'percentage' && attribute.dataType !== 'date' && attribute.dataType !== 'datetime'\">\n                                                    <span ng-if=\"!attribute.labelAndValue\">{{attribute.userValues}}</span>\n                                                    <span ng-if=\"attribute.labelAndValue\">{{attribute.labelAndValue.valueLabel}}</span>\n                                                </p>\n                                                </div>\n                                                <div class=\"slds-text-heading_small nds-text-heading_small vloc-ins-selectable-item-coverage-details-attributes-label\">{{attribute.label}}</div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ul>\n                        </div>\n                        <div class=\"vloc-ins-selectable-item-bottom vloc-ins-selectable-item-bottom-link nds-text-align_center nds-m-bottom_x-large\" ng-class=\"{'disabled-by-rate-band': product.disabledByRateBand}\">\n                            <a href=\"javascript:void(0)\" class=\"slds-truncate nds-truncate vloc-ins-enrollment-plan-details\" ng-click=\"openDetailView(product, control)\">View full plan details</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"ins-os-product-selection/4/Vlocity/1520548076826","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"// Variables:\n$royal-blue: #0070D2;\n$dark-navy: #19355E;\n$attr-label: #16325C;\n$slds-green: #04844b;\n$border-color: #d7dde6;\n$enrollment-text: #053a69;\n$enrollment-cards-border: #d7dde6;\n$enrollment-cards-bg: #f8fbfe;\n$newport-orange: #ff6d00;\n$bronze: #B2720C;\n$silver: #CBD4E4;\n$gold: #F8C300;\n// Mixins:\n@mixin changeColor($newColor) {\n    cursor: pointer;\n    border-color: $newColor;\n    background-color: lighten($newColor, 72%);\n    .vloc-ins-selectable-item-container.vloc-ins-enrollment-skin .vloc-ins-selectable-item .vloc-ins-selectable-item-image .vloc-ins-selectable-item-similar-plan-container {\n        background-color: $newColor;\n        .vloc-ins-selectable-item-similar-plan {\n            .vloc-ins-selectable-item-similar-plan-triangle-pointing-down {\n                border-top-color: $newColor;\n            }\n        }\n    }\n    .vloc-ins-selectable-item-top {\n        .vloc-ins-selectable-item-price {\n            background-color: $newColor;\n        }\n        .vloc-ins-selectable-item-name {\n            color: darken($newColor, 25%);\n        }\n        .vloc-ins-selectable-item-description {\n            color: darken($newColor, 25%);\n        }\n    }\n    .vloc-ins-icon-fill {\n        fill: $newport-orange;\n    }\n    .vloc-ins-selectable-item-middle {\n        color: darken($newColor, 25%);\n        &.vloc-ins-parent-attr-non-regular {\n            .vloc-ins-selectable-item-parent-attribute-value {\n                color: $newColor;\n                .slds-icon {\n                    fill: $newColor;\n                }\n            }\n        }\n    }\n    .vloc-ins-selectable-item-bottom {\n        .vloc-ins-selectable-item-coverages {\n            .vloc-ins-selectable-item-coverage {\n                .vloc-ins-selectable-item-coverage-details {\n                    .vloc-ins-selectable-item-coverage-details-wrapper {\n                        .vloc-ins-selectable-item-coverage-details-limit-label {\n                            color: darken($newColor, 25%);\n                        }\n                        .vloc-ins-selectable-item-coverage-details-limit-value {\n                            color: $newColor;\n                        }\n                    }\n                    .vloc-ins-selectable-item-coverage-details-categories {\n                        .vloc-ins-selectable-item-coverage-details-attributes {\n                            .vloc-ins-selectable-item-coverage-details-attributes-value {\n                                color: $newColor;\n                                font-weight: 400;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        .vloc-ins-enrollment-price-container {\n            .vloc-ins-enrollment-price-price,\n            .vloc-ins-enrollment-price-label {\n                color: darken($newColor, 25%);\n            }\n        }\n        .vloc-ins-enrollment-select-plan-btn {\n            border-color: $newColor;\n            color: white;\n            // background-color: rgba($newColor, 0.6);\n            background-color: $newColor;\n        }\n        .vloc-ins-selectable-item-compare-container {\n            label.vloc-ins-selectable-item-compare-checkbox-label-container {\n                color: $newColor;\n                .vloc-ins-selectable-item-compare-checkbox-faux {\n                    border-color: $newColor;\n                }\n                .vloc-ins-selectable-item-compare-checkbox-label {\n                    color: $newColor;\n                }\n            }\n        }\n        .vloc-ins-enrollment-plan-details {\n            color: darken($newColor, 25%);\n        }\n    }\n}\n\n// Styles:\n.vloc-mobile-hide {\n    display: block;\n}\n\n.vloc-mobile-show {\n    display: none;\n}\n\n.via-slds {\n    &.via-omni {\n        .vlc-slds-selItem {\n            >.slds-form-element__control {\n                &:first-child {\n                    width: 100%;\n                }\n            }\n        }\n    }\n    .vloc-ins-blue-text {\n        color: $royal-blue;\n    }\n    .vloc-ins-text-heading_medium {\n        font-weight: 400;\n        font-size: 1.1rem;\n    }\n    .vloc-ins-selectable-item-outer-container {\n        width: 100%;\n    }\n    .vloc-ins-selectable-item-image {\n        min-height: 4rem;\n    }\n    .vloc-ins-selectable-item-container:not(.vloc-ins-enrollment-skin) {\n        width: 100%;\n        .vloc-ins-selectable-item-pagination-container {\n            background-color: transparent;\n            border: none;\n            padding: 0;\n            .vloc-ins-selected-product {\n                >span {\n                    line-height: 2rem;\n                    .vloc-ins-selected-product-strong {\n                        font-weight: 400;\n                    }\n                }\n            }\n        }\n        .vloc-ins-selectable-item-inner-container {\n            margin: 0 auto;\n            .vloc-ins-selectable-item {\n                position: relative;\n                .vloc-ins-selcetable-item-inner-wrapper {\n                    position: relative;\n                    border: 1px solid $border-color;\n                    border-radius: 0.5rem;\n                    background-color: $enrollment-cards-bg;\n                    transition: border-color 150ms ease-in, background-color 150ms ease-in;\n                    margin: 0 0.5rem;\n                    height: 100%;\n                    .nds-text-heading_large {\n                        font-weight: 400;\n                    }\n                }\n                &:first-child {\n                    .vloc-ins-selcetable-item-inner-wrapper {\n                        margin-left: 0;\n                    }\n                }\n                &:last-child {\n                    .vloc-ins-selcetable-item-inner-wrapper {\n                        margin-right: 0;\n                    }\n                }\n                .vloc-ins-selectable-item-description {\n                    font-size: 1rem;\n                    margin-top: 0.25rem;\n                }\n                .vloc-ins-renewal-flag-container {\n                    position: absolute;\n                    z-index: 200;\n                    top: -.1rem;\n                    width: 101.1%;\n                    right: -.1rem;\n                    #content {\n                        position: absolute;\n                        color: white;\n                        top: 10%;\n                        font-size: .8rem;\n                        font-weight: 100;\n                        width: 100%;\n                        a {\n                            color: white;\n                            text-decoration: underline;\n                            font-size: .6rem;\n                            position: relative;\n                            top: -.2rem;\n                        }\n                    }\n                }\n                &:focus {\n                    outline: none;\n                }\n                .vloc-ins-selectable-item-bottom-link {\n                    position: absolute;\n                    bottom: 0;\n                    width: 100%;\n                }\n                .vloc-ins-selectable-item-icon {\n                    background: transparent;\n                    position: relative;\n                    margin-top: rem;\n                    .slds-icon {\n                        fill: #f06e2f;\n                        width: 4rem;\n                        height: 4rem;\n                    }\n                    &.gold {\n                        .slds-icon {\n                            fill: $gold;\n                        }\n                    }\n                    &.silver {\n                        .slds-icon {\n                            fill: $silver;\n                        }\n                    }\n                    &.bronze {\n                        .slds-icon {\n                            fill: $bronze;\n                        }\n                    }\n                }\n                &.vloc-ins-one-product {\n                    .vloc-ins-selcetable-item-inner-wrapper {\n                        margin: 0 auto;\n                        max-width: 50%;\n                    }\n                    &:last-child {\n                        .vloc-ins-selcetable-item-inner-wrapper {\n                            margin: 0 auto;\n                        }\n                    }\n                }\n                .vloc-ins-selectable-item-selected {\n                    width: 0;\n                    height: 0;\n                    border: 1px solid $royal-blue;\n                    border-style: solid;\n                    border-width: 0 4rem 4rem 0;\n                    border-color: transparent $royal-blue transparent transparent;\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    visibility: hidden;\n                    opacity: 0;\n                    transition: visibility 0ms linear 150ms, opacity 150ms ease-in;\n                    &.active {\n                        opacity: 1;\n                        visibility: visible;\n                        transition: visibility 0ms linear 0ms, opacity 150ms ease-in;\n                    }\n                    .slds-icon {\n                        fill: white;\n                        position: absolute;\n                        left: 2.1rem;\n                        top: 0.5rem;\n                        z-index: 300;\n                    }\n                }\n                .vloc-ins-selectable-item-top {\n                    .vloc-ins-selectable-item-price {\n                        width: 6.25rem;\n                        height: 6.25rem;\n                        margin: 0 auto;\n                        text-align: center;\n                        background-color: $royal-blue;\n                        border-radius: 50%;\n                        margin-bottom: 1.5rem;\n                        color: white;\n                        line-height: 6.25rem;\n                        font-size: 1.5rem;\n                        font-weight: 400;\n                        transition: background-color 150ms ease-in;\n                    }\n                    .vloc-ins-selectable-item-name {\n                        font-size: 1.25rem;\n                        line-height: 1.3;\n                        font-weight: 600;\n                        color: $dark-navy;\n                        text-align: center;\n                        margin-bottom: .75rem;\n                    }\n                }\n                .vloc-ins-selectable-item-middle {\n                    color: $attr-label;\n                    width: 100%;\n                    text-align: center;\n                    .vloc-ins-selectable-item-parent-attribute-label {\n                        margin-right: 0.25rem;\n                        display: inline-block;\n                    }\n                    .vloc-ins-selectable-item-parent-attribute-value {\n                        font-weight: 400;\n                        display: inline-block;\n                    }\n                    &.vloc-ins-parent-attr-regular+.vloc-ins-parent-attr-non-regular {\n                        margin-top: 1.5rem;\n                    }\n                    &.vloc-ins-parent-attr-non-regular {\n                        border-bottom: 1px solid $border-color;\n                        padding: 0.75rem 0.25rem;\n                        margin: 0;\n                        text-align: left;\n                        font-size: 0.875rem;\n                        .vloc-ins-selectable-item-parent-attribute-label {\n                            float: left;\n                        }\n                        .vloc-ins-selectable-item-parent-attribute-value {\n                            float: right;\n                            color: $royal-blue;\n                            .slds-icon {\n                                fill: $royal-blue;\n                            }\n                        }\n                    }\n                }\n                .vloc-ins-selectable-item-bottom {\n                    .vloc-ins-selectable-item-coverages {\n                        .vloc-ins-selectable-item-coverage {\n                            .vloc-ins-selectable-item-optional-heading-container {\n                                margin: 2rem 0 1.25rem;\n                                border-bottom: 1px solid rgba($attr-label, .4);\n                                padding-bottom: 0.25rem;\n                                .vloc-ins-selectable-item-optional-heading {\n                                    .vloc-ins-selectable-item-optional-heading-text {\n                                        text-transform: uppercase;\n                                        letter-spacing: 1px;\n                                        font-size: 1rem;\n                                        font-weight: 400;\n                                        color: $attr-label;\n                                    }\n                                }\n                            }\n                            .vloc-ins-selectable-item-coverage-details {\n                                .vloc-ins-selectable-item-coverage-details-wrapper {\n                                    font-size: 0.875rem;\n                                    .vloc-ins-selectable-item-coverage-details-limit-label {\n                                        color: $attr-label;\n                                        font-weight: 400;\n                                    }\n                                    .vloc-ins-selectable-item-coverage-details-limit-value {\n                                        color: $royal-blue;\n                                        transition: color 150ms ease-in;\n                                    }\n                                }\n                                .vloc-ins-selectable-item-coverage-details-categories {\n                                    .vloc-ins-selectable-item-coverage-details-attributes {\n                                        font-size: 0.75rem;\n                                        .vloc-ins-selectable-item-coverage-details-attributes-label {\n                                            color: $dark-navy;\n                                            font-weight: 300;\n                                        }\n                                        .vloc-ins-selectable-item-coverage-details-attributes-value {\n                                            color: $dark-navy;\n                                            font-weight: 400;\n                                            transition: color 150ms ease-in;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n\n@media screen and (max-width: 1023px) {\n    .via-slds {\n        .vloc-ins-selectable-item-container {\n            .vloc-ins-selectable-item-inner-container {\n                flex-wrap: wrap;\n                align-items: flex-start;\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 999px) {\n    html,\n    body {\n        font-size: 16px;\n    }\n}\n\n\n@media screen and (max-width: 699px) {\n    .via-slds {\n        .vloc-ins-selectable-item-container {\n            .vloc-ins-selectable-item-inner-container {\n                .vloc-ins-selectable-item {\n                    &.vloc-ins-one-product {\n                        .vloc-ins-selcetable-item-inner-wrapper {\n                            max-width: 80%;\n                        }\n                        .vloc-ins-selectable-item-top {\n                            .vloc-ins-selectable-item-name {\n                                font-size: 1.5rem;\n                                line-height: 1.2;\n                            }\n                        }\n                    }\n                    .vloc-ins-selcetable-item-inner-wrapper {\n                        padding: 1rem 2rem 14.375rem 2rem;\n                    }\n                }\n            }\n        }\n    }\n}\n\n@media screen and (max-width: 480px) {\n    .vloc-mobile-hide {\n        display: none;\n    }\n    .vloc-mobile-show {\n        display: block;\n    }\n    .via-slds {\n        .vloc-ins-selectable-item-container {\n            .vloc-ins-selected-product {\n                padding: 0 0.25rem;\n                margin-bottom: 0.5rem;\n                line-height: 1.4;\n                .vloc-ins-selected-product-strong {\n                    font-weight: bold;\n                }\n            }\n            .vloc-ins-selectable-item-pagination-container {\n                margin-bottom: 0.75rem;\n                .slds-button {\n                    padding: 0;\n                    .slds-button__icon {\n                        margin: 0;\n                    }\n                }\n                .vloc-mobile-page-count {\n                    line-height: 2rem;\n                }\n            }\n            .vloc-ins-selectable-item-inner-container {\n                .vloc-ins-selectable-item {\n                    &.vloc-ins-one-product {\n                        .vloc-ins-selcetable-item-inner-wrapper {\n                            max-width: 100%;\n                        }\n                    }\n                    .vloc-ins-selcetable-item-inner-wrapper {\n                        padding: 1rem 1rem 14.375rem 1rem;\n                    }\n                }\n            }\n        }\n    }\n}","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-small-group-plan-renewal","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-small-group-plan-renewal/%vlocity_namespace%__VlocityUITemplate__c/ins-os-small-group-plan-renewal"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-small-group-plan-renewal","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-small-group-plan-renewal","VlocityDataPackName":"ins-os-small-group-plan-renewal","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"},{"VlocityDataPackData":{"%vlocity_namespace%__VlocityUITemplate__c":[{"%vlocity_namespace%__Author__c":"Vlocity","%vlocity_namespace%__CSS__c":".via-nds .vloc-small-group-plan-selection {\n  width: 100%; }\n  .via-nds .vloc-small-group-plan-selection .vloc-cart-plans-button {\n    max-height: 2.5rem; }\n  .via-nds .vloc-small-group-plan-selection .vloc-ins-selectable-item-icon {\n    position: absolute;\n    top: 1rem;\n    width: 100%;\n    left: 50%;\n    margin-left: -50%; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-box {\n    position: relative;\n    height: 25rem;\n    text-align: center;\n    padding: 0;\n    background-color: #F8FBFE;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    animation: fadeIn 2s; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-box-header {\n    height: 46%;\n    display: flex;\n    flex-direction: column; }\n    .via-nds .vloc-small-group-plan-selection .vloc-plan-box-header .vloc-link {\n      color: black; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-image {\n    max-width: 3rem;\n    max-height: 3rem;\n    padding: 0.5rem; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-icon .slds-icon {\n    fill: #F06E2F; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-icon.gold .slds-icon {\n    fill: #F8C300; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-icon.silver .slds-icon {\n    fill: #C1CCDF; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-icon.bronze .slds-icon {\n    fill: #B2720C; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-header-text {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    flex: 1 1 auto; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-box-body {\n    height: 54%;\n    padding: 0 1rem 1rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-table {\n    margin: 0 auto; }\n    .via-nds .vloc-small-group-plan-selection .vloc-plan-table td {\n      width: 50%;\n      max-width: 0;\n      padding-bottom: 0.25rem; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-footer {\n    width: 100%; }\n  .via-nds .vloc-small-group-plan-selection .vloc-link:hover {\n    text-decoration: underline; }\n  .via-nds .vloc-small-group-plan-selection .vloc-link:focus {\n    box-shadow: none; }\n  .via-nds .vloc-small-group-plan-selection .vloc-plan-select-button {\n    width: 60%; }\n  .via-nds .vloc-small-group-plan-selection .vloc-renewal-header {\n    background-color: rgba(0, 112, 210, 0.3);\n    color: white;\n    position: relative;\n    z-index: 1;\n    font-size: 0.8rem;\n    font-weight: 100;\n    height: 2.4rem; }\n    .via-nds .vloc-small-group-plan-selection .vloc-renewal-header .vloc-link {\n      color: white;\n      line-height: 1;\n      text-decoration: underline; }\n  .via-nds .vloc-small-group-plan-selection .vloc-renewal-header-svg {\n    display: block;\n    fill: rgba(0, 112, 210, 0.3); }\n  .via-nds .vloc-small-group-plan-selection .vloc-renewal-flag-hidden {\n    opacity: 0; }\n  .via-nds .vloc-small-group-plan-selection .vloc-selected-plan {\n    border-color: #0070D2;\n    box-shadow: -1px 0 0 1px #0070D2, inset -1px 0 0 1px #0070D2;\n    background-color: #ebf3fc; }\n    .via-nds .vloc-small-group-plan-selection .vloc-selected-plan .vloc-renewal-header {\n      background-color: #0070D2; }\n    .via-nds .vloc-small-group-plan-selection .vloc-selected-plan .vloc-renewal-header-svg {\n      fill: #0070D2; }\n  .via-nds .vloc-small-group-plan-selection .vloc-cart-plans-collapse {\n    max-height: 0;\n    overflow: hidden;\n    transition: max-height 0.5s cubic-bezier(0.65, 0.05, 0.36, 1); }\n    .via-nds .vloc-small-group-plan-selection .vloc-cart-plans-collapse.in {\n      max-height: 50rem; }\n  .via-nds .vloc-small-group-plan-selection .vloc-cart-plans-collapse-toggle {\n    text-align: center; }\n    .via-nds .vloc-small-group-plan-selection .vloc-cart-plans-collapse-toggle .nds-icon {\n      fill: #0070D2; }\n    .via-nds .vloc-small-group-plan-selection .vloc-cart-plans-collapse-toggle .vloc-toggle-closed .nds-icon {\n      transform: rotate(180deg); }\n\n@keyframes fadeIn {\n  from {\n    opacity: 0; }\n  to {\n    opacity: 1; } }\n","%vlocity_namespace%__CustomJavascript__c":"let insSgpsCustomEventName;\n/**\n * Evaluates when the stepInitKey in the OS Set Values step changes\n * @param {Object} control Element control\n */\nbaseCtrl.prototype.shouldReinitTemplate = function(control) {\n    const bpTreeResponse = baseCtrl.prototype.$scope.bpTree.response;\n    const insSgpsKey = baseCtrl.prototype.$scope.bpTree.propSetMap.insSgpsKey;\n    const insSgpsNode = bpTreeResponse[insSgpsKey];\n    const stepInitKey = control.name + 'Init';\n    if (insSgpsNode[stepInitKey] !== bpTreeResponse[stepInitKey]) {\n        return true;\n    }\n};\n\n/**\n * Triggers reinitialization of step's template, with option to reinitialize shared cart data as well\n * @param {Object} control Element control\n */\nbaseCtrl.prototype.reinitTemplate = function(control) {\n    const bpTreeResponse = baseCtrl.prototype.$scope.bpTree.response;\n    const insSgpsKey = baseCtrl.prototype.$scope.bpTree.propSetMap.insSgpsKey;\n    const insSgpsNode = bpTreeResponse[insSgpsKey];\n    if (insSgpsNode.insSgpsCartInit !== bpTreeResponse.insSgpsCartInit) {\n        control.cartReinit = true;\n    }\n    const event = new CustomEvent(insSgpsCustomEventName, {'detail': control});\n    document.dispatchEvent(event);\n};\n\nvlocity.cardframework.registerModule.controller('insOsSmallGroupPlanSelectionCtrl', ['$scope', '$rootScope', '$timeout', '$q', '$sldsModal', function($scope, $rootScope, $timeout, $q, $sldsModal) {\n    'use strict';\n    const cartPageSize = 3;\n    let bpTreeResponse;\n    let scp;\n    let remotePageSize;\n    let remoteRespCountAll = 0;\n    let remoteRespCountNew = 0;\n    $scope.currencyCode = '$';\n    if (baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol) {\n        $scope.currencyCode = baseCtrl.prototype.$scope.bpTree.oSCurrencySymbol;\n    }\n\n    function reinitEventHandler(e) {\n        const control = e.detail;\n        document.removeEventListener(insSgpsCustomEventName, reinitEventHandler);\n        $scope.insSelectionInit(baseCtrl.prototype, control, control.cartReinit);\n    }\n\n    // Template initialization\n    /**\n     * @param {Object} baseCtrl OS baseCtrl\n     * @param {Object} control Element control\n     * @param {Boolean} [initializeCart] Flag when user moves back and forth from template step\n     */\n    $scope.insSelectionInit = function(baseCtrl, control, initializeCart) {\n        insSgpsCustomEventName = 'vloc-os-ins-small-group-selection-' + control.name + Math.round((new Date()).getTime() / 1000);\n        // Listens for template reinit\n        document.addEventListener(insSgpsCustomEventName, reinitEventHandler);\n        // OS dataJSON object\n        bpTreeResponse = baseCtrl.$scope.bpTree.response;\n        delete bpTreeResponse.lastRecordId;\n        // OS scope\n        scp = baseCtrl.$scope;\n        console.log('insSelectionInit control', control);\n        // Determines minimum number of plans that should be added to the page each time you request more\n        remotePageSize = control.propSetMap.remoteOptions.pageSize;\n        // This key must be defined in the OS Script Configuration JSON for the template to work\n        const insSgpsKey = baseCtrl.$scope.bpTree.propSetMap.insSgpsKey;\n        // This creates a custom node in the dataJSON to track plan selections across multiple OS steps\n        bpTreeResponse[insSgpsKey] = bpTreeResponse[insSgpsKey] || {};\n        $scope.insSgpsNode = bpTreeResponse[insSgpsKey];\n        // This key must be defined in an OS Set Values step before the template step\n        $scope.insSgpsNode.insSgpsCartInit = bpTreeResponse.insSgpsCartInit;\n        const stepInitKey = control.name + 'Init';\n        $scope.insSgpsNode[stepInitKey] = bpTreeResponse[stepInitKey];\n        $scope.insSgpsNode.selectedPlansMap = initializeCart ? {} : $scope.insSgpsNode.selectedPlansMap || {};\n        $scope.insSgpsNode.cartCompareSelectMap = initializeCart ? {} : $scope.insSgpsNode.cartCompareSelectMap || {};\n        // Initialize data on the first OS step this template is used\n        if (!$scope.insSgpsNode.cartPlans || initializeCart) {\n            $scope.insSgpsNode.cartPlans = [];\n            const selectableItems = control.vlcSI[control.itemsKey];\n            if (selectableItems.length) {\n                // Initialization if renewal OS\n                renewalInit(selectableItems);\n            }\n        }\n        control[control.name] = {};\n        formatCart(0, true);\n        // Initial call to get available plans, wrapped in timeout so $rootScope.loading gets set after page is ready\n        $timeout(function() {\n            remoteInvoke(control)\n            .then(function(remoteResp) {\n                console.log('insSelectionInit remoteResp', remoteResp);\n                control[control.name].unselectedNewPlans = [];\n                control[control.name].selectedFilters = {};\n                control[control.name].filterAttrValues = remoteResp[control.name].filterAttrValues || {};\n                control[control.name].filtersAvailable = _.isEmpty(control[control.name].filterAttrValues) ? false : true;\n                control[control.name].newCompareSelectMap = {};\n                angular.forEach(control[control.name].filterAttrValues, function(filter) {\n                    filter.listOfValues = _.uniq(filter.listOfValues).sort();\n                });\n                const newPlans = remoteResp[control.name].listProducts;\n                formatNewPlans(newPlans, control);\n                dataJsonSync();\n            })\n            .catch(angular.noop);\n        }, 0);\n    };\n\n    // Toggles whether filters dropdown is open\n    $scope.toggleFiltersDropdown = function() {\n        $scope.openFilterDropdown = !$scope.openFilterDropdown;\n    };\n\n    // Toggles selected filter and makes remote call to refresh list of available products\n    /**\n     * @param {String} filterKey Name of filter type\n     * @param {String} value User selected filter value\n     * @param {Object} control Element control\n     */\n    $scope.toggleFilter = function(filterKey, value, control) {\n        control[control.name].lastResultReached = false;\n        control[control.name].selectedFilters[filterKey] = control[control.name].selectedFilters[filterKey] || [];\n        control[control.name].newCompareSelectMap = {};\n        const valueIndex = control[control.name].selectedFilters[filterKey].indexOf(value.value);\n        if (valueIndex > -1) {\n            control[control.name].selectedFilters[filterKey].splice(valueIndex, 1);\n            if (!control[control.name].selectedFilters[filterKey].length) {\n                delete control[control.name].selectedFilters[filterKey];\n            }\n        } else {\n            control[control.name].selectedFilters[filterKey].push(value.value);\n        }\n        delete bpTreeResponse.lastRecordId;\n        delete control[control.name].lastRecordId;\n        remoteInvoke(control)\n        .then(function(remoteResp) {\n            console.log('toggleFilter remoteResp', remoteResp);\n            control[control.name].unselectedNewPlans = [];\n            const newPlans = remoteResp[control.name].listProducts;\n            formatNewPlans(newPlans, control);\n        })\n        .catch(angular.noop);\n    };\n\n    // Requests additional plans based on lastRecordId\n    /**\n     * @param {Object} control Element control\n     */\n    $scope.getMorePlans = function(control) {\n        bpTreeResponse.lastRecordId = control[control.name].lastRecordId;\n        remoteInvoke(control)\n        .then(function(remoteResp) {\n            console.log('getMorePlans remoteResp', remoteResp);\n            const newPlans = remoteResp[control.name].listProducts;\n            formatNewPlans(newPlans, control);\n        })\n        .catch(angular.noop);\n    };\n\n    // Handle renewal plans and new plans in cart\n    /**\n     * @param {Object} plan Cart plan\n     * @param {Object} control Element control\n     */\n    $scope.toggleCartPlan = function(plan, control) {\n        // Flag to determine whether to select or deselect\n        const deselecting = plan.selected;\n        if (deselecting) {\n            if (plan.renewal) {\n                // Renewal plans get tracked if they are being deleted\n                $scope.insSgpsNode.renewalPlansToDelete[plan.Id] = true;\n            } else {\n                // Add non-renewal plan back to bottom list\n                delete $scope.insSgpsNode.selectedPlansMap[plan.Id];\n                $scope.insSgpsNode.cartPlans.splice(plan.originalIndex, 1);\n                formatCart($scope.insSgpsNode.displayedCartPlans[0].originalIndex, true);\n                control[control.name].unselectedNewPlans.unshift(plan);\n                if (plan.vlcCompSelected) {\n                    // Move compare flag to unselected plan map if compare box is checked\n                    $scope.toggleNewCompareSelect(plan, control);\n                    $scope.toggleCartCompareSelect(plan);\n                }\n            }\n        } else {\n            // If plan is being renewed nothing needs to be tracked\n            delete $scope.insSgpsNode.renewalPlansToDelete[plan.Id];\n        }\n        plan.selected = !plan.selected;\n        dataJsonSync();\n    };\n\n    // Add new plan to cart\n    /**\n     * @param {Object} plan Selected plan\n     * @param {Number} planIndex Index in displayedPlans\n     * @param {Object} control Element control\n     */\n    $scope.addNewPlan = function(plan, planIndex, control) {\n        plan.selected = true;\n        $scope.insSgpsNode.selectedPlansMap[plan.Id] = plan;\n        control[control.name].unselectedNewPlans.splice(planIndex, 1);\n        if (plan.vlcCompSelected) {\n            // Move compare flag to cart plan map if compare box is checked\n            $scope.toggleNewCompareSelect(plan, control);\n            $scope.toggleCartCompareSelect(plan);\n        }\n        $scope.insSgpsNode.cartPlans.unshift(plan);\n        formatCart(0, true);\n        dataJsonSync();\n    };\n\n    // Helper method to display number of selected filters\n    /**\n     * @param {Object} control Element control\n     */\n    $scope.selectedFiltersCount = function(control) {\n        let count = 0;\n        angular.forEach(control[control.name].selectedFilters, function(array) {\n            count += array.length;\n        });\n        return count;\n    };\n\n    // Helper method to display filter checkbox\n    /**\n     * @param {String} filterKey Filter type\n     * @param {String} value Filter value\n     * @param {Object} control Element control\n     */\n    $scope.isFilterSelected = function(filterKey, value, control) {\n        if (control[control.name].selectedFilters[filterKey] && control[control.name].selectedFilters[filterKey].indexOf(value.value) > -1) {\n            return true;\n        }\n    };\n\n    // Adds cart plan to list (shared across steps) for compare modal\n    /**\n     * @param {Object} plan Cart plan (either new or renewal)\n     */\n    $scope.toggleCartCompareSelect = function(plan) {\n        if (!$scope.insSgpsNode.cartCompareSelectMap[plan.Id]) {\n            $scope.insSgpsNode.cartCompareSelectMap[plan.Id] = plan;\n            plan.vlcCompSelected = true;\n        } else {\n            delete $scope.insSgpsNode.cartCompareSelectMap[plan.Id];\n            plan.vlcCompSelected = false;\n        }\n    };\n\n    // Adds unselected new plan to list (specific to each step) for compare modal\n    /**\n     * @param {Object} plan Unselected new plan\n     * @param {Object} control Element control\n     */\n    $scope.toggleNewCompareSelect = function(plan, control) {\n        if (!control[control.name].newCompareSelectMap[plan.Id]) {\n            control[control.name].newCompareSelectMap[plan.Id] = plan;\n            plan.vlcCompSelected = true;\n        } else {\n            delete control[control.name].newCompareSelectMap[plan.Id];\n            plan.vlcCompSelected = false;\n        }\n    };\n\n    // Gets called when clicking next/previous directional buttons at top\n    /**\n     * @param {String} direction Prev or Next\n     */\n    $scope.paginateItems = function(direction) {\n        const currentIndex = $scope.insSgpsNode.displayedCartPlans[0].originalIndex;\n        let newIndex = 0;\n        if (direction === 'prev') {\n            newIndex = currentIndex - cartPageSize;\n        } else if (direction === 'next') {\n            newIndex = currentIndex + cartPageSize;\n        }\n        formatCart(newIndex);\n    };\n\n    // Count how many cart plans are selected\n    $scope.selectedPlansCount = function() {\n        let count = 0;\n        angular.forEach($scope.insSgpsNode.cartPlans, function(plan) {\n            if (plan.selected) {\n                count += 1;\n            }\n        });\n        return count;\n    };\n\n    //Launch compare modal - right now it is a fixed template but this is exposed js, to-do: use OS modal template\n    $scope.openCompareModal = function(plan, control) {\n        if (plan) {\n            $scope.modalRecords = [plan, plan.originalPlan.records[0]];\n            $scope.isSelectable = false;\n        } else {\n            const newPlans = _.values(control[control.name].newCompareSelectMap);\n            const cartPlans = _.values($scope.insSgpsNode.cartCompareSelectMap);\n            $scope.modalRecords = newPlans.concat(cartPlans);\n            $scope.isSelectable = true;\n        }\n        $sldsModal({\n            backdrop: 'static',\n            title: 'Compare Plans',\n            scope: $scope,\n            showLastYear: true,\n            animation: true,\n            templateUrl: control.propSetMap.modalHTMLTemplateId,\n            show: true\n        });\n    };\n\n    //Launch compare modal - right now it is a fixed template but this is exposed js, to-do: use OS modal template\n    $scope.openDetailModal = function(plan, control) {\n        $scope.modalRecords = [plan];//modalProducts = list of product and last years\n        $scope.isSelectable = false;\n        $sldsModal({\n            backdrop: 'static',\n            title: 'View Details',\n            scope: $scope,\n            showLastYear: true,\n            animation: true,\n            templateUrl: control.propSetMap.modalHTMLTemplateId,\n            show: true\n        });\n    };\n\n    // Toggles plan selection from within compare modal\n    /**\n     * @param {Object} plan Can be either a renewal or new plan\n     * @param {Object} control Element control\n     */\n    $scope.toggleModalPlan = function(plan, control) {\n        if (plan.selected || plan.renewal) {\n            $scope.toggleCartPlan(plan, control);\n        } else {\n            plan.selected = true;\n            const unselectedNewPlans = control[control.name].unselectedNewPlans;\n            // Find index in new plans to splice and move into cart\n            for (let i = 0; i < unselectedNewPlans.length; i++) {\n                const newPlan = unselectedNewPlans[i];\n                if (plan.Id === newPlan.Id) {\n                    $scope.addNewPlan(plan, i, control);\n                    break;\n                }\n            }\n        }\n    };\n\n    // Initialize data for renewal OS\n    /**\n    * @param {Object} selectableItems control.vlcSI[control.itemsKey]\n    */\n    function renewalInit(selectableItems) {\n        $scope.insSgpsNode.renewalPlansToDelete = {};\n        angular.forEach(selectableItems, function(plan) {\n            plan.selected = true;\n            plan.renewal = true;\n            formatPlan(plan);\n            if ($scope.insSgpsNode.renewalPlansToDelete[plan.Id]) {\n                plan.selected = false;\n            }\n        });\n        Array.prototype.push.apply($scope.insSgpsNode.cartPlans, selectableItems);\n    }\n\n    // Set tier for default icon color\n    /**\n    * @param {Object} plan\n    */\n    function setTierClass(plan) {\n        const name = plan.Name || plan.productName;\n        if (plan[baseCtrl.prototype.$scope.nsPrefix + 'Tier__c']) {\n            plan.tierClass = plan[baseCtrl.prototype.$scope.nsPrefix + 'plan.TierClass__c'].toLowerCase();\n        } else if (name.toLowerCase().indexOf('gold') > -1) {\n            plan.tierClass = 'gold';\n        } else if (name.toLowerCase().indexOf('silver') > -1) {\n            plan.tierClass = 'silver';\n        } else if (name.toLowerCase().indexOf('bronze') > -1) {\n            plan.tierClass = 'bronze';\n        }\n    };\n\n    // Index cart items\n    /**\n    * @param {Number} newIndex Starting index of cart plans subset\n    * @param {Boolean} [reindex] Flag to refresh original indexes\n    */\n    function formatCart(newIndex, reindex) {\n        if (reindex) {\n            angular.forEach($scope.insSgpsNode.cartPlans, function(plan, i) {\n                plan.originalIndex = i;\n            });\n        }\n        $scope.insSgpsNode.displayedCartPlans = $scope.insSgpsNode.cartPlans.slice(newIndex, newIndex + cartPageSize);\n        $scope.insSgpsNode.prevDisabled = newIndex === 0 ? true : false;\n        $scope.insSgpsNode.nextDisabled = newIndex + cartPageSize >= $scope.insSgpsNode.cartPlans.length ? true : false;\n    }\n\n    //Format plan, calls setTierClass, loops through attributes to format\n    /**\n    * @param {Object} plan\n    */\n    function formatPlan(plan){\n        setTierClass(plan);\n        if (plan.attributeCategories && plan.attributeCategories.records) {\n            angular.forEach(plan.attributeCategories.records, function(attributeCategory) {\n                angular.forEach(attributeCategory.productAttributes.records, function(productAttribute) {\n                    if (productAttribute.values && productAttribute.userValues && (productAttribute.multiselect || productAttribute.inputType === 'radio' || productAttribute.inputType === 'dropdown')){\n                        productAttribute.formattedValues = [];\n                        let selected = [];\n                        if (!Array.isArray(productAttribute.userValues)) { //userValues can be a single value\n                            selected.push(productAttribute.userValues);\n                        } else {\n                            for (let i = 0; i < productAttribute.userValues.length; i++) { //could have an array of Objs or an array of Strings/Integers\n                                let value = productAttribute.userValues[i];\n                                let valueType = typeof value;\n                                if (valueType !== 'object' || value === null) {\n                                    selected.push(value);\n                                } else {\n                                    for (let key in value) { //multiselect checkbox - get keys with true [{value1: true}, {value2: false}]\n                                        if (value[key]) {\n                                            selected.push(key);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        for(let i = 0; i < selected.length; i++){\n                            for(let j = 0; j < productAttribute.values.length; j++){\n                                if(selected[i].toString() === productAttribute.values[j].value.toString()){\n                                    productAttribute.formattedValues.push(productAttribute.values[j].label);\n                                }\n                            }\n                        }\n                    }\n                });\n            });\n        }\n    }\n\n    // Dedupes and sets tiers for new plans\n    /**\n     * @param {Array} newPlans Plans returned from remote method\n     * @param {Object} control Element control\n     */\n    function formatNewPlans(newPlans, control) {\n        const newPlansRecords = newPlans.records;\n        const totalSize = newPlans.totalSize;\n        const newLastRecordId = newPlansRecords ? newPlansRecords[newPlansRecords.length - 1].Id : null;\n        if (!newPlansRecords || control[control.name].lastRecordId === newLastRecordId) {\n            console.log('last result reached');\n            control[control.name].lastResultReached = true;\n            remoteRespCountAll = 0;\n            remoteRespCountNew = 0;\n            return;\n        }\n        control[control.name].lastRecordId = newLastRecordId;\n        angular.forEach(newPlansRecords, function(plan) {\n            remoteRespCountAll += 1;\n            if (isNewPlan(plan)) {\n                formatPlan(plan);\n                control[control.name].unselectedNewPlans.push(plan);\n                remoteRespCountNew += 1;\n            }\n        });\n        if (remoteRespCountAll < totalSize && remoteRespCountNew < remotePageSize) {\n            $scope.getMorePlans(control);\n        } else {\n            remoteRespCountAll = 0;\n            remoteRespCountNew = 0;\n        }\n    }\n\n    // Check if new plan is already being tracked\n    /**\n     * @param {Object} plan\n     */\n    function isNewPlan(plan) {\n        for (let i = 0; i < $scope.insSgpsNode.cartPlans.length; i++) {\n            const cartPlan = $scope.insSgpsNode.cartPlans[i];\n            if (plan.Id === cartPlan.Id || plan.Id === cartPlan.productId) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    // Calls OmniScript buttonClick method, which invokes remote method defined on the Selectable Items action\n    /**\n     * @param {Object} control Element control} control\n     */\n    function remoteInvoke(control) {\n        const deferred = $q.defer();\n        $rootScope.loading = true;\n        bpTreeResponse.attributeFilters = control[control.name].selectedFilters;\n        scp.buttonClick(bpTreeResponse, control, scp, undefined, 'typeAheadSearch', undefined, function(remoteResp) {\n            deferred.resolve(remoteResp);\n        });\n        return deferred.promise;\n    }\n\n    // Keep plan selections in sync across OS steps\n    function dataJsonSync() {\n        $scope.insSgpsNode.selectedPlans = [];\n        angular.forEach($scope.insSgpsNode.selectedPlansMap, function(selectedPlan) {\n            $scope.insSgpsNode.selectedPlans.push(selectedPlan);\n        });\n        // For renewal OS - need to track quote line item ids for deletion from quote\n        if (!_.isEmpty($scope.insSgpsNode.renewalPlansToDelete)) {\n            $scope.insSgpsNode.unselectedIds = Object.keys($scope.insSgpsNode.renewalPlansToDelete);\n        }\n    }\n}]);\n\nvlocity.cardframework.registerModule.directive('insOsDropdownHandler', function($document) {\n    'use strict';\n    return {\n        restrict: 'A',\n        link: function(scope, element, attrs) {\n            let isFocused = false;\n            const dropdownElement = angular.element(element.find('.nds-dropdown')[0]);\n            const onClick = function(event) {\n                const isChild = dropdownElement.has(event.target).length > 0;\n                if (!isChild) {\n                    scope.$apply(attrs.insOsDropdownToggle);\n                    $document.off('click', onClick);\n                    isFocused = false;\n                }\n            };\n            element.on('click', function(e) {\n                if (!isFocused) {\n                    e.stopPropagation();\n                    scope.$apply(attrs.insOsDropdownToggle);\n                    $document.on('click', onClick);\n                    isFocused = true;\n                }\n            });\n        }\n    };\n});","%vlocity_namespace%__Definition__c":"","%vlocity_namespace%__Description__c":"","%vlocity_namespace%__DisplayOn__c":"","%vlocity_namespace%__ExternalID__c":"ins-os-small-group-plan-selection/1/Vlocity/1541626322158","%vlocity_namespace%__HTML__c":"<div class=\"vloc-small-group-plan-selection\" ng-if=\"control.vlcSI[control.itemsKey]\">\n    <div ng-if=\"baseCtrl.shouldReinitTemplate(control)\" ng-init=\"baseCtrl.reinitTemplate(control)\"></div>\n    <div class=\"vloc-small-group-plan-selection-container\" ng-controller=\"insOsSmallGroupPlanSelectionCtrl\" ng-init=\"insSelectionInit(baseCtrl, control)\">\n        <div class=\"nds-box nds-m-bottom_x-large\" bs-collapse>\n            <div class=\"nds-grid\">\n                <button class=\"nds-button nds-button_neutral nds-max-small-size_1-of-3 nds-size_1-of-8 vloc-cart-plans-button\" ng-disabled=\"insSgpsNode.prevDisabled\" ng-click=\"paginateItems('prev')\" title=\"Previous Products\">\n                    <slds-button-svg-icon size=\"'small'\" sprite=\"'utility'\" icon=\"'back'\"></slds-button-svg-icon>\n                </button>\n                <div class=\"nds-size_6-of-8 nds-text-align_center\">\n                    <h2 class=\"nds-text-heading_medium\">Selected Plans</h2>\n                    <p class=\"nds-m-top_x-small\"><b>{{selectedPlansCount()}}</b> products selected</p>\n                </div>\n                <button class=\"nds-button nds-button_neutral nds-max-small-size_1-of-3 nds-size_1-of-8 vloc-cart-plans-button\" ng-disabled=\"insSgpsNode.nextDisabled\" ng-click=\"paginateItems('next')\" title=\"Next Products\">\n                    <slds-button-svg-icon size=\"'small'\" sprite=\"'utility'\" icon=\"'forward'\"></slds-button-svg-icon>\n                </button>\n            </div>\n            <div class=\"nds-grid nds-grid_pull-padded-medium nds-m-top_medium vloc-cart-plans-collapse\" bs-collapse-target>\n                <article ng-repeat=\"plan in insSgpsNode.displayedCartPlans track by plan.Id\" class=\"nds-col nds-size_1-of-3\">\n                    <div class=\"nds-box nds-m-around_small vloc-plan-box vloc-cart-plan-box\" ng-class=\"{'vloc-selected-plan': plan.selected}\">\n                        <header class=\"vloc-plan-box-header\">\n                            <div ng-class=\"{'vloc-renewal-flag-hidden': !plan.renewal}\">\n                                <div class=\"nds-text-align_center nds-p-horizontal_x-small vloc-renewal-header\">\n                                    <div ng-if=\"plan.originalPlan\">\n                                        <p class=\"nds-truncate\">Replaces {{plan.originalPlan.records[0].Name}}</p>\n                                        <button class=\"nds-button vloc-link\" ng-click=\"openCompareModal(plan, control)\">View Changes</button>\n                                    </div>\n                                </div>\n                                <svg class=\"vloc-renewal-header-svg\" viewBox=\"0 0 320 20\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n                                    <g><polygon points=\"0,0 160,20 320,0\" /></g>\n                                </svg>\n                            </div>\n                            <div class=\"vloc-ins-selectable-item-similar-plan-container\" ng-if=\"plan.similarToLastYear\">\n                                <div class=\"vloc-ins-selectable-item-similar-plan\">\n                                    <span class=\"vloc-ins-selectable-item-similar-plan-label\">Similar to last year's plan</span>\n                                    <div class=\"vloc-ins-selectable-item-similar-plan-triangle-pointing-down\"></div>\n                                </div>\n                            </div>\n                            <div ng-if=\"!plan.renewal && !plan.similarToLastYear\" class=\"vloc-ins-selectable-item-icon\">\n                                <img ng-src=\"{{instanceHost + plan.ImageId}}\" ng-if=\"plan.ImageId\" class=\"vloc-plan-image\" />\n                                <span class=\"nds-icon_container vloc-plan-icon\" ng-if=\"!plan.ImageId\" ng-class=\"plan.tierClass\">\n                                    <slds-svg-icon sprite=\"'custom'\" size=\"'large'\" icon=\"'custom91'\"></slds-svg-icon>\n                                    <span class=\"nds-assistive-text\">Default Icon</span>\n                                </span>\n                            </div>\n                            <div class=\"nds-p-vertical_small nds-p-horizontal_medium vloc-plan-header-text\">\n                                <button class=\"nds-button nds-text-heading_small vloc-link\" ng-click=\"openDetailModal(plan, control)\"><b>{{plan.productName || plan.Name}}</b></button>\n                                <p class=\"nds-p-top_small\"><span class=\"nds-text-heading_large\"><b>{{plan.Price | currency: currencyCode: 0}}</b></span><b>/mo</b></p>\n                            </div>\n                        </header>\n                        <div class=\"vloc-plan-box-body\">\n                            <table class=\"vloc-plan-table\">\n                                <tbody>\n                                    <tr ng-repeat=\"attribute in plan.attributeCategories.records[0].productAttributes.records | limitTo: 5\">\n                                        <td class=\"nds-p-right_small nds-truncate\">{{attribute.label}}</td>\n                                        <td class=\"nds-text-align_right nds-truncate\">\n                                            <b>\n                                                <span ng-if=\"!attribute.formattedValues\">\n                                                    <span ng-if=\"attribute.dataType !== 'currency'\">{{attribute.userValues}}</span>\n                                                    <span ng-if=\"attribute.dataType === 'currency'\">{{attribute.userValues | currency: currencyCode: 0}}</span>\n                                                </span>\n                                                <span>\n                                                    <span ng-repeat=\"val in attribute.formattedValues\">{{val}}<span ng-if=\"$index !== attribute.formattedValues.length - 1\">, </span>\n                                                    </span>\n                                                </span>\n                                            </b>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                            <div class=\"vloc-plan-footer\">\n                                <button class=\"nds-button nds-button_neutral nds-m-top_x-small vloc-plan-select-button\" ng-class=\"{'nds-button_brand': plan.selected}\" ng-click=\"toggleCartPlan(plan, control)\">\n                                    <span>{{plan.selected ? 'Selected' : 'Select Plan'}}</span>\n                                </button>\n                                <div class=\"nds-form-element nds-m-top_x-small\">\n                                    <div class=\"nds-form-element__control\">\n                                        <div class=\"nds-checkbox\">\n                                            <input ng-checked=\"plan.vlcCompSelected\" ng-click=\"toggleCartCompareSelect(plan)\" type=\"checkbox\" name=\"options\" id=\"vloc-checkbox-plan-{{plan.Id}}\" />\n                                            <label class=\"nds-checkbox__label\" for=\"vloc-checkbox-plan-{{plan.Id}}\">\n                                                <span class=\"nds-checkbox_faux\"></span>\n                                                <span class=\"nds-form-element__label\">Compare</span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </article>\n            </div>\n            <div class=\"vloc-cart-plans-collapse-toggle\">\n                <button ng-click=\"insSgpsNode.collapsedCart = !insSgpsNode.collapsedCart\" ng-class=\"{'vloc-toggle-closed': insSgpsNode.collapsedCart}\" class=\"nds-button vloc-link\" bs-collapse-toggle>\n                    <span>{{insSgpsNode.collapsedCart ? 'Show' : 'Hide'}} Selected Plans</span>\n                    <slds-svg-icon sprite=\"'utility'\" icon=\"'chevronup'\" size=\"'xx-small'\" extra-classes=\"'nds-m-left--xx-small nds-m-right--xx-small'\"></slds-svg-icon>\n                </button>\n            </div>\n        </div>\n        <div class=\"nds-box\">\n            <div class=\"nds-text-align_center\">\n                <h2 class=\"nds-text-heading_medium\">Available Plans</h2>\n            </div>\n            <div ng-if=\"control[control.name].filtersAvailable\" class=\"nds-grid nds-m-vertical_large\">\n                <div class=\"nds-size_1-of-2\">\n                    <div class=\"nds-form-element\">\n                        <div class=\"nds-form-element__control\">\n                            <div class=\"nds-combobox_container nds-dropdown-trigger nds-dropdown-trigger--click\" ins-os-dropdown-handler ins-os-dropdown-toggle=\"toggleFiltersDropdown()\" ng-class=\"{'nds-is-open': openFilterDropdown}\">\n                                <div class=\"nds-combobox__form-element nds-input-has-icon nds-input-has-icon_right\" role=\"none\">\n                                    <input value=\"{{selectedFiltersCount(control) ? selectedFiltersCount(control) + ' Filters Selected' : 'Filter by'}}\" type=\"text\" class=\"nds-input nds-combobox__input\" id=\"combobox-id-1\" aria-controls=\"listbox-id-1\"\n                                    autoComplete=\"off\" role=\"textbox\" readonly=\"\" />\n                                    <span class=\"nds-icon_container nds-icon-utility-down nds-input__icon nds-input__icon_right\">\n                                        <slds-button-svg-icon sprite=\"'utility'\" icon=\"'down'\"></slds-button-svg-icon>\n                                    </span>\n                                </div>\n                                <div class=\"nds-dropdown nds-dropdown_fluid nds-dropdown--left\">\n                                    <ul class=\"nds-listbox nds-listbox_vertical\" role=\"menu\" ng-repeat=\"(filterKey, filter) in control[control.name].filterAttrValues\">\n                                        <li class=\"nds-listbox__item\" role=\"presentation\">\n                                            <div class=\"nds-media nds-listbox__option nds-listbox__option_plain nds-media_small\" role=\"presentation\">\n                                                <h3 class=\"nds-text-title_caps\" role=\"presentation\">{{filter.attributeName}}</h3>\n                                            </div>\n                                        </li>\n                                        <li class=\"nds-listbox__item\" role=\"presentation\" ng-repeat=\"value in filter.listOfValues\" ng-click=\"toggleFilter(filterKey, value, control)\">\n                                            <div class=\"nds-media nds-listbox__option nds-listbox__option_plain nds-media_small\" role=\"option\" ng-class=\"{'nds-is-selected': isFilterSelected(filterKey, value, control)}\">\n                                                <span class=\"nds-media__figure nds-listbox__option-icon\">\n                                                    <slds-svg-icon sprite=\"'utility'\" icon=\"'check'\" size=\"'x-small'\" extra-classes=\"'nds-listbox__icon-selected'\"></slds-svg-icon>\n                                                </span>\n                                                <span class=\"nds-media__body\">\n                                                    <span class=\"nds-truncate\" title=\"{{value.displayText}}\">{{value.displayText}}</span>\n                                                </span>\n                                            </div>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"nds-grid\">\n                <div class=\"nds-size_1-of-2\">\n                    <p><b>{{control[control.name].unselectedNewPlans.length || 0}}</b> products available</p>\n                </div>\n                <div class=\"nds-size_1-of-2 nds-text-align_right\">\n                    <button ng-click=\"openCompareModal(null, control)\" class=\"nds-button nds-button_brand\">Compare</button>\n                </div>\n            </div>\n            <div class=\"nds-grid nds-grid_pull-padded-medium nds-wrap\">\n                <article ng-repeat=\"(planIndex, plan) in control[control.name].unselectedNewPlans track by plan.Id\" class=\"nds-col nds-size_1-of-3\">\n                    <div class=\"nds-box nds-m-around_small vloc-plan-box\" ng-class=\"{'vloc-selected-plan': plan.selected}\">\n                        <header class=\"vloc-plan-box-header\">\n                            <div class=\"nds-m-top_medium\">\n                                <img ng-src=\"{{instanceHost + plan.ImageId}}\" ng-if=\"plan.ImageId\" class=\"vloc-plan-image\" />\n                                <span class=\"nds-icon_container vloc-plan-icon\" ng-if=\"!plan.ImageId\" ng-class=\"plan.tierClass\">\n                                    <slds-svg-icon sprite=\"'custom'\" size=\"'large'\" icon=\"'custom91'\"></slds-svg-icon>\n                                    <span class=\"nds-assistive-text\">Default Icon</span>\n                                </span>\n                            </div>\n                            <div class=\"nds-p-bottom_small nds-p-horizontal_medium vloc-plan-header-text\">\n                                <button class=\"nds-button nds-text-heading_small vloc-link\" ng-click=\"openDetailModal(plan, control)\"><b>{{plan.Name}}</b></button>\n                                <p class=\"nds-p-top_small\"><span class=\"nds-text-heading_large\"><b>{{plan.Price | currency: currencyCode: 0}}</b></span><b>/mo</b></p>\n                            </div>\n                        </header>\n                        <div class=\"vloc-plan-box-body\">\n                            <table class=\"vloc-plan-table\">\n                                <tbody>\n                                    <tr ng-repeat=\"attribute in plan.attributeCategories.records[0].productAttributes.records | limitTo: 5\">\n                                        <td class=\"nds-p-right_small nds-truncate\">{{attribute.label}}</td>\n                                            <td class=\"nds-text-align_right nds-truncate\">\n                                            <b>\n                                                <span ng-if=\"!attribute.formattedValues\">\n                                                    <span ng-if=\"attribute.dataType !== 'currency'\">{{attribute.userValues}}</span>\n                                                    <span ng-if=\"attribute.dataType === 'currency'\">{{attribute.userValues | currency: currencyCode: 0}}</span>\n                                                </span>\n                                                <span>\n                                                    <span ng-repeat=\"val in attribute.formattedValues\">{{val}}<span ng-if=\"$index !== attribute.formattedValues.length - 1\">, </span>\n                                                    </span>\n                                                </span>\n                                            </b>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                            <div class=\"vloc-plan-footer\">\n                                <button class=\"nds-button nds-button_neutral nds-m-top_x-small vloc-plan-select-button\" ng-class=\"{'nds-button_brand': plan.selected}\" ng-click=\"addNewPlan(plan, planIndex, control)\">\n                                    <span>{{plan.selected ? 'Selected' : 'Select Plan'}}</span>\n                                </button>\n                                <div class=\"nds-form-element nds-m-top_x-small\">\n                                    <div class=\"nds-form-element__control\">\n                                        <div class=\"nds-checkbox\">\n                                            <input ng-checked=\"plan.vlcCompSelected\" ng-click=\"toggleNewCompareSelect(plan, control)\" type=\"checkbox\" name=\"options\" id=\"vloc-checkbox-plan-{{plan.Id}}\" />\n                                            <label class=\"nds-checkbox__label\" for=\"vloc-checkbox-plan-{{plan.Id}}\">\n                                                <span class=\"nds-checkbox_faux\"></span>\n                                                <span class=\"nds-form-element__label\">Compare</span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </article>\n            </div>\n            <div class=\"nds-text-align_center\">\n                <button ng-hide=\"control[control.name].lastResultReached\" ng-click=\"getMorePlans(control)\" class=\"nds-button vloc-link\">Load more plans</button>\n            </div>\n        </div>\n    </div>\n</div>","%vlocity_namespace%__ParentID__c":"","%vlocity_namespace%__SampleJson__c":"{\"AddToCart\":\"Add to Cart\",\"OmniMonthly\":\"Monthly Cost\",\"OmniOneTime\":\"One Time Cost\",\"control\":{\"itemsKey\":\"results\",\"propSetMap\":{\"label\":\"Property Label\"},\"vlcSI\":{\"results\":[{\"Description\":\"Product Description\",\"MonthlyCost\":20,\"Name\":\"Product Name\",\"OneTimeCost\":100,\"added\":false}]}}}","%vlocity_namespace%__Sass__c":"$light-blue: #F8FBFE;\n$royal-blue: #0070D2;\n$orange: #F06E2F;\n$bronze: #B2720C;\n$silver: #C1CCDF;\n$gold: #F8C300;\n\n.via-nds {\n    .vloc-small-group-plan-selection {\n        width: 100%;\n\n        .vloc-cart-plans-button {\n            max-height: 2.5rem;\n        }\n\n        .vloc-ins-selectable-item-icon {\n          position: absolute;\n          top: 1rem;\n          width: 100%;\n          left: 50%;\n          margin-left: -50%;\n        }\n\n        .vloc-plan-box {\n            position: relative;\n            height: 25rem;\n            text-align: center;\n            padding: 0;\n            background-color: $light-blue;\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            animation: fadeIn 2s;\n        }\n\n        .vloc-plan-box-header {\n            height: 46%;\n            display: flex;\n            flex-direction: column;\n\n            .vloc-link {\n                color: black;\n            }\n        }\n\n        .vloc-plan-image {\n            max-width: 3rem;\n            max-height: 3rem;\n            padding: 0.5rem;\n        }\n\n        .vloc-plan-icon {\n            .slds-icon {\n                fill: $orange;\n            }\n\n            &.gold .slds-icon {\n                fill: $gold;\n            }\n\n            &.silver .slds-icon {\n                fill: $silver;\n            }\n\n            &.bronze .slds-icon {\n                fill: $bronze;\n            }\n        }\n\n        .vloc-plan-header-text {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            flex: 1 1 auto;\n        }\n\n        .vloc-plan-box-body {\n            height: 54%;\n            padding: 0 1rem 1rem;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: space-between;\n        }\n\n        .vloc-plan-table {\n            margin: 0 auto;\n\n            td {\n                width: 50%;\n                max-width: 0;\n                padding-bottom: 0.25rem;\n            }\n        }\n\n        .vloc-plan-footer {\n            width: 100%;\n        }\n\n        .vloc-link {\n            &:hover {\n                text-decoration: underline;\n            }\n            &:focus {\n                box-shadow: none;\n            }\n        }\n\n        .vloc-plan-select-button {\n            width: 60%;\n        }\n\n        .vloc-renewal-header {\n            background-color: rgba($royal-blue, .3);\n            color: white;\n            position: relative;\n            z-index: 1;\n            font-size: 0.8rem;\n            font-weight: 100;\n            height: 2.4rem;\n\n            .vloc-link {\n                color: white;\n                line-height: 1;\n                text-decoration: underline;\n            }\n        }\n\n        .vloc-renewal-header-svg {\n            display: block;\n            fill: rgba($royal-blue, .3);;\n        }\n\n        .vloc-renewal-flag-hidden {\n            opacity: 0;\n        }\n\n        .vloc-selected-plan {\n            border-color: $royal-blue;\n            box-shadow: -1px 0 0 1px $royal-blue, inset -1px 0 0 1px $royal-blue;\n            background-color: darken($light-blue, 3%);\n\n            .vloc-renewal-header {\n                background-color: $royal-blue;\n            }\n\n            .vloc-renewal-header-svg {\n                fill: $royal-blue;\n            }\n        }\n\n        .vloc-cart-plans-collapse {\n            max-height: 0;\n            overflow: hidden;\n            transition: max-height 0.5s cubic-bezier(0.65, 0.05, 0.36, 1);\n\n            &.in {\n                max-height: 50rem;\n            }\n        }\n\n        .vloc-cart-plans-collapse-toggle {\n            text-align: center;\n\n            .nds-icon {\n                fill: $royal-blue;\n            }\n\n            .vloc-toggle-closed .nds-icon {\n                transform: rotate(180deg);\n            }\n        }\n    }\n}\n\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n    }\n\n    to {\n        opacity: 1;\n    }\n}\n","%vlocity_namespace%__Type__c":"OmniScript Selectable Items","%vlocity_namespace%__Version__c":1,"Name":"ins-os-small-group-plan-selection","VlocityDataPackIsIncluded":true,"VlocityDataPackType":"SObject","VlocityRecordSObjectType":"%vlocity_namespace%__VlocityUITemplate__c","VlocityRecordSourceKey":"VlocityUITemplate/ins-os-small-group-plan-selection/%vlocity_namespace%__VlocityUITemplate__c/ins-os-small-group-plan-selection"}],"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-small-group-plan-selection","VlocityDataPackType":"VlocityUITemplate"},"VlocityDataPackIsIncluded":true,"VlocityDataPackKey":"VlocityUITemplate/ins-os-small-group-plan-selection","VlocityDataPackName":"ins-os-small-group-plan-selection","VlocityDataPackParents":[],"VlocityDataPackRelationshipType":"Primary","VlocityDataPackStatus":"Success","VlocityDataPackType":"VlocityUITemplate"}],"name":"Vlocity InsOSTemplates","primaryDataPackKey":"VlocityDeploy","processMultiple":true,"status":"Complete","version":1}